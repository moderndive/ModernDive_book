<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>An Introduction to Statistical and Data Sciences via R</title>
  <meta name="description" content="An open-source and fully-reproducible electronic textbook bridging the gap between traditional introductory statistics and data science courses.">
  <meta name="generator" content="bookdown 0.5 and GitBook 2.6.7">

  <meta property="og:title" content="An Introduction to Statistical and Data Sciences via R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://moderndive.com/" />
  <meta property="og:image" content="http://moderndive.com/images/logos/book_cover.png" />
  <meta property="og:description" content="An open-source and fully-reproducible electronic textbook bridging the gap between traditional introductory statistics and data science courses." />
  <meta name="github-repo" content="ismayc/moderndiver-book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="An Introduction to Statistical and Data Sciences via R" />
  
  <meta name="twitter:description" content="An open-source and fully-reproducible electronic textbook bridging the gap between traditional introductory statistics and data science courses." />
  <meta name="twitter:image" content="http://moderndive.com/images/logos/book_cover.png" />

<meta name="author" content="Chester Ismay and Albert Y. Kim">


<meta name="date" content="2018-01-11">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="index.html">
<link rel="next" href="3-ci.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-89938436-1', 'auto');
  ga('send', 'pageview');

</script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#intro-for-students"><i class="fa fa-check"></i><b>1.1</b> Introduction for students</a><ul>
<li class="chapter" data-level="1.1.1" data-path="index.html"><a href="index.html#learning-goals"><i class="fa fa-check"></i><b>1.1.1</b> What you will learn from this book</a></li>
<li class="chapter" data-level="1.1.2" data-path="index.html"><a href="index.html#pipeline"><i class="fa fa-check"></i><b>1.1.2</b> Data/science pipeline</a></li>
<li class="chapter" data-level="1.1.3" data-path="index.html"><a href="index.html#reproducible"><i class="fa fa-check"></i><b>1.1.3</b> Reproducible research</a></li>
<li class="chapter" data-level="1.1.4" data-path="index.html"><a href="index.html#final-note-for-students"><i class="fa fa-check"></i><b>1.1.4</b> Final note for students</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#intro-instructors"><i class="fa fa-check"></i><b>1.2</b> Introduction for instructors</a><ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="index.html#who-is-this-book-for"><i class="fa fa-check"></i><b>1.2.1</b> Who is this book for?</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#connect-contribute"><i class="fa fa-check"></i><b>1.3</b> Connect and contribute</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#about-book"><i class="fa fa-check"></i><b>1.4</b> About this book</a></li>
</ul></li>
<li class="part"><span><b>I Inference via infer</b></span></li>
<li class="chapter" data-level="2" data-path="2-sampling.html"><a href="2-sampling.html"><i class="fa fa-check"></i><b>2</b> Data Collection via Sampling</a><ul>
<li class="chapter" data-level="" data-path="2-sampling.html"><a href="2-sampling.html#needed-packages"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="2.1" data-path="2-sampling.html"><a href="2-sampling.html#random-sampling"><i class="fa fa-check"></i><b>2.1</b> Random sampling</a><ul>
<li class="chapter" data-level="2.1.1" data-path="2-sampling.html"><a href="2-sampling.html#tasting-soup"><i class="fa fa-check"></i><b>2.1.1</b> Tasting soup</a></li>
<li class="chapter" data-level="2.1.2" data-path="2-sampling.html"><a href="2-sampling.html#common-terms"><i class="fa fa-check"></i><b>2.1.2</b> Common terms</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="2-sampling.html"><a href="2-sampling.html#vizsamp"><i class="fa fa-check"></i><b>2.2</b> Visualizing sampling</a><ul>
<li class="chapter" data-level="2.2.1" data-path="2-sampling.html"><a href="2-sampling.html#sampling-distribution"><i class="fa fa-check"></i><b>2.2.1</b> Sampling distribution</a></li>
<li class="chapter" data-level="2.2.2" data-path="2-sampling.html"><a href="2-sampling.html#repeated-sampling-via-do"><i class="fa fa-check"></i><b>2.2.2</b> Repeated sampling via <code>do</code></a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="2-sampling.html"><a href="2-sampling.html#simulation"><i class="fa fa-check"></i><b>2.3</b> Simulation</a></li>
<li class="chapter" data-level="2.4" data-path="2-sampling.html"><a href="2-sampling.html#review-of-mosaic-simulation-functions"><i class="fa fa-check"></i><b>2.4</b> Review of <code>mosaic</code> simulation functions</a></li>
<li class="chapter" data-level="2.5" data-path="2-sampling.html"><a href="2-sampling.html#conclusion"><i class="fa fa-check"></i><b>2.5</b> Conclusion</a><ul>
<li class="chapter" data-level="2.5.1" data-path="2-sampling.html"><a href="2-sampling.html#whats-to-come"><i class="fa fa-check"></i><b>2.5.1</b> What’s to come?</a></li>
<li class="chapter" data-level="2.5.2" data-path="2-sampling.html"><a href="2-sampling.html#script-of-r-code"><i class="fa fa-check"></i><b>2.5.2</b> Script of R code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="3-ci.html"><a href="3-ci.html"><i class="fa fa-check"></i><b>3</b> Confidence Intervals</a><ul>
<li class="chapter" data-level="" data-path="3-ci.html"><a href="3-ci.html#needed-packages-1"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="3.1" data-path="3-ci.html"><a href="3-ci.html#bootstrapping"><i class="fa fa-check"></i><b>3.1</b> Bootstrapping</a><ul>
<li class="chapter" data-level="3.1.1" data-path="3-ci.html"><a href="3-ci.html#review-of-bootstrapping"><i class="fa fa-check"></i><b>3.1.1</b> Review of bootstrapping</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="3-ci.html"><a href="3-ci.html#relation-to-hypothesis-testing"><i class="fa fa-check"></i><b>3.2</b> Relation to hypothesis testing</a></li>
<li class="chapter" data-level="3.3" data-path="3-ci.html"><a href="3-ci.html#effect-size"><i class="fa fa-check"></i><b>3.3</b> Effect size</a></li>
<li class="chapter" data-level="3.4" data-path="3-ci.html"><a href="3-ci.html#conclusion-1"><i class="fa fa-check"></i><b>3.4</b> Conclusion</a><ul>
<li class="chapter" data-level="3.4.1" data-path="3-ci.html"><a href="3-ci.html#whats-to-come-1"><i class="fa fa-check"></i><b>3.4.1</b> What’s to come?</a></li>
<li class="chapter" data-level="3.4.2" data-path="3-ci.html"><a href="3-ci.html#script-of-r-code-1"><i class="fa fa-check"></i><b>3.4.2</b> Script of R code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="4-hypo.html"><a href="4-hypo.html"><i class="fa fa-check"></i><b>4</b> Hypothesis Testing</a><ul>
<li class="chapter" data-level="" data-path="4-hypo.html"><a href="4-hypo.html#needed-packages-2"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="4.1" data-path="4-hypo.html"><a href="4-hypo.html#when-inference-is-not-needed"><i class="fa fa-check"></i><b>4.1</b> When inference is not needed</a></li>
<li class="chapter" data-level="4.2" data-path="4-hypo.html"><a href="4-hypo.html#basics-of-hypothesis-testing"><i class="fa fa-check"></i><b>4.2</b> Basics of hypothesis testing</a></li>
<li class="chapter" data-level="4.3" data-path="4-hypo.html"><a href="4-hypo.html#trial"><i class="fa fa-check"></i><b>4.3</b> Criminal trial analogy</a><ul>
<li class="chapter" data-level="4.3.1" data-path="4-hypo.html"><a href="4-hypo.html#two-possible-conclusions"><i class="fa fa-check"></i><b>4.3.1</b> Two possible conclusions</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="4-hypo.html"><a href="4-hypo.html#types-of-errors-in-hypothesis-testing"><i class="fa fa-check"></i><b>4.4</b> Types of errors in hypothesis testing</a><ul>
<li class="chapter" data-level="4.4.1" data-path="4-hypo.html"><a href="4-hypo.html#logic-of-hypothesis-testing"><i class="fa fa-check"></i><b>4.4.1</b> Logic of hypothesis testing</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="4-hypo.html"><a href="4-hypo.html#statistical-significance"><i class="fa fa-check"></i><b>4.5</b> Statistical significance</a></li>
<li class="chapter" data-level="4.6" data-path="4-hypo.html"><a href="4-hypo.html#example-revisiting-the-lady-tasting-tea"><i class="fa fa-check"></i><b>4.6</b> Example: Revisiting the Lady Tasting Tea</a><ul>
<li class="chapter" data-level="4.6.1" data-path="4-hypo.html"><a href="4-hypo.html#data"><i class="fa fa-check"></i><b>4.6.1</b> Data</a></li>
<li class="chapter" data-level="4.6.2" data-path="4-hypo.html"><a href="4-hypo.html#test-statistic-delta"><i class="fa fa-check"></i><b>4.6.2</b> Test statistic <span class="math inline">\(\delta\)</span></a></li>
<li class="chapter" data-level="4.6.3" data-path="4-hypo.html"><a href="4-hypo.html#observed-effect-delta"><i class="fa fa-check"></i><b>4.6.3</b> Observed effect <span class="math inline">\(\delta^*\)</span></a></li>
<li class="chapter" data-level="4.6.4" data-path="4-hypo.html"><a href="4-hypo.html#model-of-h_0"><i class="fa fa-check"></i><b>4.6.4</b> Model of <span class="math inline">\(H_0\)</span></a></li>
<li class="chapter" data-level="4.6.5" data-path="4-hypo.html"><a href="4-hypo.html#simulated-data"><i class="fa fa-check"></i><b>4.6.5</b> Simulated data</a></li>
<li class="chapter" data-level="4.6.6" data-path="4-hypo.html"><a href="4-hypo.html#distribution-of-delta-under-h_0"><i class="fa fa-check"></i><b>4.6.6</b> Distribution of <span class="math inline">\(\delta\)</span> under <span class="math inline">\(H_0\)</span></a></li>
<li class="chapter" data-level="4.6.7" data-path="4-hypo.html"><a href="4-hypo.html#the-p-value"><i class="fa fa-check"></i><b>4.6.7</b> The p-value</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="4-hypo.html"><a href="4-hypo.html#example-comparing-two-means"><i class="fa fa-check"></i><b>4.7</b> Example: Comparing two means</a><ul>
<li class="chapter" data-level="4.7.1" data-path="4-hypo.html"><a href="4-hypo.html#randomizationpermutation"><i class="fa fa-check"></i><b>4.7.1</b> Randomization/permutation</a></li>
<li class="chapter" data-level="4.7.2" data-path="4-hypo.html"><a href="4-hypo.html#comparing-action-and-romance-movies"><i class="fa fa-check"></i><b>4.7.2</b> Comparing action and romance movies</a></li>
<li class="chapter" data-level="4.7.3" data-path="4-hypo.html"><a href="4-hypo.html#sampling-rightarrow-randomization"><i class="fa fa-check"></i><b>4.7.3</b> Sampling <span class="math inline">\(\rightarrow\)</span> randomization</a></li>
<li class="chapter" data-level="4.7.4" data-path="4-hypo.html"><a href="4-hypo.html#data-1"><i class="fa fa-check"></i><b>4.7.4</b> Data</a></li>
<li class="chapter" data-level="4.7.5" data-path="4-hypo.html"><a href="4-hypo.html#model-of-h_0-1"><i class="fa fa-check"></i><b>4.7.5</b> Model of <span class="math inline">\(H_0\)</span></a></li>
<li class="chapter" data-level="4.7.6" data-path="4-hypo.html"><a href="4-hypo.html#test-statistic-delta-1"><i class="fa fa-check"></i><b>4.7.6</b> Test statistic <span class="math inline">\(\delta\)</span></a></li>
<li class="chapter" data-level="4.7.7" data-path="4-hypo.html"><a href="4-hypo.html#observed-effect-delta-1"><i class="fa fa-check"></i><b>4.7.7</b> Observed effect <span class="math inline">\(\delta^*\)</span></a></li>
<li class="chapter" data-level="4.7.8" data-path="4-hypo.html"><a href="4-hypo.html#simulated-data-1"><i class="fa fa-check"></i><b>4.7.8</b> Simulated data</a></li>
<li class="chapter" data-level="4.7.9" data-path="4-hypo.html"><a href="4-hypo.html#distribution-of-delta-under-h_0-1"><i class="fa fa-check"></i><b>4.7.9</b> Distribution of <span class="math inline">\(\delta\)</span> under <span class="math inline">\(H_0\)</span></a></li>
<li class="chapter" data-level="4.7.10" data-path="4-hypo.html"><a href="4-hypo.html#the-p-value-1"><i class="fa fa-check"></i><b>4.7.10</b> The p-value</a></li>
<li class="chapter" data-level="4.7.11" data-path="4-hypo.html"><a href="4-hypo.html#summary"><i class="fa fa-check"></i><b>4.7.11</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="4-hypo.html"><a href="4-hypo.html#theory-hypo"><i class="fa fa-check"></i><b>4.8</b> Building theory-based methods using computation</a><ul>
<li class="chapter" data-level="4.8.1" data-path="4-hypo.html"><a href="4-hypo.html#example-t-test-for-two-independent-samples"><i class="fa fa-check"></i><b>4.8.1</b> Example: <span class="math inline">\(t\)</span>-test for two independent samples</a></li>
<li class="chapter" data-level="4.8.2" data-path="4-hypo.html"><a href="4-hypo.html#conditions-for-t-test"><i class="fa fa-check"></i><b>4.8.2</b> Conditions for t-test</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="4-hypo.html"><a href="4-hypo.html#resampling-based-inference-for-regression"><i class="fa fa-check"></i><b>4.9</b> Resampling-based inference for regression</a><ul>
<li class="chapter" data-level="4.9.1" data-path="4-hypo.html"><a href="4-hypo.html#data-2"><i class="fa fa-check"></i><b>4.9.1</b> Data</a></li>
<li class="chapter" data-level="4.9.2" data-path="4-hypo.html"><a href="4-hypo.html#test-statistic-delta-2"><i class="fa fa-check"></i><b>4.9.2</b> Test statistic <span class="math inline">\(\delta\)</span></a></li>
<li class="chapter" data-level="4.9.3" data-path="4-hypo.html"><a href="4-hypo.html#observed-effect-delta-2"><i class="fa fa-check"></i><b>4.9.3</b> Observed effect <span class="math inline">\(\delta^*\)</span></a></li>
<li class="chapter" data-level="4.9.4" data-path="4-hypo.html"><a href="4-hypo.html#model-of-h_0-2"><i class="fa fa-check"></i><b>4.9.4</b> Model of <span class="math inline">\(H_0\)</span></a></li>
<li class="chapter" data-level="4.9.5" data-path="4-hypo.html"><a href="4-hypo.html#simulated-data-2"><i class="fa fa-check"></i><b>4.9.5</b> Simulated data</a></li>
<li class="chapter" data-level="4.9.6" data-path="4-hypo.html"><a href="4-hypo.html#distribution-of-delta-under-h_0-2"><i class="fa fa-check"></i><b>4.9.6</b> Distribution of <span class="math inline">\(\delta\)</span> under <span class="math inline">\(H_0\)</span></a></li>
<li class="chapter" data-level="4.9.7" data-path="4-hypo.html"><a href="4-hypo.html#the-p-value-2"><i class="fa fa-check"></i><b>4.9.7</b> The p-value</a></li>
</ul></li>
<li class="chapter" data-level="4.10" data-path="4-hypo.html"><a href="4-hypo.html#theoryreg"><i class="fa fa-check"></i><b>4.10</b> Theory-based inference for regression</a><ul>
<li class="chapter" data-level="4.10.1" data-path="4-hypo.html"><a href="4-hypo.html#conditions-for-regression"><i class="fa fa-check"></i><b>4.10.1</b> Conditions for regression</a></li>
<li class="chapter" data-level="4.10.2" data-path="4-hypo.html"><a href="4-hypo.html#resid"><i class="fa fa-check"></i><b>4.10.2</b> Residual analysis</a></li>
</ul></li>
<li class="chapter" data-level="4.11" data-path="4-hypo.html"><a href="4-hypo.html#conclusion-2"><i class="fa fa-check"></i><b>4.11</b> Conclusion</a><ul>
<li class="chapter" data-level="4.11.1" data-path="4-hypo.html"><a href="4-hypo.html#whats-to-come-2"><i class="fa fa-check"></i><b>4.11.1</b> What’s to come?</a></li>
<li class="chapter" data-level="4.11.2" data-path="4-hypo.html"><a href="4-hypo.html#script-of-r-code-2"><i class="fa fa-check"></i><b>4.11.2</b> Script of R code</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">An Introduction to Statistical and Data Sciences via R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<html>
<img src='http://moderndive.com/images/logos/wide_format.png' alt="ModernDive">
</html>
<div id="sampling" class="section level1">
<h1><span class="header-section-number">2</span> Data Collection via Sampling</h1>
<p>In this chapter we will introduce new concepts that will serve as the basis for the remainder of the text: <strong>sampling</strong> and <strong>resampling</strong>. We will see that the tools that you learned in the Data Exploration part of this book (tidy data, data visualization, and data wrangling) will also play an important role here. As mentioned before, the concepts throughout this text all build into a culmination allowing you to create better stories with data.</p>
<p>We begin with some helpful definitions that will help us better understand why statistical inference exists and why it is needed. We will then progress with introducing the second of our main datasets (in addition to the <code>nycflights13</code> data you’ve been working with) about OKCupid dating profiles to see how one can think of the distribution of a sample being an approximation of the distribution of the population. We will also focus on representative, random samples versus convenience samples in this context.</p>
<p>We then shift to a famous example from statistics lore on a lady tasting tea. This section will focus on introducing concepts without a lot of statistical jargon. The chapter will conclude with a summary of the different functions introduced in the <code>mosaic</code> package in this chapter.</p>
<div id="needed-packages" class="section level3 unnumbered">
<h3>Needed packages</h3>
<p>Let’s load all the packages needed for this chapter (this assumes you’ve already installed them). If needed, read Section <a href="#packages"><strong>??</strong></a> for information on how to install and load R packages.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)
<span class="kw">library</span>(okcupiddata)
<span class="kw">library</span>(mosaic)</code></pre></div>
<hr />
</div>
<div id="random-sampling" class="section level2">
<h2><span class="header-section-number">2.1</span> Random sampling</h2>
<p>Whenever you hear the phrases “random sampling” or just “sampling” (with regards to statistics), you should think about tasting soup. This likely sounds a little bonkers. Let’s dig into why tasting soup is such an excellent analogy to random sampling.</p>
<div id="tasting-soup" class="section level3">
<h3><span class="header-section-number">2.1.1</span> Tasting soup</h3>
<div class="figure" style="text-align: center"><span id="fig:soupimg"></span>
<img src="images/soup.jpg" alt="A bowl of Indian chicken and vegetable soup" width="\textwidth" />
<p class="caption">
Figure 2.1: A bowl of Indian chicken and vegetable soup
</p>
</div>
<p>Imagine that you have invited a group of friends over to try a new recipe for soup that you’ve never made before. As in the image above downloaded from <a href="http://readthespirit.wpengine.netdna-cdn.com/feed-the-spirit/wp-content/uploads/sites/19/2015/02/Chicken-soup-Indian-by-Fifth-Floor-Kitchen.jpg">here</a>, you’d like to make a bowl of Indian chicken soup with lots of different kinds of vegetables included.</p>
<p>You’ve carefully followed along with the recipe but you are concerned that you don’t have a lot of experience making foods from India. It is coming near the end of the prescribed time to cook given in the recipe. You begin to wonder:</p>
<ul>
<li>“Did I add too much curry spice?”</li>
<li>“Are the carrots cooked enough?”<br />
</li>
<li>“Does this actually taste good?”</li>
</ul>
<p>How can we answer these questions? Does it matter where we take a bite of soup from? Is there anything we should do to the soup before we taste? Is one taste enough?</p>
</div>
<div id="common-terms" class="section level3">
<h3><span class="header-section-number">2.1.2</span> Common terms</h3>
<p>The process of sampling brings with it many common terms that we define now. As you read over these definitions, think about how they each apply to the tasting soup example above.</p>
<p><strong>Definition: population</strong></p>
<p>The <em>population</em> is the (usually) large pool of observational units that we are interested in.</p>
<p><strong>Definition: sample</strong></p>
<p>A <em>sample</em> is a smaller collection of observational units that is selected from the population.</p>
<p><strong>Definition: sampling</strong></p>
<p><em>Sampling</em> refers to the process of selecting observations from a population. There are both random and non-random ways this can be done.</p>
<p><strong>Definition: representative sample</strong></p>
<p>A sample is said be a <em>representative sample</em> if the characteristics of observational units selected are a good approximation of the characteristics from the original population.</p>
<p><strong>Definition: bias</strong></p>
<p><em>Bias</em> corresponds to a favoring of one group in a population over another group.</p>
<p><strong>Definition: generalizability</strong></p>
<p><em>Generalizability</em> refers to the largest group in which it makes sense to make inferences about from the sample collected. This is directly related to how the sample was selected.</p>
<p><strong>Definition: parameter</strong></p>
<p>A <em>parameter</em> is a calculation based on one or more variables measured in the population. Parameters are almost always denoted symbolically using Greek letters such as <span class="math inline">\(\mu\)</span>, <span class="math inline">\(\pi\)</span>, <span class="math inline">\(\sigma\)</span>, <span class="math inline">\(\rho\)</span>, and <span class="math inline">\(\beta\)</span>.</p>
<p><strong>Definition: statistic</strong></p>
<p>A <em>statistic</em> is a calculation based on one or more variables measured in the sample. Statistics are usually denoted by lower case Arabic letters with other symbols added sometimes. These include <span class="math inline">\(\bar{x}\)</span>, <span class="math inline">\(\hat{p}\)</span>, <span class="math inline">\(s\)</span>, <span class="math inline">\(p\)</span>, and <span class="math inline">\(b\)</span>.</p>
<div class="learncheck">
<p>
<strong><em>Learning check</em></strong>
</p>
</div>
<p><strong>(LC7.1)</strong> Explain in your own words how tasting soup relates to the concepts of sampling covered here.</p>
<p><strong>(LC7.2)</strong> Describe a different scenario (not food or drink related) that is analogous to sampling concepts covered here.</p>
<div class="learncheck">

</div>
<p>Let’s explore these terms for our tasting soup example:</p>
<p><em>Population</em> - the entire container of soup that we have cooked.</p>
<p><em>Sample</em> - any smaller portion of soup collected that isn’t the whole container of soup. We could say that each spoonful of soup represents one sample.</p>
<p><em>Sampling</em> - the process of selecting spoonfuls from the container of soup</p>
<p><em>Representative sample</em> - A sample we select will only be representative if it tastes like what the soup tastes like in general. If we only select a carrot in our spoonful, we might not have a representative sample.</p>
<p><em>Bias</em> - As we noted with the carrot selection example above, we may select a sample that is not representative. If you watch chefs cook or if you frequently cook, you’ll be sure to stir the soup before you taste it.</p>
<p><em>Generalizability</em> - If we stir our soup before we taste a spoonful (and if we make sure we don’t just pick our favorite item in the soup), results from our sample can be generalized (by and large) to the larger pot of soup. When we say “Yum! This is good!” after a couple spoonfuls, we can be pretty confident that each bowl of soup for our friends will taste good too.</p>
<p><em>Parameter</em> - An example here is could be the proportion of curry entered into the entire pot of soup. A measurement of how salty the pot of soup is on average is also a parameter. How crunchy, on average, the carrots are in the pot of soup is one more example.</p>
<p><em>Statistic</em> - To convert a parameter to a statistic, you need only to think about the same measurement on a spoonful:</p>
<ul>
<li>The proportion of curry to non-curry in a spoonful of soup</li>
<li>How salty the spoonful of soup is that we collected as our sample</li>
<li>How crunchy the carrots are in our spoonful of soup</li>
</ul>
<div class="learncheck">
<p>
<strong><em>Learning check</em></strong>
</p>
</div>
<p><strong>(LC7.3)</strong> Why isn’t our population all bowls of soup? All bowls of Indian chicken soup?</p>
<p><strong>(LC7.4)</strong> Describe a way in which we could select a sample of flights from <code>nycflights13</code> that is not representative.</p>
<p><strong>(LC7.5)</strong> If we treat all of the flights in <code>nycflights13</code> as the population, give examples of three <em>parameters</em> we could calculate.</p>
<p><strong>(LC7.6)</strong> If we treat all of the flights in <code>nycflights13</code> as the population, give examples of three <em>statistics</em> we could calculate.</p>
<p><strong>(LC7.7)</strong> What biases might we see if we only select flights to Boston when we are interested in looking at mean flight delays from NYC?</p>
<div class="learncheck">

</div>
<hr />
</div>
</div>
<div id="vizsamp" class="section level2">
<h2><span class="header-section-number">2.2</span> Visualizing sampling</h2>
<p>Let’s explore how sampling and these other terms relate to working with data and data visualization. Here we introduce the <code>okcupiddata</code> R package <span class="citation">(Kim and Escobedo-Land 2016)</span>. Note that permission to use this data to create the R package was explicitly granted by OkCupid. More information about this package is available <a href="https://github.com/rudeboybert/okcupiddata">here</a>. The <code>profiles</code> data frame in this R data package contains data about 59,946 OkCupid users who were living within 25 miles of San Francisco, had active profiles on June 26, 2012, were online in the previous year, and had at least one picture in their profile. We will be focusing on the <code>height</code> variable, which corresponds to a self-reported height for each individual on their profile. Note that this is measured in inches.</p>
<p>Let’s take a look at the distribution of <code>height</code> using a histogram and <code>ggplot2</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> profiles, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> height)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">bins =</span> <span class="dv">20</span>, <span class="dt">color =</span> <span class="st">&quot;white&quot;</span>)</code></pre></div>
<p><img src="ismaykim_files/figure-html/height-hist-1.png" width="\textwidth" style="display: block; margin: auto;" /></p>
<p>We see here that this being self-reported data has led to the data being a little messy.</p>
<div class="learncheck">
<p>
<strong><em>Learning check</em></strong>
</p>
</div>
<p><strong>(LC7.8)</strong> Why does the histogram go all the way back to 0 for height and all the way up to 100?</p>
<div class="learncheck">

</div>
<p>To clean up the data a bit, let’s focus on just looking at heights between 55 inches and 85 inches. Remember that the <code>filter</code> function in <code>dplyr</code> allows us to focus on a subset of rows. The specific subset of rows we are interested in corresponds to the argument to the <code>filter</code> function. We will create a new data frame called <code>profiles_subset</code> that contains all rows with heights between 55 and 85 inclusive.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">profiles_subset &lt;-<span class="st"> </span>profiles <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(<span class="kw">between</span>(height, <span class="dv">55</span>, <span class="dv">85</span>))</code></pre></div>
<p>Next, let’s produce the same histogram as above but using the <code>profiles_subset</code> data frame instead.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> profiles_subset, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> height)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">bins =</span> <span class="dv">20</span>, <span class="dt">color =</span> <span class="st">&quot;white&quot;</span>)</code></pre></div>
<p><img src="ismaykim_files/figure-html/height-hist2-1.png" width="\textwidth" style="display: block; margin: auto;" /></p>
<p>We can think of this data as representing the <em>population</em> of interest. Let’s now take a random sample of size 100 from this population and look to see if this sample represents the overall shape of the population. In other words, we are going to use data visualization as our guide to understand the <em>representativeness</em> of the sample selected.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">set.seed</span>(<span class="dv">2017</span>)
profiles_sample1 &lt;-<span class="st"> </span>profiles_subset <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">resample</span>(<span class="dt">size =</span> <span class="dv">100</span>, <span class="dt">replace =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p>The <code>set.seed</code> function is used to ensure that all users get the same random sample when they run the code above. It is a way of interfacing with the pseudo-random number generation scheme that R uses to generate “random” numbers. If that command was not run, you’d obtain a different random sample than someone else if you ran the code above for the first time.</p>
<p>We have introduced the <code>resample</code> function from the <code>mosaic</code> package here <span class="citation">(Pruim, Kaplan, and Horton 2017)</span>. This function can be used for both sampling with and without replacement. Here we have chosen to sample without replacement. In other words, after the first row is chosen from the <code>profiles_subset</code> data frame at random it is kept out of the further 99 samples. Let’s now visualize the 100 values of the <code>height</code> variable in the <code>profiles_sample1</code> data frame. To keep this visualization on the same horizontal scale as our original population presented in <code>profiles_subset</code> we can use the <code>coord_cartesian</code> function along with the <code>c</code> function to specify the limits on the horizontal axis.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> profiles_sample1, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> height)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">bins =</span> <span class="dv">20</span>, <span class="dt">color =</span> <span class="st">&quot;white&quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;red&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">coord_cartesian</span>(<span class="dt">xlim =</span> <span class="kw">c</span>(<span class="dv">55</span>, <span class="dv">85</span>))</code></pre></div>
<p><img src="ismaykim_files/figure-html/plot-sample1-1.png" width="\textwidth" style="display: block; margin: auto;" /></p>
<div class="learncheck">
<p>
<strong><em>Learning check</em></strong>
</p>
</div>
<p><strong>(LC7.9)</strong> Does this random sample of <code>height</code> represent the population <code>height</code> variable well? Explain why or why not in a couple of sentences.</p>
<div class="learncheck">

</div>
<p>We now repeat this process of sampling to look to see how another random sample of <code>height</code> compares to the original population distribution.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">profiles_sample2 &lt;-<span class="st"> </span>profiles_subset <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">resample</span>(<span class="dt">size =</span> <span class="dv">100</span>, <span class="dt">replace =</span> <span class="ot">FALSE</span>)
<span class="kw">ggplot</span>(<span class="dt">data =</span> profiles_sample2, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> height)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">bins =</span> <span class="dv">20</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;yellow&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">coord_cartesian</span>(<span class="dt">xlim =</span> <span class="kw">c</span>(<span class="dv">55</span>, <span class="dv">85</span>))</code></pre></div>
<p><img src="ismaykim_files/figure-html/sample-profiles2-1.png" width="\textwidth" style="display: block; margin: auto;" /></p>
<p>Remember that a sample can never truly quantify all of the properties of a population since it contains less data and, thus, less information. We can use the overall shape as a good guess as to the representativeness of the sample in regards to the population though. We see that the above two random samples of size 100 have roughly the same shape as the original population <code>height</code> data. Let’s next explore what is known as a convenience sample and how its distribution compares to the population distribution.</p>
<p>A <strong>convenience sample</strong> is a sample that is chosen conveniently by the person selecting the sample. While certainly less work, convenience samples are generally not representative of the population since they will exclude some (usually large) portion of the population. Let’s look at values of <code>height</code> in our <code>profiles_subset</code> population that are larger than 6 feet tall (72 inches) and have that be the sample we choose.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">profiles_sample3 &lt;-<span class="st"> </span>profiles_subset <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(height <span class="op">&gt;=</span><span class="st"> </span><span class="dv">72</span>)
<span class="kw">ggplot</span>(<span class="dt">data =</span> profiles_sample3, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> height)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">bins =</span> <span class="dv">20</span>, <span class="dt">color =</span> <span class="st">&quot;white&quot;</span>, <span class="dt">fill =</span> <span class="st">&quot;blue&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">coord_cartesian</span>(<span class="dt">xlim =</span> <span class="kw">c</span>(<span class="dv">55</span>, <span class="dv">85</span>))</code></pre></div>
<p><img src="ismaykim_files/figure-html/sample-profiles3-1.png" width="\textwidth" style="display: block; margin: auto;" /></p>
<p>This is a clear example of a sample that is not representative of the population. The population <code>height</code> variable is roughly symmetric, whereas this distribution is right-skewed. Further, since it only selects large heights it has completely excluded the small and middle heights. We have seen here that data visualization provides an excellent tool in judging the representativeness of a sample.</p>
<div id="sampling-distribution" class="section level3">
<h3><span class="header-section-number">2.2.1</span> Sampling distribution</h3>
<p>The representativeness of a sample plays an even larger role than just looking at the shapes of distributions. Let’s suppose we were interested in estimating the mean <code>height</code> of all profiles in the <code>profiles_subset</code> data frame. To do so, we could look at the mean of the <code>height</code> variable in the <code>profiles_sample1</code> data frame:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">profiles_sample1 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarize</span>(<span class="kw">mean</span>(height))</code></pre></div>
<pre><code>  mean(height)
1        68.45</code></pre>
<p>But, we could also use <code>profiles_sample2</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">profiles_sample2 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarize</span>(<span class="kw">mean</span>(height))</code></pre></div>
<pre><code>  mean(height)
1         68.2</code></pre>
<p>Or maybe even <code>profiles_sample3</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">profiles_sample3 <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarize</span>(<span class="kw">mean</span>(height))</code></pre></div>
<pre><code>  mean(height)
1        73.38</code></pre>
<p>We see a clear difference here in looking at the mean of <code>height</code> in <code>profiles_sample3</code> versus <code>profiles_sample1</code> and <code>profiles_sample2</code>. This comes from the bias that is used in choosing only the top heights for <code>profiles_sample3</code>. If we had chosen to use this sample as our only sample, we would be quite a ways off from what the actual mean <code>height</code> in our population of <code>profiles_subset</code> is.</p>
<p>We also see that even random samples produce means that aren’t exactly the same. This sampling variability can be shown via what is called a <em>sampling distribution</em>. This is defined as the behavior of a statistic under repeated sampling. To build this sampling distribution for this example, we’ve created an interactive app using the <code>shiny</code> R package below that is available at <a href="http://ismay.shinyapps.io/okcupidheights/" class="uri">http://ismay.shinyapps.io/okcupidheights/</a>. You can specify the sample size you’d like to work with (100 is chosen by default) and then generate a random sample. You then can see the mean of this generated sample plotted in the bottom visualization. Repeating this process many times, you can start to see the shape of the sampling distribution take form. A screenshot of the app is below, but you are encouraged to go to <a href="http://ismay.shinyapps.io/okcupidheights/" class="uri">http://ismay.shinyapps.io/okcupidheights/</a> and test it out on your own.</p>
<div class="figure" style="text-align: center"><span id="fig:shiny"></span>
<img src="images/shinyapp.png" alt="Sampling distribution app at http://ismay.shinyapps.io/okcupidheights/." width="100%" />
<p class="caption">
Figure 2.2: Sampling distribution app at <a href="http://ismay.shinyapps.io/okcupidheights/" class="uri">http://ismay.shinyapps.io/okcupidheights/</a>.
</p>
</div>
</div>
<div id="repeated-sampling-via-do" class="section level3">
<h3><span class="header-section-number">2.2.2</span> Repeated sampling via <code>do</code></h3>
<p>We have looked at two random samples above, but using <code>mosaic</code> we can repeat this process over and over again with the <code>do</code> function. Below, we repeat this sampling process 5000 times. We can then plot the different values of the sample means to get a sense for what a reasonable range of values for the population parameter mean <code>height</code> is in the <code>profiles_subset</code> data frame.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sample_means &lt;-<span class="st"> </span><span class="kw">do</span>(<span class="dv">5000</span>) <span class="op">*</span>
<span class="st">    </span>(profiles_subset <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">resample</span>(<span class="dt">size =</span> <span class="dv">100</span>, <span class="dt">replace =</span> <span class="ot">FALSE</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">summarize</span>(<span class="dt">mean_height =</span> <span class="kw">mean</span>(height)))</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> sample_means, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> mean_height)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">color =</span> <span class="st">&quot;white&quot;</span>, <span class="dt">bins =</span> <span class="dv">20</span>)</code></pre></div>
<p><img src="ismaykim_files/figure-html/do-plot-1.png" width="\textwidth" style="display: block; margin: auto;" /></p>
<p>Note how the range of sample mean height values is much more narrow than the original range of <code>height</code> in the <code>profiles_subset</code> data frame. We also see a characteristic shape to this distribution of <code>mean_height</code>: the normal curve. This idea is commonly associated with statistics and you hopefully have a good sense of how this distribution comes about. As before, if you aren’t quite sure of this yet, go back and explore the shiny app above a bit more. We see that many values for the sample mean appear near the center of the distribution and a few values appear out in the tails providing the bell-shaped distribution linked with the normal distribution. You’ll see more examples of this in the chapters to come and in Appendix <a href="#appendixB"><strong>??</strong></a>.</p>
<div class="learncheck">
<p>
<strong><em>Learning check</em></strong>
</p>
</div>
<p><strong>(LC7.10)</strong> Why do the sample mean values have a much smaller spread than the original population data? You may want to play with the shiny app above a bit to understand why this is the case.</p>
<p><strong>(LC7.11)</strong> Why is random sampling so important here to create a distribution of sample means that provide a range of plausible values for the population mean height?</p>
<div class="learncheck">

</div>
<hr />
</div>
</div>
<div id="simulation" class="section level2">
<h2><span class="header-section-number">2.3</span> Simulation</h2>
<p>We next will introduce the ideas behind hypothesis testing that we will delve into more formally in the chapters to come. What follows is taken from a book entitled <em>The Lady Tasting Tea</em> <span class="citation">(Salsburg 2001)</span>:</p>
<blockquote>
<p>It was a summer afternoon in Cambridge, England, in the late 1920s. A group of university dons, their wives, and some guests were sitting around an outdoor table for afternoon tea. One of the women was insisting that tea tasted different depending upon whether the tea was poured into the milk or whether the milk was poured into the tea. The scientific minds among the men scoffed at this as sheer nonsense. What could be the difference? They could not conceive of any difference in the chemistry of the mixtures that could exist. A thin, short man, with thick glasses and a Vandyke beard beginning to turn gray, pounced on the problem. “Let us test the proposition,” he said excitedly. He began to outline an experiment in which the lady who insisted there was a difference would be presented with a sequence of cups of tea, in some of which the milk had been poured into the tea and in others of which the tea had been poured into the milk…</p>
</blockquote>
<blockquote>
<p>So it was that sunny summer afternoon in Cambridge. The lady might or might not have been correct about the tea infusion. The fun would be in finding a way to determine if she was right, and, under the direction of the man with the Vandyke beard, they began to discuss how they might make that determination.</p>
</blockquote>
<blockquote>
<p>Enthusiastically, many of them joined with him in setting up the experiment. Within a few minutes, they were pouring different patterns of infusion in a place where the lady could not see which cup was which. Then, with an air of finality, the man with the Vandyke beard presented her with her first cup. She sipped for a minute and declared that it was one where the milk had been poured into the tea. He noted her response without comment and presented her with the second cup…</p>
</blockquote>
<blockquote>
<p>The man with the Vandyke beard was Ronald Aylmer Fisher, who was in his late thirties at the time. He would later be knighted Sir Ronald Fisher. In 1935, he wrote a book entitled <em>The Design of Experiments</em>, and he described the experiment of the lady tasting tea in the second chapter of that book. In his book, Fisher discusses the lady and her belief as a hypothetical problem. He considers the various ways in which an experiment might be designed to determine if she could tell the difference. The problem in designing the experiment is that, if she is given a single cup of tea, she has a 50 percent chance of guessing correctly which infusion was used, even if she cannot tell the difference. If she is given two cups of tea, she still might guess correctly. In fact, if she knew that the two cups of tea were each made with a different infusion, one guess could be completely right (or completely wrong).</p>
</blockquote>
<blockquote>
<p>Similarly, even if she could tell the difference, there is some chance that she might have made a mistake, that one of the cups was not mixed as well or that the infusion was made when the tea was not hot enough. She might be presented with a series of ten cups and correctly identify only nine of them, even if she could tell the difference.</p>
</blockquote>
<blockquote>
<p>In his book, Fisher discusses the various possible outcomes of such an experiment. He describes how to decide how many cups should be presented and in what order and how much to tell the lady about the order of presentations. He works out the probabilities of different outcomes, depending upon whether the lady is or is not correct. Nowhere in this discussion does he indicate that such an experiment was ever run. Nor does he describe the outcome of an actual experiment.</p>
</blockquote>
<p>It’s amazing that there is no actual evidence that such an event actually took place. This problem is a great introduction into inference though and we can proceed by testing to see how likely it is for a person to guess correctly, say, 9 out of 10 times, assuming that person is just guessing. In other words, is the person just lucky or do we have reason to suspect that they can actually detect whether milk was put in first or not?</p>
<p>We need to think about this problem from the standpoint of hypothesis testing. First, we’ll need to identify some important parts of a hypothesis test before we proceed with the analysis.</p>
<div class="learncheck">
<p>
<strong><em>Learning check</em></strong>
</p>
</div>
<p><strong>(LC7.12)</strong> What does “by chance” mean in this context?</p>
<p><strong>(LC7.13)</strong> What is our observed statistic?</p>
<p><strong>(LC7.14)</strong> What is this statistic trying to estimate?</p>
<p><strong>(LC7.15)</strong> How could we test to see whether the person is just guessing or if they have some special talent of identifying milk before tea or vice-versa?</p>
<div class="learncheck">

</div>
<p>Let’s begin with an experiment. I will flip a coin 10 times. Your job is to try to predict the sequence of my 10 flips. Write down 10 H’s and T’s corresponding to your predictions. We could compare your guesses with my actual flips and then we would note how many correct guesses you have.</p>
<p>You may be asking yourself how this models a way to test whether the person was just guessing or not. All we are trying to do is see how likely it is to have 9 matches out of 10 if the person was truly guessing. When we say “truly guessing” we are assuming that we have a 50/50 chance of guessing correctly. This can be modeled using a coin flip and then seeing whether we guessed correctly for each of the coin flips. If we guessed correctly, we can think of that as a “success.”</p>
<p>We often don’t have time to do the physical flipping over and over again and we’d like to be able to do more than just 20 different simulations or so. Luckily, we can use R to simulate this process many times. The <code>mosaic</code> package includes a function called <code>rflip()</code>, which can be used to flip one coin. Well, not exactly. It uses pseudo-random number generation to “flip” a virtual coin. In order for us all to get the same results here, we can set the seed of the pseudo-random number generator. Let’s see an example of this: (Remember to load the <code>mosaic</code> package!)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">set.seed</span>(<span class="dv">2017</span>)
<span class="kw">do</span>(<span class="dv">1</span>) <span class="op">*</span><span class="st"> </span><span class="kw">rflip</span>(<span class="dv">1</span>)</code></pre></div>
<pre><code>  n heads tails prop
1 1     1     0    1</code></pre>
<p>This shows us the proportion of “successes” in one flip of a coin. The <code>do</code> function in the <code>mosaic</code> package will be useful and you can begin to understand what it does with another example.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">do</span>(<span class="dv">13</span>) <span class="op">*</span><span class="st"> </span><span class="kw">rflip</span>(<span class="dv">10</span>)</code></pre></div>
<pre><code>    n heads tails prop
1  10     4     6  0.4
2  10     5     5  0.5
3  10     5     5  0.5
4  10     7     3  0.7
5  10     5     5  0.5
6  10     7     3  0.7
7  10     5     5  0.5
8  10     4     6  0.4
9  10     7     3  0.7
10 10     2     8  0.2
11 10     4     6  0.4
12 10     5     5  0.5
13 10     4     6  0.4</code></pre>
<p>We’ve now done a simulation of what actually happened when you flipped a coin ten times. We have 13 different simulations of flipping a coin 10 times. Note here that <code>heads</code> now corresponds to the number of correct guesses and <code>tails</code> corresponds to the number of incorrect guesses. (This can be tricky to understand at first since we’ve done a switch on what the meaning of “heads” and ``tails&quot; are.)</p>
<p>If you look at the output above for our simulation of 13 student guesses, we can begin to get a sense for what an “expected” sample proportion of successes may be. Around five out of 10 seems to be the most likely value. What does this say about what we actually observed with a success rate of 9/10? To better answer this question, we can simulate 5000 student guesses and then look at the distribution of the simulated sample proportion of successes, also known as the <strong>null distribution</strong>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">simGuesses &lt;-<span class="st"> </span><span class="kw">do</span>(<span class="dv">5000</span>) <span class="op">*</span><span class="st"> </span><span class="kw">rflip</span>(<span class="dv">10</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">simGuesses <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(heads) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">count =</span> <span class="kw">n</span>())</code></pre></div>
<pre><code># A tibble: 11 x 2
   heads count
   &lt;dbl&gt; &lt;int&gt;
 1     0     5
 2     1    53
 3     2   194
 4     3   585
 5     4   983
 6     5  1237
 7     6  1067
 8     7   615
 9     8   207
10     9    47
11    10     7</code></pre>
<p>We can see here that we have created a count of how many of each of the 5000 sets of 10 flips resulted in 0, 1, 2, <span class="math inline">\(\ldots\)</span>, up to 10 heads. Note the use of the <code>group_by</code> and <code>summarize</code> functions from Chapter <a href="#wrangling"><strong>??</strong></a> here.</p>
<p>In addition, we can plot the distribution of these simulated <code>heads</code> using the ideas from Chapter <a href="#viz"><strong>??</strong></a>. <code>heads</code> is a quantitative variable. Think about which type of plot is most appropriate here before reading further.</p>
<p>We already have an idea as to an appropriate plot by the data summarization that we did in the chunk above. We’d like to see how many heads occurred in the 5000 sets of 10 flips. In other words, we’d like to see how frequently 9 or more heads occurred in the 10 flips:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> simGuesses, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> heads)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="dv">1</span>, <span class="dt">color =</span> <span class="st">&quot;white&quot;</span>)</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-15"></span>
<img src="ismaykim_files/figure-html/unnamed-chunk-15-1.png" alt="Histogram of number of heads in simulation - needs tweaking" width="\textwidth" />
<p class="caption">
Figure 2.3: Histogram of number of heads in simulation - needs tweaking
</p>
</div>
<p>This horizontal axis labels are a little confusing here. What does 2.5 or 7.5 heads mean? In <code>simGuesses</code>, <code>heads</code> is a <code>numerical</code> variable. Thus, <code>ggplot</code> is expecting the values to be on a continuous scale. We can switch the scale to be discrete by invoking the <code>factor</code> function and using <code>geom_bar</code> instead of <code>geom_histogram</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> simGuesses, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">factor</span>(heads))) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_bar</span>()</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-16"></span>
<img src="ismaykim_files/figure-html/unnamed-chunk-16-1.png" alt="Barplot of number of heads in simulation" width="\textwidth" />
<p class="caption">
Figure 2.4: Barplot of number of heads in simulation
</p>
</div>
<p>You’ll frequently need to make this conversion to <code>factor</code> when making a barplot with quantitative variables. Remember from “Getting Used to R, RStudio, and R Markdown” <span class="citation">(Ismay 2016)</span>, that a <code>factor</code> variable is useful when there is a natural ordering to the variable and it only takes on discrete values and not fractional values like 2.5. Our <code>heads</code> variable has a natural ordering: 0, 1, 2, <span class="math inline">\(\ldots\)</span>, 10.</p>
<p>Again, note that the shape of these number of heads follows what appears to be a normal distribution. We’ll see in a related example that if appropriate conditions/assumptions are met with the data that we can expect to see a normal distribution result. When these conditions aren’t met, the simulation methodology we’ve presented here still works well whereas the traditional normal-based methods start to fall apart.</p>
<p>We will delve further into hypothesis testing in the next few chapters. This null distribution in combination with the <strong>sampling distribution</strong> concept covered earlier will be of utmost importance going forward.</p>
<hr />
</div>
<div id="review-of-mosaic-simulation-functions" class="section level2">
<h2><span class="header-section-number">2.4</span> Review of <code>mosaic</code> simulation functions</h2>
<p>In this chapter, we’ve discussed three functions in the <code>mosaic</code> package useful in understanding the stepping stones to statistical inference: <code>do</code>, <code>rflip</code>, and <code>resample</code>. We will also work with the <code>shuffle</code> function in later chapters and we summarize it here for your reference later.</p>
<ul>
<li><p><code>do</code>: Its main use is in replicating a process many times. It has one argument <code>n</code> which specifies how many times to replicate the process. It then uses <code>*</code>, which can be read as “times”, and whatever follows immediately after it as the process.</p></li>
<li><p><code>rflip</code>: This is used to simulate the flipping of a coin many times. By default, it flips a fair coin one time giving an equal chance to heads and tails. It is frequently used with <code>do() *</code> to simulate many coin flips in multiple sets.</p></li>
<li><p><code>resample</code>: This is used to sample from a larger dataset with or without replacement. When we are thinking about the concept of random sampling, we sample without replacement. We can also sample with replacement corresponding to the values being replaced into the pool to draw from with the possibility that they are drawn again in the resample. This will be of great importance when we discuss <strong>bootstrapping</strong> with confidence intervals.</p></li>
<li><p><code>shuffle</code>: Its main purpose is to permute the values of one variable across the values of another variable. This acts in much the same way as shuffling a deck of cards and then presenting the shuffled deck to two (or more) players.</p></li>
</ul>
<div class="learncheck">
<p>
<strong><em>Learning check</em></strong>
</p>
</div>
<p><strong>(LC7.16)</strong> Recreate <code>rflip</code> using only the <code>resample</code> function and specifying the appropriate arguments.</p>
<p><strong>(LC7.17)</strong> Recreate <code>shuffle</code> using only the <code>resample</code> function and specifying the appropriate arguments.</p>
<div class="learncheck">

</div>
<hr />
</div>
<div id="conclusion" class="section level2">
<h2><span class="header-section-number">2.5</span> Conclusion</h2>
<div id="whats-to-come" class="section level3">
<h3><span class="header-section-number">2.5.1</span> What’s to come?</h3>
<p>This chapter has served as an introduction into inferential techniques that will be discussed in greater detail in Chapter <a href="4-hypo.html#hypo">4</a> for hypothesis testing and in Chapter <a href="3-ci.html#ci">3</a> for confidence intervals. In these chapters, we will see how we can use a related concept of <strong>resampling</strong> when working with the distributions of two groups. All of these concepts will be further reinforced in Chapter <a href="#regression"><strong>??</strong></a> as well.</p>
</div>
<div id="script-of-r-code" class="section level3">
<h3><span class="header-section-number">2.5.2</span> Script of R code</h3>
<p>An R script file of all R code used in this chapter is available <a href="http://moderndive.com/scripts/07-sim.R">here</a>.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="3-ci.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ismayc/moderndiver-book/edit/master/07-sampling.Rmd",
"text": "Edit"
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
