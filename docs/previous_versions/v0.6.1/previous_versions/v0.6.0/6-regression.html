<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Basic Regression | Statistical Inference via Data Science</title>
  <meta name="description" content="An open-source and fully-reproducible electronic textbook for teaching statistical inference using tidyverse data science tools." />
  <meta name="generator" content="bookdown 0.11 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Basic Regression | Statistical Inference via Data Science" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://moderndive.com/" />
  <meta property="og:image" content="https://moderndive.com/images/logos/book_cover.png" />
  <meta property="og:description" content="An open-source and fully-reproducible electronic textbook for teaching statistical inference using tidyverse data science tools." />
  <meta name="github-repo" content="moderndive/moderndive_book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Basic Regression | Statistical Inference via Data Science" />
  
  <meta name="twitter:description" content="An open-source and fully-reproducible electronic textbook for teaching statistical inference using tidyverse data science tools." />
  <meta name="twitter:image" content="https://moderndive.com/images/logos/book_cover.png" />

<meta name="author" content="Chester Ismay and Albert Y. Kim" />


<meta name="date" content="2019-08-07" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="images/logos/favicons/apple-touch-icon.png" />
  <link rel="shortcut icon" href="images/logos/favicons/favicon.ico" type="image/x-icon" />
<link rel="prev" href="5-tidy.html">
<link rel="next" href="7-multiple-regression.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<link href="libs/dygraphs-1.1.1/dygraph.css" rel="stylesheet" />
<script src="libs/dygraphs-1.1.1/dygraph-combined.js"></script>
<script src="libs/dygraphs-1.1.1/shapes.js"></script>
<script src="libs/moment-2.8.4/moment.js"></script>
<script src="libs/moment-timezone-0.2.5/moment-timezone-with-data.js"></script>
<script src="libs/moment-fquarter-1.0.0/moment-fquarter.min.js"></script>
<script src="libs/dygraphs-binding-1.1.1.6/dygraphs.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-89938436-1', 'auto');
  ga('send', 'pageview');

</script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#sec:intro-for-students"><i class="fa fa-check"></i><b>1.1</b> Introduction for students</a><ul>
<li class="chapter" data-level="1.1.1" data-path="index.html"><a href="index.html#subsec:learning-goals"><i class="fa fa-check"></i><b>1.1.1</b> What you will learn from this book</a></li>
<li class="chapter" data-level="1.1.2" data-path="index.html"><a href="index.html#subsec:pipeline"><i class="fa fa-check"></i><b>1.1.2</b> Data/science pipeline</a></li>
<li class="chapter" data-level="1.1.3" data-path="index.html"><a href="index.html#subsec:reproducible"><i class="fa fa-check"></i><b>1.1.3</b> Reproducible research</a></li>
<li class="chapter" data-level="1.1.4" data-path="index.html"><a href="index.html#final-note-for-students"><i class="fa fa-check"></i><b>1.1.4</b> Final note for students</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#sec:intro-instructors"><i class="fa fa-check"></i><b>1.2</b> Introduction for instructors</a><ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="index.html#who-is-this-book-for"><i class="fa fa-check"></i><b>1.2.1</b> Who is this book for?</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#sec:connect-contribute"><i class="fa fa-check"></i><b>1.3</b> Connect and contribute</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#sec:about-book"><i class="fa fa-check"></i><b>1.4</b> About this book</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#sec:about-authors"><i class="fa fa-check"></i><b>1.5</b> About the authors</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="2-getting-started.html"><a href="2-getting-started.html"><i class="fa fa-check"></i><b>2</b> Getting Started with Data in R</a><ul>
<li class="chapter" data-level="2.1" data-path="2-getting-started.html"><a href="2-getting-started.html#r-rstudio"><i class="fa fa-check"></i><b>2.1</b> What are R and RStudio?</a><ul>
<li class="chapter" data-level="2.1.1" data-path="2-getting-started.html"><a href="2-getting-started.html#installing-r-and-rstudio"><i class="fa fa-check"></i><b>2.1.1</b> Installing R and RStudio</a></li>
<li class="chapter" data-level="2.1.2" data-path="2-getting-started.html"><a href="2-getting-started.html#using-r-via-rstudio"><i class="fa fa-check"></i><b>2.1.2</b> Using R via RStudio</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="2-getting-started.html"><a href="2-getting-started.html#code"><i class="fa fa-check"></i><b>2.2</b> How do I code in R?</a><ul>
<li class="chapter" data-level="2.2.1" data-path="2-getting-started.html"><a href="2-getting-started.html#programming-concepts"><i class="fa fa-check"></i><b>2.2.1</b> Basic programming concepts and terminology</a></li>
<li class="chapter" data-level="2.2.2" data-path="2-getting-started.html"><a href="2-getting-started.html#errors-warnings-and-messages"><i class="fa fa-check"></i><b>2.2.2</b> Errors, warnings, and messages</a></li>
<li class="chapter" data-level="2.2.3" data-path="2-getting-started.html"><a href="2-getting-started.html#tips-on-learning-to-code"><i class="fa fa-check"></i><b>2.2.3</b> Tips on learning to code</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="2-getting-started.html"><a href="2-getting-started.html#packages"><i class="fa fa-check"></i><b>2.3</b> What are R packages?</a><ul>
<li class="chapter" data-level="2.3.1" data-path="2-getting-started.html"><a href="2-getting-started.html#package-installation"><i class="fa fa-check"></i><b>2.3.1</b> Package installation</a></li>
<li class="chapter" data-level="2.3.2" data-path="2-getting-started.html"><a href="2-getting-started.html#package-loading"><i class="fa fa-check"></i><b>2.3.2</b> Package loading</a></li>
<li class="chapter" data-level="2.3.3" data-path="2-getting-started.html"><a href="2-getting-started.html#package-use"><i class="fa fa-check"></i><b>2.3.3</b> Package use</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="2-getting-started.html"><a href="2-getting-started.html#nycflights13"><i class="fa fa-check"></i><b>2.4</b> Explore your first datasets</a><ul>
<li class="chapter" data-level="2.4.1" data-path="2-getting-started.html"><a href="2-getting-started.html#nycflights13-package"><i class="fa fa-check"></i><b>2.4.1</b> <code>nycflights13</code> package</a></li>
<li class="chapter" data-level="2.4.2" data-path="2-getting-started.html"><a href="2-getting-started.html#flights-data-frame"><i class="fa fa-check"></i><b>2.4.2</b> <code>flights</code> data frame</a></li>
<li class="chapter" data-level="2.4.3" data-path="2-getting-started.html"><a href="2-getting-started.html#exploredataframes"><i class="fa fa-check"></i><b>2.4.3</b> Exploring data frames</a></li>
<li class="chapter" data-level="2.4.4" data-path="2-getting-started.html"><a href="2-getting-started.html#identification-vs-measurement-variables"><i class="fa fa-check"></i><b>2.4.4</b> Identification &amp; measurement variables</a></li>
<li class="chapter" data-level="2.4.5" data-path="2-getting-started.html"><a href="2-getting-started.html#help-files"><i class="fa fa-check"></i><b>2.4.5</b> Help files</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="2-getting-started.html"><a href="2-getting-started.html#conclusion"><i class="fa fa-check"></i><b>2.5</b> Conclusion</a><ul>
<li class="chapter" data-level="2.5.1" data-path="2-getting-started.html"><a href="2-getting-started.html#additional-resources"><i class="fa fa-check"></i><b>2.5.1</b> Additional resources</a></li>
<li class="chapter" data-level="2.5.2" data-path="2-getting-started.html"><a href="2-getting-started.html#whats-to-come"><i class="fa fa-check"></i><b>2.5.2</b> What’s to come?</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>I Data Science via the tidyverse</b></span></li>
<li class="chapter" data-level="3" data-path="3-viz.html"><a href="3-viz.html"><i class="fa fa-check"></i><b>3</b> Data Visualization</a><ul>
<li class="chapter" data-level="" data-path="3-viz.html"><a href="3-viz.html#needed-packages"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="3.1" data-path="3-viz.html"><a href="3-viz.html#grammarofgraphics"><i class="fa fa-check"></i><b>3.1</b> The Grammar of Graphics</a><ul>
<li class="chapter" data-level="3.1.1" data-path="3-viz.html"><a href="3-viz.html#components-of-the-grammar"><i class="fa fa-check"></i><b>3.1.1</b> Components of the Grammar</a></li>
<li class="chapter" data-level="3.1.2" data-path="3-viz.html"><a href="3-viz.html#gapminder"><i class="fa fa-check"></i><b>3.1.2</b> Gapminder data</a></li>
<li class="chapter" data-level="3.1.3" data-path="3-viz.html"><a href="3-viz.html#other-components"><i class="fa fa-check"></i><b>3.1.3</b> Other components</a></li>
<li class="chapter" data-level="3.1.4" data-path="3-viz.html"><a href="3-viz.html#ggplot2-package"><i class="fa fa-check"></i><b>3.1.4</b> ggplot2 package</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="3-viz.html"><a href="3-viz.html#FiveNG"><i class="fa fa-check"></i><b>3.2</b> Five Named Graphs - The 5NG</a></li>
<li class="chapter" data-level="3.3" data-path="3-viz.html"><a href="3-viz.html#scatterplots"><i class="fa fa-check"></i><b>3.3</b> 5NG#1: Scatterplots</a><ul>
<li class="chapter" data-level="3.3.1" data-path="3-viz.html"><a href="3-viz.html#geompoint"><i class="fa fa-check"></i><b>3.3.1</b> Scatterplots via geom_point</a></li>
<li class="chapter" data-level="3.3.2" data-path="3-viz.html"><a href="3-viz.html#overplotting"><i class="fa fa-check"></i><b>3.3.2</b> Over-plotting</a></li>
<li class="chapter" data-level="3.3.3" data-path="3-viz.html"><a href="3-viz.html#summary"><i class="fa fa-check"></i><b>3.3.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="3-viz.html"><a href="3-viz.html#linegraphs"><i class="fa fa-check"></i><b>3.4</b> 5NG#2: Linegraphs</a><ul>
<li class="chapter" data-level="3.4.1" data-path="3-viz.html"><a href="3-viz.html#geomline"><i class="fa fa-check"></i><b>3.4.1</b> Linegraphs via geom_line</a></li>
<li class="chapter" data-level="3.4.2" data-path="3-viz.html"><a href="3-viz.html#summary-1"><i class="fa fa-check"></i><b>3.4.2</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="3-viz.html"><a href="3-viz.html#histograms"><i class="fa fa-check"></i><b>3.5</b> 5NG#3: Histograms</a><ul>
<li class="chapter" data-level="3.5.1" data-path="3-viz.html"><a href="3-viz.html#geomhistogram"><i class="fa fa-check"></i><b>3.5.1</b> Histograms via geom_histogram</a></li>
<li class="chapter" data-level="3.5.2" data-path="3-viz.html"><a href="3-viz.html#adjustbins"><i class="fa fa-check"></i><b>3.5.2</b> Adjusting the bins</a></li>
<li class="chapter" data-level="3.5.3" data-path="3-viz.html"><a href="3-viz.html#summary-2"><i class="fa fa-check"></i><b>3.5.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="3-viz.html"><a href="3-viz.html#facets"><i class="fa fa-check"></i><b>3.6</b> Facets</a></li>
<li class="chapter" data-level="3.7" data-path="3-viz.html"><a href="3-viz.html#boxplots"><i class="fa fa-check"></i><b>3.7</b> 5NG#4: Boxplots</a><ul>
<li class="chapter" data-level="3.7.1" data-path="3-viz.html"><a href="3-viz.html#geomboxplot"><i class="fa fa-check"></i><b>3.7.1</b> Boxplots via geom_boxplot</a></li>
<li class="chapter" data-level="3.7.2" data-path="3-viz.html"><a href="3-viz.html#summary-3"><i class="fa fa-check"></i><b>3.7.2</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="3-viz.html"><a href="3-viz.html#geombar"><i class="fa fa-check"></i><b>3.8</b> 5NG#5: Barplots</a><ul>
<li class="chapter" data-level="3.8.1" data-path="3-viz.html"><a href="3-viz.html#barplots-via-geom_bar-or-geom_col"><i class="fa fa-check"></i><b>3.8.1</b> Barplots via geom_bar or geom_col</a></li>
<li class="chapter" data-level="3.8.2" data-path="3-viz.html"><a href="3-viz.html#must-avoid-pie-charts"><i class="fa fa-check"></i><b>3.8.2</b> Must avoid pie charts!</a></li>
<li class="chapter" data-level="3.8.3" data-path="3-viz.html"><a href="3-viz.html#two-categ-barplot"><i class="fa fa-check"></i><b>3.8.3</b> Two categorical variables</a></li>
<li class="chapter" data-level="3.8.4" data-path="3-viz.html"><a href="3-viz.html#summary-4"><i class="fa fa-check"></i><b>3.8.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="3-viz.html"><a href="3-viz.html#conclusion-1"><i class="fa fa-check"></i><b>3.9</b> Conclusion</a><ul>
<li class="chapter" data-level="3.9.1" data-path="3-viz.html"><a href="3-viz.html#summary-table"><i class="fa fa-check"></i><b>3.9.1</b> Summary table</a></li>
<li class="chapter" data-level="3.9.2" data-path="3-viz.html"><a href="3-viz.html#argument-specification"><i class="fa fa-check"></i><b>3.9.2</b> Argument specification</a></li>
<li class="chapter" data-level="3.9.3" data-path="3-viz.html"><a href="3-viz.html#additional-resources-1"><i class="fa fa-check"></i><b>3.9.3</b> Additional resources</a></li>
<li class="chapter" data-level="3.9.4" data-path="3-viz.html"><a href="3-viz.html#whats-to-come-3"><i class="fa fa-check"></i><b>3.9.4</b> What’s to come</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="4-wrangling.html"><a href="4-wrangling.html"><i class="fa fa-check"></i><b>4</b> Data Wrangling</a><ul>
<li class="chapter" data-level="" data-path="4-wrangling.html"><a href="4-wrangling.html#needed-packages-1"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="4.1" data-path="4-wrangling.html"><a href="4-wrangling.html#piping"><i class="fa fa-check"></i><b>4.1</b> The pipe operator: <code>%&gt;%</code></a></li>
<li class="chapter" data-level="4.2" data-path="4-wrangling.html"><a href="4-wrangling.html#filter"><i class="fa fa-check"></i><b>4.2</b> <code>filter</code> rows</a></li>
<li class="chapter" data-level="4.3" data-path="4-wrangling.html"><a href="4-wrangling.html#summarize"><i class="fa fa-check"></i><b>4.3</b> <code>summarize</code> variables</a></li>
<li class="chapter" data-level="4.4" data-path="4-wrangling.html"><a href="4-wrangling.html#groupby"><i class="fa fa-check"></i><b>4.4</b> <code>group_by</code> rows</a><ul>
<li class="chapter" data-level="4.4.1" data-path="4-wrangling.html"><a href="4-wrangling.html#grouping-by-more-than-one-variable"><i class="fa fa-check"></i><b>4.4.1</b> Grouping by more than one variable</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="4-wrangling.html"><a href="4-wrangling.html#mutate"><i class="fa fa-check"></i><b>4.5</b> <code>mutate</code> existing variables</a></li>
<li class="chapter" data-level="4.6" data-path="4-wrangling.html"><a href="4-wrangling.html#arrange"><i class="fa fa-check"></i><b>4.6</b> <code>arrange</code> and sort rows</a></li>
<li class="chapter" data-level="4.7" data-path="4-wrangling.html"><a href="4-wrangling.html#joins"><i class="fa fa-check"></i><b>4.7</b> <code>join</code> data frames</a><ul>
<li class="chapter" data-level="4.7.1" data-path="4-wrangling.html"><a href="4-wrangling.html#matching-key-variable-names"><i class="fa fa-check"></i><b>4.7.1</b> Matching “key” variable names</a></li>
<li class="chapter" data-level="4.7.2" data-path="4-wrangling.html"><a href="4-wrangling.html#diff-key"><i class="fa fa-check"></i><b>4.7.2</b> Different “key” variable names</a></li>
<li class="chapter" data-level="4.7.3" data-path="4-wrangling.html"><a href="4-wrangling.html#multiple-key-variables"><i class="fa fa-check"></i><b>4.7.3</b> Multiple “key” variables</a></li>
<li class="chapter" data-level="4.7.4" data-path="4-wrangling.html"><a href="4-wrangling.html#normal-forms"><i class="fa fa-check"></i><b>4.7.4</b> Normal forms</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="4-wrangling.html"><a href="4-wrangling.html#other-verbs"><i class="fa fa-check"></i><b>4.8</b> Other verbs</a><ul>
<li class="chapter" data-level="4.8.1" data-path="4-wrangling.html"><a href="4-wrangling.html#select"><i class="fa fa-check"></i><b>4.8.1</b> <code>select</code> variables</a></li>
<li class="chapter" data-level="4.8.2" data-path="4-wrangling.html"><a href="4-wrangling.html#rename"><i class="fa fa-check"></i><b>4.8.2</b> <code>rename</code> variables</a></li>
<li class="chapter" data-level="4.8.3" data-path="4-wrangling.html"><a href="4-wrangling.html#top_n-values-of-a-variable"><i class="fa fa-check"></i><b>4.8.3</b> <code>top_n</code> values of a variable</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="4-wrangling.html"><a href="4-wrangling.html#conclusion-2"><i class="fa fa-check"></i><b>4.9</b> Conclusion</a><ul>
<li class="chapter" data-level="4.9.1" data-path="4-wrangling.html"><a href="4-wrangling.html#summary-table-1"><i class="fa fa-check"></i><b>4.9.1</b> Summary table</a></li>
<li class="chapter" data-level="4.9.2" data-path="4-wrangling.html"><a href="4-wrangling.html#additional-resources-2"><i class="fa fa-check"></i><b>4.9.2</b> Additional resources</a></li>
<li class="chapter" data-level="4.9.3" data-path="4-wrangling.html"><a href="4-wrangling.html#whats-to-come-1"><i class="fa fa-check"></i><b>4.9.3</b> What’s to come?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="5-tidy.html"><a href="5-tidy.html"><i class="fa fa-check"></i><b>5</b> Data Importing &amp; “Tidy” Data</a><ul>
<li class="chapter" data-level="" data-path="5-tidy.html"><a href="5-tidy.html#needed-packages-2"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="5.1" data-path="5-tidy.html"><a href="5-tidy.html#csv"><i class="fa fa-check"></i><b>5.1</b> Importing data</a><ul>
<li class="chapter" data-level="5.1.1" data-path="5-tidy.html"><a href="5-tidy.html#using-the-console"><i class="fa fa-check"></i><b>5.1.1</b> Using the console</a></li>
<li class="chapter" data-level="5.1.2" data-path="5-tidy.html"><a href="5-tidy.html#using-rstudios-interface"><i class="fa fa-check"></i><b>5.1.2</b> Using RStudio’s interface</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="5-tidy.html"><a href="5-tidy.html#tidy-data-ex"><i class="fa fa-check"></i><b>5.2</b> Tidy data</a><ul>
<li class="chapter" data-level="5.2.1" data-path="5-tidy.html"><a href="5-tidy.html#definition-of-tidy-data"><i class="fa fa-check"></i><b>5.2.1</b> Definition of “tidy” data</a></li>
<li class="chapter" data-level="5.2.2" data-path="5-tidy.html"><a href="5-tidy.html#converting-to-tidy-data"><i class="fa fa-check"></i><b>5.2.2</b> Converting to “tidy” data</a></li>
<li class="chapter" data-level="5.2.3" data-path="5-tidy.html"><a href="5-tidy.html#nycflights13-package-1"><i class="fa fa-check"></i><b>5.2.3</b> <code>nycflights13</code> package</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="5-tidy.html"><a href="5-tidy.html#case-study-tidy"><i class="fa fa-check"></i><b>5.3</b> Case study: Democracy in Guatemala</a></li>
<li class="chapter" data-level="5.4" data-path="5-tidy.html"><a href="5-tidy.html#conclusion-3"><i class="fa fa-check"></i><b>5.4</b> Conclusion</a><ul>
<li class="chapter" data-level="5.4.1" data-path="5-tidy.html"><a href="5-tidy.html#tidyverse-package"><i class="fa fa-check"></i><b>5.4.1</b> <code>tidyverse</code> package</a></li>
<li class="chapter" data-level="5.4.2" data-path="5-tidy.html"><a href="5-tidy.html#additional-resources-3"><i class="fa fa-check"></i><b>5.4.2</b> Additional resources</a></li>
<li class="chapter" data-level="5.4.3" data-path="5-tidy.html"><a href="5-tidy.html#whats-to-come-2"><i class="fa fa-check"></i><b>5.4.3</b> What’s to come?</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Data Modeling via moderndive</b></span></li>
<li class="chapter" data-level="6" data-path="6-regression.html"><a href="6-regression.html"><i class="fa fa-check"></i><b>6</b> Basic Regression</a><ul>
<li class="chapter" data-level="" data-path="6-regression.html"><a href="6-regression.html#needed-packages-3"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="6.1" data-path="6-regression.html"><a href="6-regression.html#model1"><i class="fa fa-check"></i><b>6.1</b> One numerical explanatory variable</a><ul>
<li class="chapter" data-level="6.1.1" data-path="6-regression.html"><a href="6-regression.html#model1EDA"><i class="fa fa-check"></i><b>6.1.1</b> Exploratory data analysis</a></li>
<li class="chapter" data-level="6.1.2" data-path="6-regression.html"><a href="6-regression.html#model1table"><i class="fa fa-check"></i><b>6.1.2</b> Simple linear regression</a></li>
<li class="chapter" data-level="6.1.3" data-path="6-regression.html"><a href="6-regression.html#model1points"><i class="fa fa-check"></i><b>6.1.3</b> Observed/fitted values and residuals</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="6-regression.html"><a href="6-regression.html#model2"><i class="fa fa-check"></i><b>6.2</b> One categorical explanatory variable</a><ul>
<li class="chapter" data-level="6.2.1" data-path="6-regression.html"><a href="6-regression.html#model2EDA"><i class="fa fa-check"></i><b>6.2.1</b> Exploratory data analysis</a></li>
<li class="chapter" data-level="6.2.2" data-path="6-regression.html"><a href="6-regression.html#model2table"><i class="fa fa-check"></i><b>6.2.2</b> Linear regression</a></li>
<li class="chapter" data-level="6.2.3" data-path="6-regression.html"><a href="6-regression.html#model2points"><i class="fa fa-check"></i><b>6.2.3</b> Observed/fitted values and residuals</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="6-regression.html"><a href="6-regression.html#related-topics"><i class="fa fa-check"></i><b>6.3</b> Related topics</a><ul>
<li class="chapter" data-level="6.3.1" data-path="6-regression.html"><a href="6-regression.html#correlation-is-not-causation"><i class="fa fa-check"></i><b>6.3.1</b> Correlation is not necessarily causation</a></li>
<li class="chapter" data-level="6.3.2" data-path="6-regression.html"><a href="6-regression.html#leastsquares"><i class="fa fa-check"></i><b>6.3.2</b> Best fitting line</a></li>
<li class="chapter" data-level="6.3.3" data-path="6-regression.html"><a href="6-regression.html#underthehood"><i class="fa fa-check"></i><b>6.3.3</b> <code>get_regression_x()</code> functions</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="6-regression.html"><a href="6-regression.html#conclusion-4"><i class="fa fa-check"></i><b>6.4</b> Conclusion</a><ul>
<li class="chapter" data-level="6.4.1" data-path="6-regression.html"><a href="6-regression.html#additional-resources-basic-regression"><i class="fa fa-check"></i><b>6.4.1</b> Additional resources</a></li>
<li class="chapter" data-level="6.4.2" data-path="6-regression.html"><a href="6-regression.html#whats-to-come-4"><i class="fa fa-check"></i><b>6.4.2</b> What’s to come?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html"><i class="fa fa-check"></i><b>7</b> Multiple Regression</a><ul>
<li class="chapter" data-level="" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#needed-packages-4"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="7.1" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#model4"><i class="fa fa-check"></i><b>7.1</b> One numerical &amp; one categorical explanatory variable</a><ul>
<li class="chapter" data-level="7.1.1" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#model4EDA"><i class="fa fa-check"></i><b>7.1.1</b> Exploratory data analysis</a></li>
<li class="chapter" data-level="7.1.2" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#model4interactiontable"><i class="fa fa-check"></i><b>7.1.2</b> Interaction model</a></li>
<li class="chapter" data-level="7.1.3" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#model4table"><i class="fa fa-check"></i><b>7.1.3</b> Parallel slopes model</a></li>
<li class="chapter" data-level="7.1.4" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#model4points"><i class="fa fa-check"></i><b>7.1.4</b> Observed/fitted values and residuals</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#model3"><i class="fa fa-check"></i><b>7.2</b> Two numerical explanatory variables</a><ul>
<li class="chapter" data-level="7.2.1" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#model3EDA"><i class="fa fa-check"></i><b>7.2.1</b> Exploratory data analysis</a></li>
<li class="chapter" data-level="7.2.2" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#model3table"><i class="fa fa-check"></i><b>7.2.2</b> Regression plane</a></li>
<li class="chapter" data-level="7.2.3" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#model3points"><i class="fa fa-check"></i><b>7.2.3</b> Observed/fitted values and residuals</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#related-topics-1"><i class="fa fa-check"></i><b>7.3</b> Related topics</a><ul>
<li class="chapter" data-level="7.3.1" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#model-selection"><i class="fa fa-check"></i><b>7.3.1</b> Model selection</a></li>
<li class="chapter" data-level="7.3.2" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#correlationcoefficient2"><i class="fa fa-check"></i><b>7.3.2</b> Correlation coefficient</a></li>
<li class="chapter" data-level="7.3.3" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#simpsonsparadox"><i class="fa fa-check"></i><b>7.3.3</b> Simpson’s Paradox</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#conclusion-5"><i class="fa fa-check"></i><b>7.4</b> Conclusion</a><ul>
<li class="chapter" data-level="7.4.1" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#additional-resources-4"><i class="fa fa-check"></i><b>7.4.1</b> Additional resources</a></li>
<li class="chapter" data-level="7.4.2" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#whats-to-come-5"><i class="fa fa-check"></i><b>7.4.2</b> What’s to come?</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Statistical Inference via infer</b></span></li>
<li class="chapter" data-level="8" data-path="8-sampling.html"><a href="8-sampling.html"><i class="fa fa-check"></i><b>8</b> Sampling</a><ul>
<li class="chapter" data-level="" data-path="8-sampling.html"><a href="8-sampling.html#needed-packages-5"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="8.1" data-path="8-sampling.html"><a href="8-sampling.html#sampling-activity"><i class="fa fa-check"></i><b>8.1</b> Sampling bowl activity</a><ul>
<li class="chapter" data-level="8.1.1" data-path="8-sampling.html"><a href="8-sampling.html#what-proportion-of-this-bowls-balls-are-red"><i class="fa fa-check"></i><b>8.1.1</b> What proportion of this bowl’s balls are red?</a></li>
<li class="chapter" data-level="8.1.2" data-path="8-sampling.html"><a href="8-sampling.html#using-the-shovel-once"><i class="fa fa-check"></i><b>8.1.2</b> Using the shovel once</a></li>
<li class="chapter" data-level="8.1.3" data-path="8-sampling.html"><a href="8-sampling.html#student-shovels"><i class="fa fa-check"></i><b>8.1.3</b> Using the shovel 33 times</a></li>
<li class="chapter" data-level="8.1.4" data-path="8-sampling.html"><a href="8-sampling.html#what-did-we-just-do"><i class="fa fa-check"></i><b>8.1.4</b> What did we just do?</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="8-sampling.html"><a href="8-sampling.html#sampling-simulation"><i class="fa fa-check"></i><b>8.2</b> Computer simulation of sampling</a><ul>
<li class="chapter" data-level="8.2.1" data-path="8-sampling.html"><a href="8-sampling.html#using-the-virtual-shovel-once"><i class="fa fa-check"></i><b>8.2.1</b> Using the virtual shovel once</a></li>
<li class="chapter" data-level="8.2.2" data-path="8-sampling.html"><a href="8-sampling.html#using-the-virtual-shovel-33-times"><i class="fa fa-check"></i><b>8.2.2</b> Using the virtual shovel 33 times</a></li>
<li class="chapter" data-level="8.2.3" data-path="8-sampling.html"><a href="8-sampling.html#shovel-1000-times"><i class="fa fa-check"></i><b>8.2.3</b> Using the virtual shovel 1000 times</a></li>
<li class="chapter" data-level="8.2.4" data-path="8-sampling.html"><a href="8-sampling.html#different-shovels"><i class="fa fa-check"></i><b>8.2.4</b> Using different shovels</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="8-sampling.html"><a href="8-sampling.html#sampling-framework"><i class="fa fa-check"></i><b>8.3</b> Sampling framework</a><ul>
<li class="chapter" data-level="8.3.1" data-path="8-sampling.html"><a href="8-sampling.html#terminology-and-notation"><i class="fa fa-check"></i><b>8.3.1</b> Terminology &amp; notation</a></li>
<li class="chapter" data-level="8.3.2" data-path="8-sampling.html"><a href="8-sampling.html#sampling-definitions"><i class="fa fa-check"></i><b>8.3.2</b> Statistical definitions</a></li>
<li class="chapter" data-level="8.3.3" data-path="8-sampling.html"><a href="8-sampling.html#moral-of-the-story"><i class="fa fa-check"></i><b>8.3.3</b> The moral of the story</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="8-sampling.html"><a href="8-sampling.html#sampling-case-study"><i class="fa fa-check"></i><b>8.4</b> Case study: Polls</a></li>
<li class="chapter" data-level="8.5" data-path="8-sampling.html"><a href="8-sampling.html#sampling-conclusion"><i class="fa fa-check"></i><b>8.5</b> Conclusion</a><ul>
<li class="chapter" data-level="8.5.1" data-path="8-sampling.html"><a href="8-sampling.html#sampling-conclusion-table"><i class="fa fa-check"></i><b>8.5.1</b> Sampling scenarios</a></li>
<li class="chapter" data-level="8.5.2" data-path="8-sampling.html"><a href="8-sampling.html#sampling-conclusion-central-limit-theorem"><i class="fa fa-check"></i><b>8.5.2</b> Central Limit Theorem</a></li>
<li class="chapter" data-level="8.5.3" data-path="8-sampling.html"><a href="8-sampling.html#normal-distribution"><i class="fa fa-check"></i><b>8.5.3</b> Normal distributions</a></li>
<li class="chapter" data-level="8.5.4" data-path="8-sampling.html"><a href="8-sampling.html#additional-resources-5"><i class="fa fa-check"></i><b>8.5.4</b> Additional resources</a></li>
<li class="chapter" data-level="8.5.5" data-path="8-sampling.html"><a href="8-sampling.html#whats-to-come-6"><i class="fa fa-check"></i><b>8.5.5</b> What’s to come?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html"><i class="fa fa-check"></i><b>9</b> Bootstrapping and Confidence Intervals</a><ul>
<li class="chapter" data-level="" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#needed-packages-6"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="9.1" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#resampling-tactile"><i class="fa fa-check"></i><b>9.1</b> Pennies activity</a><ul>
<li class="chapter" data-level="9.1.1" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#what-is-the-average-year-on-us-pennies-in-2019"><i class="fa fa-check"></i><b>9.1.1</b> What is the average year on US pennies in 2019?</a></li>
<li class="chapter" data-level="9.1.2" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#resampling-once"><i class="fa fa-check"></i><b>9.1.2</b> Resampling once</a></li>
<li class="chapter" data-level="9.1.3" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#student-resamples"><i class="fa fa-check"></i><b>9.1.3</b> Resampling 35 times</a></li>
<li class="chapter" data-level="9.1.4" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#what-did-we-just-do-1"><i class="fa fa-check"></i><b>9.1.4</b> What did we just do?</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#resampling-simulation"><i class="fa fa-check"></i><b>9.2</b> Computer simulation of resampling</a><ul>
<li class="chapter" data-level="9.2.1" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#virtually-resampling-once"><i class="fa fa-check"></i><b>9.2.1</b> Virtually resampling once</a></li>
<li class="chapter" data-level="9.2.2" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#virtually-resampling-35-times"><i class="fa fa-check"></i><b>9.2.2</b> Virtually resampling 35 times</a></li>
<li class="chapter" data-level="9.2.3" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#bootstrap-1000-replicates"><i class="fa fa-check"></i><b>9.2.3</b> Virtually resampling 1000 times</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#ci-build-up"><i class="fa fa-check"></i><b>9.3</b> Understanding confidence intervals</a><ul>
<li class="chapter" data-level="9.3.1" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#percentile-method"><i class="fa fa-check"></i><b>9.3.1</b> Percentile method</a></li>
<li class="chapter" data-level="9.3.2" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#se-method"><i class="fa fa-check"></i><b>9.3.2</b> Standard error method</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#bootstrap-process"><i class="fa fa-check"></i><b>9.4</b> Constructing confidence intervals</a><ul>
<li class="chapter" data-level="9.4.1" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#original-workflow"><i class="fa fa-check"></i><b>9.4.1</b> Original workflow</a></li>
<li class="chapter" data-level="9.4.2" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#infer-workflow"><i class="fa fa-check"></i><b>9.4.2</b> infer package workflow</a></li>
<li class="chapter" data-level="9.4.3" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#percentile-method-infer"><i class="fa fa-check"></i><b>9.4.3</b> Percentile method with infer</a></li>
<li class="chapter" data-level="9.4.4" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#infer-se"><i class="fa fa-check"></i><b>9.4.4</b> Standard error method with infer</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#one-prop-ci"><i class="fa fa-check"></i><b>9.5</b> Interpreting confidence intervals</a><ul>
<li class="chapter" data-level="9.5.1" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#ilyas-yohan"><i class="fa fa-check"></i><b>9.5.1</b> Did the net capture the fish?</a></li>
<li class="chapter" data-level="9.5.2" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#shorthand"><i class="fa fa-check"></i><b>9.5.2</b> Precise &amp; shorthand interpretation</a></li>
<li class="chapter" data-level="9.5.3" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#ci-width"><i class="fa fa-check"></i><b>9.5.3</b> Width of confidence intervals</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#case-study-two-prop-ci"><i class="fa fa-check"></i><b>9.6</b> Case study: Is yawning contagious?</a><ul>
<li class="chapter" data-level="9.6.1" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#mythbusters-study-data"><i class="fa fa-check"></i><b>9.6.1</b> Mythbusters study data</a></li>
<li class="chapter" data-level="9.6.2" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#sampling-scenario"><i class="fa fa-check"></i><b>9.6.2</b> Sampling scenario</a></li>
<li class="chapter" data-level="9.6.3" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#ci-build"><i class="fa fa-check"></i><b>9.6.3</b> Constructing the confidence interval</a></li>
<li class="chapter" data-level="9.6.4" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#interpreting-the-confidence-interval"><i class="fa fa-check"></i><b>9.6.4</b> Interpreting the confidence interval</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#ci-conclusion"><i class="fa fa-check"></i><b>9.7</b> Conclusion</a><ul>
<li class="chapter" data-level="9.7.1" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#bootstrap-vs-sampling"><i class="fa fa-check"></i><b>9.7.1</b> Comparing bootstrap and sampling distributions</a></li>
<li class="chapter" data-level="9.7.2" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#theory-ci"><i class="fa fa-check"></i><b>9.7.2</b> Theory-based confidence intervals</a></li>
<li class="chapter" data-level="9.7.3" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#additional-resources-6"><i class="fa fa-check"></i><b>9.7.3</b> Additional resources</a></li>
<li class="chapter" data-level="9.7.4" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#whats-to-come-7"><i class="fa fa-check"></i><b>9.7.4</b> What’s to come?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html"><i class="fa fa-check"></i><b>10</b> Hypothesis Testing</a><ul>
<li class="chapter" data-level="" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#needed-packages-7"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="10.1" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#ht-activity"><i class="fa fa-check"></i><b>10.1</b> Promotions activity</a><ul>
<li class="chapter" data-level="10.1.1" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#does-gender-affect-promotions-at-bank"><i class="fa fa-check"></i><b>10.1.1</b> Does gender affect promotions at bank?</a></li>
<li class="chapter" data-level="10.1.2" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#shuffling-once"><i class="fa fa-check"></i><b>10.1.2</b> Shuffling once</a></li>
<li class="chapter" data-level="10.1.3" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#shuffling-16-times"><i class="fa fa-check"></i><b>10.1.3</b> Shuffling 16 times</a></li>
<li class="chapter" data-level="10.1.4" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#what-did-we-just-do-2"><i class="fa fa-check"></i><b>10.1.4</b> What did we just do?</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#understanding-ht"><i class="fa fa-check"></i><b>10.2</b> Understanding hypothesis tests</a></li>
<li class="chapter" data-level="10.3" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#ht-infer"><i class="fa fa-check"></i><b>10.3</b> Conducting hypothesis tests</a><ul>
<li class="chapter" data-level="10.3.1" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#infer-workflow-ht"><i class="fa fa-check"></i><b>10.3.1</b> infer package workflow</a></li>
<li class="chapter" data-level="10.3.2" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#comparison-with-confidence-intervals"><i class="fa fa-check"></i><b>10.3.2</b> Comparison with confidence intervals</a></li>
<li class="chapter" data-level="10.3.3" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#only-one-test"><i class="fa fa-check"></i><b>10.3.3</b> “There is only one test”</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#ht-interpretation"><i class="fa fa-check"></i><b>10.4</b> Interpreting hypothesis tests</a><ul>
<li class="chapter" data-level="10.4.1" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#trial"><i class="fa fa-check"></i><b>10.4.1</b> Two possible outcomes</a></li>
<li class="chapter" data-level="10.4.2" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#types-of-errors"><i class="fa fa-check"></i><b>10.4.2</b> Types of errors</a></li>
<li class="chapter" data-level="10.4.3" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#how-do-we-choose-alpha"><i class="fa fa-check"></i><b>10.4.3</b> How do we choose alpha?</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#ht-case-study"><i class="fa fa-check"></i><b>10.5</b> Case study: Are action or romance movies rated higher?</a><ul>
<li class="chapter" data-level="10.5.1" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#imdb-data"><i class="fa fa-check"></i><b>10.5.1</b> IMDb ratings data</a></li>
<li class="chapter" data-level="10.5.2" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#sampling-scenario-1"><i class="fa fa-check"></i><b>10.5.2</b> Sampling scenario</a></li>
<li class="chapter" data-level="10.5.3" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#conducting-the-hypothesis-test"><i class="fa fa-check"></i><b>10.5.3</b> Conducting the hypothesis test</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#conclusion-6"><i class="fa fa-check"></i><b>10.6</b> Conclusion</a><ul>
<li class="chapter" data-level="10.6.1" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#theory-hypo"><i class="fa fa-check"></i><b>10.6.1</b> Theory-based hypothesis tests</a></li>
<li class="chapter" data-level="10.6.2" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#when-inference-is-not-needed"><i class="fa fa-check"></i><b>10.6.2</b> When inference is not needed</a></li>
<li class="chapter" data-level="10.6.3" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#problems-with-p-values"><i class="fa fa-check"></i><b>10.6.3</b> Problems with p-values</a></li>
<li class="chapter" data-level="10.6.4" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#additional-resources-7"><i class="fa fa-check"></i><b>10.6.4</b> Additional resources</a></li>
<li class="chapter" data-level="10.6.5" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#whats-to-come-8"><i class="fa fa-check"></i><b>10.6.5</b> What’s to come</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html"><i class="fa fa-check"></i><b>11</b> Inference for Regression</a><ul>
<li class="chapter" data-level="" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#needed-packages-8"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="11.1" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#regression-refresher"><i class="fa fa-check"></i><b>11.1</b> Regression refresher</a><ul>
<li class="chapter" data-level="11.1.1" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#teaching-evals-analysis"><i class="fa fa-check"></i><b>11.1.1</b> Teaching evals analysis</a></li>
<li class="chapter" data-level="11.1.2" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#sampling-scenario-2"><i class="fa fa-check"></i><b>11.1.2</b> Sampling scenario</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#regression-interp"><i class="fa fa-check"></i><b>11.2</b> Interpreting regression tables</a><ul>
<li class="chapter" data-level="11.2.1" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#regression-se"><i class="fa fa-check"></i><b>11.2.1</b> Standard error</a></li>
<li class="chapter" data-level="11.2.2" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#regression-test-statistic"><i class="fa fa-check"></i><b>11.2.2</b> Test statistic</a></li>
<li class="chapter" data-level="11.2.3" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#p-value"><i class="fa fa-check"></i><b>11.2.3</b> p-value</a></li>
<li class="chapter" data-level="11.2.4" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#confidence-interval"><i class="fa fa-check"></i><b>11.2.4</b> Confidence interval</a></li>
<li class="chapter" data-level="11.2.5" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#regression-table-computation"><i class="fa fa-check"></i><b>11.2.5</b> How does R compute the table?</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#regression-conditions"><i class="fa fa-check"></i><b>11.3</b> Conditions for inference for regression</a><ul>
<li class="chapter" data-level="11.3.1" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#residuals-refresher"><i class="fa fa-check"></i><b>11.3.1</b> Residuals refresher</a></li>
<li class="chapter" data-level="11.3.2" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#linearity-of-relationship"><i class="fa fa-check"></i><b>11.3.2</b> Linearity of relationship</a></li>
<li class="chapter" data-level="11.3.3" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#independence-of-residuals"><i class="fa fa-check"></i><b>11.3.3</b> Independence of residuals</a></li>
<li class="chapter" data-level="11.3.4" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#normality-of-residuals"><i class="fa fa-check"></i><b>11.3.4</b> Normality of residuals</a></li>
<li class="chapter" data-level="11.3.5" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#equality-of-variance"><i class="fa fa-check"></i><b>11.3.5</b> Equality of variance</a></li>
<li class="chapter" data-level="11.3.6" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#what-is-the-conclusion"><i class="fa fa-check"></i><b>11.3.6</b> What’s the conclusion?</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#infer-regression"><i class="fa fa-check"></i><b>11.4</b> Simulation-based inference for regression</a><ul>
<li class="chapter" data-level="11.4.1" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#confidence-interval-for-slope"><i class="fa fa-check"></i><b>11.4.1</b> Confidence interval for slope</a></li>
<li class="chapter" data-level="11.4.2" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#hypothesis-test-for-slope"><i class="fa fa-check"></i><b>11.4.2</b> Hypothesis test for slope</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#conclusion-7"><i class="fa fa-check"></i><b>11.5</b> Conclusion</a><ul>
<li class="chapter" data-level="11.5.1" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#summary-5"><i class="fa fa-check"></i><b>11.5.1</b> Summary</a></li>
<li class="chapter" data-level="11.5.2" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#additional-resources-8"><i class="fa fa-check"></i><b>11.5.2</b> Additional resources</a></li>
<li class="chapter" data-level="11.5.3" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#whats-to-come-9"><i class="fa fa-check"></i><b>11.5.3</b> What’s to come</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Conclusion</b></span></li>
<li class="chapter" data-level="12" data-path="12-thinking-with-data.html"><a href="12-thinking-with-data.html"><i class="fa fa-check"></i><b>12</b> Tell the Story with Data</a><ul>
<li class="chapter" data-level="" data-path="12-thinking-with-data.html"><a href="12-thinking-with-data.html#needed-packages-9"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="12.1" data-path="12-thinking-with-data.html"><a href="12-thinking-with-data.html#seattle-house-prices"><i class="fa fa-check"></i><b>12.1</b> Case study: Seattle house prices</a><ul>
<li class="chapter" data-level="12.1.1" data-path="12-thinking-with-data.html"><a href="12-thinking-with-data.html#house-prices-EDA-I"><i class="fa fa-check"></i><b>12.1.1</b> Exploratory data analysis (EDA)</a></li>
<li class="chapter" data-level="12.1.2" data-path="12-thinking-with-data.html"><a href="12-thinking-with-data.html#log10-transformations"><i class="fa fa-check"></i><b>12.1.2</b> log10 transformations</a></li>
<li class="chapter" data-level="12.1.3" data-path="12-thinking-with-data.html"><a href="12-thinking-with-data.html#eda-part-ii"><i class="fa fa-check"></i><b>12.1.3</b> EDA Part II</a></li>
<li class="chapter" data-level="12.1.4" data-path="12-thinking-with-data.html"><a href="12-thinking-with-data.html#house-prices-regression"><i class="fa fa-check"></i><b>12.1.4</b> Regression modeling</a></li>
<li class="chapter" data-level="12.1.5" data-path="12-thinking-with-data.html"><a href="12-thinking-with-data.html#house-prices-making-predictions"><i class="fa fa-check"></i><b>12.1.5</b> Making predictions</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="12-thinking-with-data.html"><a href="12-thinking-with-data.html#data-journalism"><i class="fa fa-check"></i><b>12.2</b> Case study: Effective data storytelling</a><ul>
<li class="chapter" data-level="12.2.1" data-path="12-thinking-with-data.html"><a href="12-thinking-with-data.html#bechdel-test-for-hollywood-gender-representation"><i class="fa fa-check"></i><b>12.2.1</b> Bechdel test for Hollywood gender representation</a></li>
<li class="chapter" data-level="12.2.2" data-path="12-thinking-with-data.html"><a href="12-thinking-with-data.html#us-births-in-1999"><i class="fa fa-check"></i><b>12.2.2</b> US Births in 1999</a></li>
<li class="chapter" data-level="12.2.3" data-path="12-thinking-with-data.html"><a href="12-thinking-with-data.html#script-of-r-code"><i class="fa fa-check"></i><b>12.2.3</b> Script of R code</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="12-thinking-with-data.html"><a href="12-thinking-with-data.html#concluding-remarks"><i class="fa fa-check"></i>Concluding remarks</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="A-appendixA.html"><a href="A-appendixA.html"><i class="fa fa-check"></i><b>A</b> Statistical Background</a><ul>
<li class="chapter" data-level="A.1" data-path="A-appendixA.html"><a href="A-appendixA.html#basic-statistical-terms"><i class="fa fa-check"></i><b>A.1</b> Basic statistical terms</a><ul>
<li class="chapter" data-level="A.1.1" data-path="A-appendixA.html"><a href="A-appendixA.html#mean"><i class="fa fa-check"></i><b>A.1.1</b> Mean</a></li>
<li class="chapter" data-level="A.1.2" data-path="A-appendixA.html"><a href="A-appendixA.html#median"><i class="fa fa-check"></i><b>A.1.2</b> Median</a></li>
<li class="chapter" data-level="A.1.3" data-path="A-appendixA.html"><a href="A-appendixA.html#standard-deviation"><i class="fa fa-check"></i><b>A.1.3</b> Standard deviation</a></li>
<li class="chapter" data-level="A.1.4" data-path="A-appendixA.html"><a href="A-appendixA.html#five-number-summary"><i class="fa fa-check"></i><b>A.1.4</b> Five-number summary</a></li>
<li class="chapter" data-level="A.1.5" data-path="A-appendixA.html"><a href="A-appendixA.html#distribution"><i class="fa fa-check"></i><b>A.1.5</b> Distribution</a></li>
<li class="chapter" data-level="A.1.6" data-path="A-appendixA.html"><a href="A-appendixA.html#outliers"><i class="fa fa-check"></i><b>A.1.6</b> Outliers</a></li>
</ul></li>
<li class="chapter" data-level="A.2" data-path="A-appendixA.html"><a href="A-appendixA.html#normal-curve"><i class="fa fa-check"></i><b>A.2</b> Normal distribution</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="B-appendixB.html"><a href="B-appendixB.html"><i class="fa fa-check"></i><b>B</b> Inference Examples</a><ul>
<li class="chapter" data-level="" data-path="B-appendixB.html"><a href="B-appendixB.html#needed-packages-10"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="B.1" data-path="B-appendixB.html"><a href="B-appendixB.html#inference-mind-map"><i class="fa fa-check"></i><b>B.1</b> Inference mind map</a></li>
<li class="chapter" data-level="B.2" data-path="B-appendixB.html"><a href="B-appendixB.html#one-mean"><i class="fa fa-check"></i><b>B.2</b> One mean</a><ul>
<li class="chapter" data-level="B.2.1" data-path="B-appendixB.html"><a href="B-appendixB.html#problem-statement"><i class="fa fa-check"></i><b>B.2.1</b> Problem statement</a></li>
<li class="chapter" data-level="B.2.2" data-path="B-appendixB.html"><a href="B-appendixB.html#competing-hypotheses"><i class="fa fa-check"></i><b>B.2.2</b> Competing hypotheses</a></li>
<li class="chapter" data-level="B.2.3" data-path="B-appendixB.html"><a href="B-appendixB.html#exploring-the-sample-data"><i class="fa fa-check"></i><b>B.2.3</b> Exploring the sample data</a></li>
<li class="chapter" data-level="B.2.4" data-path="B-appendixB.html"><a href="B-appendixB.html#non-traditional-methods"><i class="fa fa-check"></i><b>B.2.4</b> Non-traditional methods</a></li>
<li class="chapter" data-level="B.2.5" data-path="B-appendixB.html"><a href="B-appendixB.html#traditional-methods"><i class="fa fa-check"></i><b>B.2.5</b> Traditional methods</a></li>
<li class="chapter" data-level="B.2.6" data-path="B-appendixB.html"><a href="B-appendixB.html#comparing-results"><i class="fa fa-check"></i><b>B.2.6</b> Comparing results</a></li>
</ul></li>
<li class="chapter" data-level="B.3" data-path="B-appendixB.html"><a href="B-appendixB.html#one-proportion"><i class="fa fa-check"></i><b>B.3</b> One proportion</a><ul>
<li class="chapter" data-level="B.3.1" data-path="B-appendixB.html"><a href="B-appendixB.html#problem-statement-1"><i class="fa fa-check"></i><b>B.3.1</b> Problem statement</a></li>
<li class="chapter" data-level="B.3.2" data-path="B-appendixB.html"><a href="B-appendixB.html#competing-hypotheses-1"><i class="fa fa-check"></i><b>B.3.2</b> Competing hypotheses</a></li>
<li class="chapter" data-level="B.3.3" data-path="B-appendixB.html"><a href="B-appendixB.html#exploring-the-sample-data-1"><i class="fa fa-check"></i><b>B.3.3</b> Exploring the sample data</a></li>
<li class="chapter" data-level="B.3.4" data-path="B-appendixB.html"><a href="B-appendixB.html#non-traditional-methods-1"><i class="fa fa-check"></i><b>B.3.4</b> Non-traditional methods</a></li>
<li class="chapter" data-level="B.3.5" data-path="B-appendixB.html"><a href="B-appendixB.html#traditional-methods-1"><i class="fa fa-check"></i><b>B.3.5</b> Traditional methods</a></li>
<li class="chapter" data-level="B.3.6" data-path="B-appendixB.html"><a href="B-appendixB.html#comparing-results-1"><i class="fa fa-check"></i><b>B.3.6</b> Comparing results</a></li>
</ul></li>
<li class="chapter" data-level="B.4" data-path="B-appendixB.html"><a href="B-appendixB.html#two-proportions"><i class="fa fa-check"></i><b>B.4</b> Two proportions</a><ul>
<li class="chapter" data-level="B.4.1" data-path="B-appendixB.html"><a href="B-appendixB.html#problem-statement-2"><i class="fa fa-check"></i><b>B.4.1</b> Problem statement</a></li>
<li class="chapter" data-level="B.4.2" data-path="B-appendixB.html"><a href="B-appendixB.html#competing-hypotheses-2"><i class="fa fa-check"></i><b>B.4.2</b> Competing hypotheses</a></li>
<li class="chapter" data-level="B.4.3" data-path="B-appendixB.html"><a href="B-appendixB.html#exploring-the-sample-data-2"><i class="fa fa-check"></i><b>B.4.3</b> Exploring the sample data</a></li>
<li class="chapter" data-level="B.4.4" data-path="B-appendixB.html"><a href="B-appendixB.html#non-traditional-methods-2"><i class="fa fa-check"></i><b>B.4.4</b> Non-traditional methods</a></li>
<li class="chapter" data-level="B.4.5" data-path="B-appendixB.html"><a href="B-appendixB.html#traditional-methods-2"><i class="fa fa-check"></i><b>B.4.5</b> Traditional methods</a></li>
<li class="chapter" data-level="B.4.6" data-path="B-appendixB.html"><a href="B-appendixB.html#check-conditions-2"><i class="fa fa-check"></i><b>B.4.6</b> Check conditions</a></li>
<li class="chapter" data-level="B.4.7" data-path="B-appendixB.html"><a href="B-appendixB.html#test-statistic-2"><i class="fa fa-check"></i><b>B.4.7</b> Test statistic</a></li>
<li class="chapter" data-level="B.4.8" data-path="B-appendixB.html"><a href="B-appendixB.html#state-conclusion-2"><i class="fa fa-check"></i><b>B.4.8</b> State conclusion</a></li>
<li class="chapter" data-level="B.4.9" data-path="B-appendixB.html"><a href="B-appendixB.html#comparing-results-2"><i class="fa fa-check"></i><b>B.4.9</b> Comparing results</a></li>
</ul></li>
<li class="chapter" data-level="B.5" data-path="B-appendixB.html"><a href="B-appendixB.html#two-means-independent-samples"><i class="fa fa-check"></i><b>B.5</b> Two means (independent samples)</a><ul>
<li class="chapter" data-level="B.5.1" data-path="B-appendixB.html"><a href="B-appendixB.html#problem-statement-3"><i class="fa fa-check"></i><b>B.5.1</b> Problem statement</a></li>
<li class="chapter" data-level="B.5.2" data-path="B-appendixB.html"><a href="B-appendixB.html#competing-hypotheses-3"><i class="fa fa-check"></i><b>B.5.2</b> Competing hypotheses</a></li>
<li class="chapter" data-level="B.5.3" data-path="B-appendixB.html"><a href="B-appendixB.html#exploring-the-sample-data-3"><i class="fa fa-check"></i><b>B.5.3</b> Exploring the sample data</a></li>
<li class="chapter" data-level="B.5.4" data-path="B-appendixB.html"><a href="B-appendixB.html#non-traditional-methods-3"><i class="fa fa-check"></i><b>B.5.4</b> Non-traditional methods</a></li>
<li class="chapter" data-level="B.5.5" data-path="B-appendixB.html"><a href="B-appendixB.html#traditional-methods-3"><i class="fa fa-check"></i><b>B.5.5</b> Traditional methods</a></li>
<li class="chapter" data-level="B.5.6" data-path="B-appendixB.html"><a href="B-appendixB.html#test-statistic-3"><i class="fa fa-check"></i><b>B.5.6</b> Test statistic</a></li>
<li class="chapter" data-level="B.5.7" data-path="B-appendixB.html"><a href="B-appendixB.html#compute-p-value-1"><i class="fa fa-check"></i><b>B.5.7</b> Compute <span class="math inline">\(p\)</span>-value</a></li>
<li class="chapter" data-level="B.5.8" data-path="B-appendixB.html"><a href="B-appendixB.html#state-conclusion-3"><i class="fa fa-check"></i><b>B.5.8</b> State conclusion</a></li>
<li class="chapter" data-level="B.5.9" data-path="B-appendixB.html"><a href="B-appendixB.html#comparing-results-3"><i class="fa fa-check"></i><b>B.5.9</b> Comparing results</a></li>
</ul></li>
<li class="chapter" data-level="B.6" data-path="B-appendixB.html"><a href="B-appendixB.html#two-means-paired-samples"><i class="fa fa-check"></i><b>B.6</b> Two means (paired samples)</a><ul>
<li class="chapter" data-level="B.6.1" data-path="B-appendixB.html"><a href="B-appendixB.html#competing-hypotheses-4"><i class="fa fa-check"></i><b>B.6.1</b> Competing hypotheses</a></li>
<li class="chapter" data-level="B.6.2" data-path="B-appendixB.html"><a href="B-appendixB.html#exploring-the-sample-data-4"><i class="fa fa-check"></i><b>B.6.2</b> Exploring the sample data</a></li>
<li class="chapter" data-level="B.6.3" data-path="B-appendixB.html"><a href="B-appendixB.html#non-traditional-methods-4"><i class="fa fa-check"></i><b>B.6.3</b> Non-traditional methods</a></li>
<li class="chapter" data-level="B.6.4" data-path="B-appendixB.html"><a href="B-appendixB.html#traditional-methods-4"><i class="fa fa-check"></i><b>B.6.4</b> Traditional methods</a></li>
<li class="chapter" data-level="B.6.5" data-path="B-appendixB.html"><a href="B-appendixB.html#comparing-results-4"><i class="fa fa-check"></i><b>B.6.5</b> Comparing results</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="C" data-path="C-appendixC.html"><a href="C-appendixC.html"><i class="fa fa-check"></i><b>C</b> Reach for the Stars</a><ul>
<li class="chapter" data-level="" data-path="C-appendixC.html"><a href="C-appendixC.html#needed-packages-11"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="C.1" data-path="C-appendixC.html"><a href="C-appendixC.html#sorted-barplots"><i class="fa fa-check"></i><b>C.1</b> Sorted barplots</a></li>
<li class="chapter" data-level="C.2" data-path="C-appendixC.html"><a href="C-appendixC.html#interactive-graphics"><i class="fa fa-check"></i><b>C.2</b> Interactive graphics</a><ul>
<li class="chapter" data-level="C.2.1" data-path="C-appendixC.html"><a href="C-appendixC.html#interactive-linegraphs"><i class="fa fa-check"></i><b>C.2.1</b> Interactive linegraphs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="D" data-path="D-appendixD.html"><a href="D-appendixD.html"><i class="fa fa-check"></i><b>D</b> Learning Check Solutions</a><ul>
<li class="chapter" data-level="D.1" data-path="D-appendixD.html"><a href="D-appendixD.html#chapter-2-solutions"><i class="fa fa-check"></i><b>D.1</b> Chapter 2 Solutions</a></li>
<li class="chapter" data-level="D.2" data-path="D-appendixD.html"><a href="D-appendixD.html#chapter-3-solutions"><i class="fa fa-check"></i><b>D.2</b> Chapter 3 Solutions</a></li>
<li class="chapter" data-level="D.3" data-path="D-appendixD.html"><a href="D-appendixD.html#chapter-4-solutions"><i class="fa fa-check"></i><b>D.3</b> Chapter 4 Solutions</a></li>
<li class="chapter" data-level="D.4" data-path="D-appendixD.html"><a href="D-appendixD.html#chapter-5-solutions"><i class="fa fa-check"></i><b>D.4</b> Chapter 5 Solutions</a></li>
<li class="chapter" data-level="D.5" data-path="D-appendixD.html"><a href="D-appendixD.html#chapter-6-solutions"><i class="fa fa-check"></i><b>D.5</b> Chapter 6 Solutions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Statistical Inference via Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<html>
<img src='https://moderndive.com/wide_format.png' alt="ModernDive">
</html>
<div id="regression" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> Basic Regression</h1>
<p>Now that we are equipped with data visualization skills from Chapter <a href="3-viz.html#viz">3</a>, data wrangling skills from Chapter <a href="4-wrangling.html#wrangling">4</a>, and an understanding of “tidy” data format from Chapter <a href="5-tidy.html#tidy">5</a>, let’s now proceed with data modeling. The fundamental premise of data modeling is to make explicit the relationship between:</p>
<ul>
<li>an outcome variable <span class="math inline">\(y\)</span>, also called a dependent variable or response variable  and</li>
<li>an explanatory/predictor variable <span class="math inline">\(x\)</span>, also called an independent variable or  covariate.</li>
</ul>
<p>Another way to state this is using mathematical terminology: we will model the outcome variable <span class="math inline">\(y\)</span> “as a function” of the explanatory/predictor variable <span class="math inline">\(x\)</span>. When we say “function” here, we aren’t referring to a function like the <code>ggplot()</code> function, but rather as a mathematical function. Why do we have two different labels, explanatory and predictor, for the variable <span class="math inline">\(x\)</span>? That’s because even though the two terms are used interchangeably, roughly speaking data modeling serves one of two purposes:</p>
<ol style="list-style-type: decimal">
<li><strong>Modeling for explanation</strong>: When you want to explicitly describe and quantify the relationship between an outcome variable <span class="math inline">\(y\)</span> and a set of explanatory variables <span class="math inline">\(x\)</span>, determine the significance of any relationships, and have measures summarizing these relationships.</li>
<li><strong>Modeling for prediction</strong>: When you want to predict an outcome variable <span class="math inline">\(y\)</span> based on the information contained in a set of predictor variables. Unlike modeling for explanation however, you don’t care so much about understanding how all the variables relate and interact with one another, but rather only whether you can make good predictions about <span class="math inline">\(y\)</span> using the information in predictor variables <span class="math inline">\(x\)</span>.</li>
</ol>
<p>For example, say you are interested in an outcome variable <span class="math inline">\(y\)</span> of whether patients develop lung cancer and information <span class="math inline">\(x\)</span> on their risk factors, such as smoking habits, age, and socioeconomic status. If we are modeling for explanation, we would be interested describing and quantifying the effects of the different risk factors. One reason could be because you want to design an intervention to reduce lung cancer incidence in a population, such as targeting smokers of a specific age group with advertising for smoking cessation programs. If we are modeling for prediction however, we wouldn’t care so much about understanding how all the individual risk factors contribute to lung cancer incidence, but rather only whether we can make good predictions of who will contract lung cancer.</p>
<p>In this book, we’ll focus on modeling for explanation and hence refer to <span class="math inline">\(x\)</span>. If you are interested in learning about modeling for prediction, we suggest you check out books and courses on machine learning. Furthermore, while there exists many techniques for modeling, such as tree-based models and neural networks, in this book we’ll focus on one particular technique: <em>linear regression</em>,  one of the most commonly-used and easy-to-understand approaches to modeling.</p>
<p>Linear regression involves a <em>numerical</em> outcome variable <span class="math inline">\(y\)</span> and explanatory variables <span class="math inline">\(x\)</span> that are either <em>numerical</em> or <em>categorical</em>. Furthermore, the relationship between <span class="math inline">\(y\)</span> and <span class="math inline">\(x\)</span> is assumed to be linear, or in other words, a line. However we’ll see that what constitutes a “line” will vary depending on the nature of your <span class="math inline">\(x\)</span> explanatory variables. We’ll study</p>
<ul>
<li>In Chapter <a href="6-regression.html#regression">6</a> on basic regression, we’ll only consider models with a single explanatory variable <span class="math inline">\(x\)</span>
<ol style="list-style-type: decimal">
<li>In Section <a href="6-regression.html#model1">6.1</a>, the explanatory variable will be numerical. This scenario is known as <em>simple linear regression</em>.</li>
<li>In Section <a href="6-regression.html#model2">6.2</a>, the explanatory variable will be categorical.</li>
</ol></li>
<li>In Chapter <a href="7-multiple-regression.html#multiple-regression">7</a> on multiple regression, we’ll consider models with two explanatory variables <span class="math inline">\(x_1\)</span> and <span class="math inline">\(x_2\)</span>:
<ol style="list-style-type: decimal">
<li>In Section <a href="7-multiple-regression.html#model3">7.2</a>, we’ll have one numerical and one categorical explanatory variable. In particular, we’ll consider two possible models in this case: <em>interaction</em> and <em>parallel slopes</em> models.</li>
<li>In Section <a href="7-multiple-regression.html#model4">7.1</a>, we’ll have two numerical explanatory variables.</li>
</ol></li>
<li>In Chapter <a href="11-inference-for-regression.html#inference-for-regression">11</a> on inference for regression, we’ll revisit our regression models and analyze the results using the tools for “statistical inference” you’ll develop in Chapters <a href="8-sampling.html#sampling">8</a>, <a href="9-confidence-intervals.html#confidence-intervals">9</a>, and <a href="10-hypothesis-testing.html#hypothesis-testing">10</a> on sampling, confidence intervals, and hypothesis test/p-values respectively.</li>
</ul>
<p>Let’s now begin with basic regression,  which are linear regression models with a single explanatory variable <span class="math inline">\(x\)</span>. We’ll also discuss important statistical concepts like the correlation coefficient, that “correlation isn’t necessarily causation”, and what it means for a line to be “best fitting.”</p>
<div id="needed-packages-3" class="section level3 unnumbered">
<h3>Needed packages</h3>
<p>Let’s now load all the packages needed for this chapter (this assumes you’ve already installed them). In this chapter we introduce some new packages:</p>
<ol style="list-style-type: decimal">
<li>The <code>tidyverse</code> “umbrella” package. Recall from our discussion in Section <a href="5-tidy.html#tidyverse-package">5.4.1</a> that loading the <code>tidyverse</code> package by running <code>library(tidyverse)</code> loads the following commonly used data science packages all at once:
<ul>
<li><code>ggplot2</code> for data visualization</li>
<li><code>dplyr</code> for data wrangling</li>
<li><code>tidyr</code> for converting data to “tidy” format</li>
<li><code>readr</code> for importing spreadsheet data into R</li>
<li>As well as the more advanced <code>purrr</code>, <code>tibble</code>, <code>stringr</code>, and <code>forcats</code> packages</li>
</ul></li>
<li>The <code>moderndive</code>  package of datasets and functions for tidyverse-friendly introductory linear regression.</li>
<li>The <code>skimr</code> package which provides a simple to use summary function that can be used with pipes and displays nicely in the console.</li>
</ol>
<p>If needed, read Section <a href="2-getting-started.html#packages">2.3</a> for information on how to install and load R packages.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)
<span class="kw">library</span>(moderndive)
<span class="kw">library</span>(skimr)
<span class="kw">library</span>(gapminder)</code></pre>
</div>
<div id="model1" class="section level2">
<h2><span class="header-section-number">6.1</span> One numerical explanatory variable</h2>
<p>Why do some professors and instructors at universities and colleges receive high teaching evaluations from students while others don’t? Are there differences in teaching evaluations between instructors of different demographic groups? Could there be an impact due to student biases? These are all questions that are of interest to university/college administrators, as teaching evaluations are among the many criteria considered in determining which instructors and professors get promoted.</p>
<p>Researchers at the University of Texas in Austin, Texas (UT Austin) tried to answer the following research question: what factors can explain differences in instructor’s teaching evaluation scores? To this end, they collected instructor and course information on 463 courses. A full description of the study can be found at <a href="https://www.openintro.org/stat/data/?data=evals">openintro.org</a>.</p>
<p>In this section, we’ll keep things simple for now and try to explain differences in instructor teaching scores as a function of one numerical variable: the instructor’s “beauty score”; we’ll describe how this score was computed shortly. Could it be that instructors with higher beauty scores also have higher teaching evaluations? Could it be instead that instructors with higher beauty scores tend to have lower teaching evaluations? Or could it be there is no relationship between beauty score and teaching evaluations? We’ll answer these questions by modeling the relationship between teaching scores and “beauty scores” using <em>simple linear regression</em>  where we have:</p>
<ol style="list-style-type: decimal">
<li>A numerical outcome variable <span class="math inline">\(y\)</span>, the instructor’s teaching score and</li>
<li>A single numerical explanatory variable <span class="math inline">\(x\)</span>, the instructor’s beauty score.</li>
</ol>
<div id="model1EDA" class="section level3">
<h3><span class="header-section-number">6.1.1</span> Exploratory data analysis</h3>
<p>The data on the 463 courses at the UT Austin can be found in the <code>evals</code> data frame included in the <code>moderndive</code> package. However, to keep things simple, let’s <code>select()</code> only the subset of the variables we’ll consider in this chapter, and save this data in a new data frame called <code>eval_ch6</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r">evals_ch6 &lt;-<span class="st"> </span>evals <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(ID, score, bty_avg, age)</code></pre>
<p>A crucial step before doing any kind of analysis or modeling is performing an <em>exploratory data analysis</em>,  or EDA for short. Exploratory data analysis gives you a sense of the distributions of the individual variables in your data, whether there are outliers and/or missing values, and most importantly help inform how to build your model. Here are three common steps in an exploratory data analysis.</p>
<ol style="list-style-type: decimal">
<li>Most crucially: Looking at the raw data values.</li>
<li>Computing summary statistics, like means, medians, and interquartile ranges.</li>
<li>Creating data visualizations.</li>
</ol>
<p>Let’s perform the first common step in an exploratory data analysis: looking at the raw data values. Unfortunately, many analysts ignore the first step. Because this step seems so trivial, many analysts often ignore it. However, getting an early sense of what your raw data looks like can often prevent many larger issues down the road. You can do this by using RStudio’s spreadsheet viewer or by using the <code>glimpse()</code> function as introduced in Section <a href="2-getting-started.html#exploredataframes">2.4.3</a> on exploring data frames:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">glimpse</span>(evals_ch6)</code></pre>
<pre><code>Observations: 463
Variables: 4
$ ID      &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18…
$ score   &lt;dbl&gt; 4.7, 4.1, 3.9, 4.8, 4.6, 4.3, 2.8, 4.1, 3.4, 4.5, 3.8, 4.5, 4…
$ bty_avg &lt;dbl&gt; 5.00, 5.00, 5.00, 5.00, 3.00, 3.00, 3.00, 3.33, 3.33, 3.17, 3…
$ age     &lt;int&gt; 36, 36, 36, 36, 59, 59, 59, 51, 51, 40, 40, 40, 40, 40, 40, 4…</code></pre>
<p>Observe that <code>Observations: 463</code> indicates that there are 463 rows/observations in <code>evals_ch6</code>, where each row corresponds to one observed course at UT Austin. It is important to note that the <em>observational unit</em>  are individual courses and not individual instructors. The observational unit is the thing that is being measured or with which the variables provide characteristics for. Since instructors often teach more than one course in an academic year, the same instructor can often appear more than once in the data. Hence there are fewer than 463 unique instructors being represented in <code>evals_ch6</code>. We’ll revisit this idea in Chapter <a href="11-inference-for-regression.html#inference-for-regression">11</a>, when we talk about the “independence assumption” for inference for regression.</p>
<p>While a full description of all the variables included in <code>evals</code> can be found at <a href="https://www.openintro.org/stat/data/?data=evals">openintro.org</a> and by reading the associated help file by running <code>?evals</code> in the Console, let’s fully describe the 4 variables we selected in <code>evals_ch6</code>:</p>
<ol style="list-style-type: decimal">
<li><code>ID</code>: An identification variable used to distinguish between the 1 through 463 courses in the dataset.</li>
<li><code>score</code>: A numerical variable of the course instructor’s average teaching score, where the average is computed from the evaluation scores from all students in that course. Teaching scores of 1 are lowest and 5 are highest. This is the outcome variable <span class="math inline">\(y\)</span> of interest.</li>
<li><code>bty_avg</code>: A numerical variable of the course instructor’s average “beauty” score, where the average is computed from a separate panel of 6 students. “Beauty” scores of 1 are lowest and 10 are highest. This is the explanatory variable <span class="math inline">\(x\)</span> of interest.</li>
<li><code>age</code>: A numerical variable of the course instructor’s age. This will be another explanatory variable <span class="math inline">\(x\)</span> we’ll study later.</li>
</ol>
<p>An alternative way to look at the raw data values is by choosing a random sample of the courses, i.e. rows in <code>evals_ch6</code> by piping it into the <code>sample_n()</code>  function from the <code>dplyr</code> package. Here we set the <code>size</code> argument to be <code>5</code>, indicating that we want a random sample of 5 rows. We display the results Table <a href="6-regression.html#tab:five-random-courses">6.1</a>. Note due to the random nature of the sampling, you will likely end up with a different subset of 5 rows.</p>
<pre class="sourceCode r"><code class="sourceCode r">evals_ch6 <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">sample_n</span>(<span class="dt">size =</span> <span class="dv">5</span>)</code></pre>
<table class="table" style="font-size: 16px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:five-random-courses">TABLE 6.1: </span>A random sample of 5 out of the 463 courses at UT Austin
</caption>
<thead>
<tr>
<th style="text-align:right;">
ID
</th>
<th style="text-align:right;">
score
</th>
<th style="text-align:right;">
bty_avg
</th>
<th style="text-align:right;">
age
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
129
</td>
<td style="text-align:right;">
3.7
</td>
<td style="text-align:right;">
3.00
</td>
<td style="text-align:right;">
62
</td>
</tr>
<tr>
<td style="text-align:right;">
109
</td>
<td style="text-align:right;">
4.7
</td>
<td style="text-align:right;">
4.33
</td>
<td style="text-align:right;">
46
</td>
</tr>
<tr>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
4.8
</td>
<td style="text-align:right;">
5.50
</td>
<td style="text-align:right;">
62
</td>
</tr>
<tr>
<td style="text-align:right;">
434
</td>
<td style="text-align:right;">
2.8
</td>
<td style="text-align:right;">
2.00
</td>
<td style="text-align:right;">
62
</td>
</tr>
<tr>
<td style="text-align:right;">
330
</td>
<td style="text-align:right;">
4.0
</td>
<td style="text-align:right;">
2.33
</td>
<td style="text-align:right;">
64
</td>
</tr>
</tbody>
</table>
<p>Now that we’ve looked at the raw values in our <code>evals_ch6</code> data frame and obtained a sense of the data, let’s move on to next common step in an exploratory data analysis: computing summary statistics. Let’s start by computing the mean and median of our numerical outcome variable <code>score</code> and our numerical explanatory variable <code>bty_avg</code> beauty score:</p>
<pre class="sourceCode r"><code class="sourceCode r">evals_ch6 <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mean_bty_avg =</span> <span class="kw">mean</span>(bty_avg), <span class="dt">mean_score =</span> <span class="kw">mean</span>(score),
            <span class="dt">median_bty_avg =</span> <span class="kw">median</span>(bty_avg), <span class="dt">median_score =</span> <span class="kw">median</span>(score))</code></pre>
<pre><code># A tibble: 1 x 4
  mean_bty_avg mean_score median_bty_avg median_score
         &lt;dbl&gt;      &lt;dbl&gt;          &lt;dbl&gt;        &lt;dbl&gt;
1         4.42       4.17           4.33          4.3</code></pre>
<p>However, what if we want other summary statistics as well, such as the standard deviation (a measure of spread), the minimum and maximum values, and various percentiles? Typing out all these summary statistic functions in the earlier <code>summarize()</code> would be long and tedious. Instead, let’s using the very convenient <code>skim()</code> function from the <code>skimr</code>  package. This function takes in a data frame, “skims” it, and returns commonly used summary statistics. Let’s take our <code>evals_ch6</code> data frame, <code>select()</code> only the outcome and explanatory variables teaching <code>score</code> and <code>bty_avg</code>, and pipe it into the <code>skim()</code> function:</p>
<pre class="sourceCode r"><code class="sourceCode r">evals_ch6 <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(score, bty_avg) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">skim</span>()</code></pre>
<pre><code>Skim summary statistics
 n obs: 463 
 n variables: 2 

── Variable type:numeric ───────────────────────────────────────────────────────
 variable missing complete   n mean   sd   p0  p25  p50 p75 p100
  bty_avg       0      463 463 4.42 1.53 1.67 3.17 4.33 5.5 8.17
    score       0      463 463 4.17 0.54 2.3  3.8  4.3  4.6 5   </code></pre>
<p>(Note that for formatting purposes, the inline histogram that is usually printed with <code>skim()</code> has been removed.)</p>
<p>For our two numerical variables teaching <code>score</code> and beauty score <code>bty_avg</code> it returns:</p>
<ul>
<li><code>missing</code>: the number of missing values</li>
<li><code>complete</code>: the number of non-missing or complete values</li>
<li><code>n</code>: the total number of values</li>
<li><code>mean</code>: the mean AKA average</li>
<li><code>sd</code>: the standard deviation</li>
<li><code>p0</code>: the 0<sup>th</sup> percentile: the value at which 0% of observations are smaller than it AKA the <em>minimum</em> value</li>
<li><code>p25</code>: the 25<sup>th</sup> percentile: the value at which 25% of observations are smaller than it AKA the <em>1<sup>st</sup> quartile</em></li>
<li><code>p50</code>: the 50<sup>th</sup> percentile: the value at which 50% of observations are smaller than it AKA the <em>2<sup>nd</sup></em> quartile and more commonly the <em>median</em></li>
<li><code>p75</code>: the 75<sup>th</sup> percentile: the value at which 75% of observations are smaller than it AKA the <em>3<sup>rd</sup> quartile</em></li>
<li><code>p100</code>: the 100<sup>th</sup> percentile: the value at which 100% of observations are smaller than it AKA the <em>maximum</em> value</li>
</ul>
<p>Looking at the earlier output we get an idea of how the values of both variables distribute. For example, the mean teaching score was 4.17 out of 5 whereas the mean beauty score was 4.42 out of 10. Furthermore, the middle 50% of teaching scores were between 3.80 and 4.6 (the first and third quartiles) whereas the middle 50% of beauty scores were between 3.17 and 5.5 out of 10.</p>
<p>However, the <code>skim()</code> function only returns what are known as <em>univariate</em>  summary statistics: functions that take a single variable and return some summary of that variable. However, there also exist <em>bivariate</em>  summary statistics: functions that take in two variables and return some summary of those two variables. In particular, when the two variables are numerical we can compute the  <em>correlation coefficient</em>. Generally speaking, <em>coefficients</em> are quantitative expressions of a specific property of a phenomenon. A <em>correlation coefficient</em> is a quantitative expression of the <em>strength of the linear relationship between two numerical variables</em> whose value range between -1 and 1 where:</p>
<ul>
<li>-1 indicates a perfect <em>negative relationship</em>: As the value of one variable goes up, the value of the other variable tends to go down.</li>
<li>0 indicates no relationship: The values of both variables go up/down independently of each other.</li>
<li>+1 indicates a perfect <em>positive relationship</em>: As the value of one variable goes up, the value of the other variable tends to go up as well.</li>
</ul>
<p>Figure <a href="6-regression.html#fig:correlation1">6.1</a> gives examples of 9 different correlation coefficient values for hypothetical numerical variables <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span>. For example, observe that for a correlation coefficient of -0.75 there is still a negative linear relationship between <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span>, it is not as strong as the negative linear relationship between <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> when the correlation coefficient is -0.9 or -1.</p>
<div class="figure" style="text-align: center"><span id="fig:correlation1"></span>
<img src="moderndive_files/figure-html/correlation1-1.png" alt="Different correlation coefficients." width="\textwidth" />
<p class="caption">
FIGURE 6.1: Different correlation coefficients.
</p>
</div>
<p>The correlation coefficient can be computed using the <code>get_correlation()</code>  function in the <code>moderndive</code> package, where in this case the inputs to the function are the two numerical variables from which we want to calculate the correlation coefficient. We place the name of the response variable on the left hand side of the <code>~</code> and the explanatory variable on the right hand side of the “tilde” in R’s  formula notation. We will use this same “formula” syntax with regression later in this chapter.</p>
<pre class="sourceCode r"><code class="sourceCode r">evals_ch6 <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">get_correlation</span>(<span class="dt">formula =</span> score <span class="op">~</span><span class="st"> </span>bty_avg)</code></pre>
<pre><code># A tibble: 1 x 1
  correlation
        &lt;dbl&gt;
1       0.187</code></pre>
<p>An alternative way to compute the correlation coefficient is to use the <code>cor()</code> function within a <code>summarize()</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r">evals_ch6 <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">correlation =</span> <span class="kw">cor</span>(score, bty_avg))</code></pre>
<pre><code># A tibble: 1 x 1
  correlation
        &lt;dbl&gt;
1       0.187</code></pre>
<p>In our case, the correlation coefficient of 0.187 indicates that the relationship between teaching evaluation score and beauty average is “weakly positive.” There is a certain amount of subjectivity in interpreting correlation coefficients, especially those that aren’t close to the extreme values of -1, 0, and 1. To develop intuition in interpreting correlation coefficients see play the “Guess the Correlation” 1980’s style video game in Subsection <a href="6-regression.html#additional-resources-basic-regression">6.4.1</a>.</p>
<p>Let’s now perform the last of the three common steps in an exploratory data analysis: creating data visualizations. Since both the <code>score</code> and <code>bty_avg</code> variables are numerical, a scatterplot is an appropriate graph to visualize this data. Let’s do this using <code>geom_point()</code> and display the result in Figure <a href="6-regression.html#fig:numxplot1">6.2</a>. Furthermore, let’s highlight the 6 points in the top right of the visualization in orange.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(evals_ch6, <span class="kw">aes</span>(<span class="dt">x =</span> bty_avg, <span class="dt">y =</span> score)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Beauty Score&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Teaching Score&quot;</span>,
       <span class="dt">title =</span> <span class="st">&quot;Scatterplot of relationship of teaching and beauty scores&quot;</span>)</code></pre>
<div class="figure" style="text-align: center"><span id="fig:numxplot1"></span>
<img src="moderndive_files/figure-html/numxplot1-1.png" alt="Instructor evaluation scores at UT Austin." width="\textwidth" />
<p class="caption">
FIGURE 6.2: Instructor evaluation scores at UT Austin.
</p>
</div>
<p>Observe the following:</p>
<ol style="list-style-type: decimal">
<li>Most “beauty” scores lie between 2 and 8.</li>
<li>Most teaching scores lie between 3 and 5.</li>
<li>While opinions may vary, it is our opinion that the relationship between teaching score and beauty score appears weakly positive. This is consistent with our earlier computed correlation coefficient of 0.187.</li>
</ol>
<p>Furthermore, there appear to be 6 points in the top-right of this plot highlighted in the orange box. However, this is not the case as this plot suffers from <em>overplotting</em>. Recall from Subsection <a href="3-viz.html#overplotting">3.3.2</a> that overplotting occurs when several points are stacked directly on top of each other, thereby obscuring their number. So while it may appear that there are only 6 points in the orange box, there are actually more. This fact is only apparent when using <code>geom_jitter()</code> in place of <code>geom_point()</code>. We display the resulting plot in Figure <a href="6-regression.html#fig:numxplot2">6.3</a> along with the same orange box as in Figure <a href="6-regression.html#fig:numxplot2">6.3</a>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(evals_ch6, <span class="kw">aes</span>(<span class="dt">x =</span> bty_avg, <span class="dt">y =</span> score)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_jitter</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Beauty Score&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Teaching Score&quot;</span>,
       <span class="dt">title =</span> <span class="st">&quot;Scatterplot of relationship of teaching and beauty scores&quot;</span>)</code></pre>
<div class="figure" style="text-align: center"><span id="fig:numxplot2"></span>
<img src="moderndive_files/figure-html/numxplot2-1.png" alt="Instructor evaluation scores at UT Austin." width="\textwidth" />
<p class="caption">
FIGURE 6.3: Instructor evaluation scores at UT Austin.
</p>
</div>
<p>It is now apparent that there are 12 points in the area highlighted in orange and not 6 as originally suggested in Figure <a href="6-regression.html#fig:numxplot1">6.2</a>. Recall from Section <a href="3-viz.html#overplotting">3.3.2</a> on overplotting that jittering adds a little random “nudge” to each of the points to break up these ties. Furthermore, jittering is strictly a visualization tool; it does not alter the original values in the data frame <code>evals_ch6</code>. To keep things simple going forward however, we’ll only present regular scatterplots rather than their jittered counterparts.</p>
<p>Let’s build on the unjittered scatterplot in Figure <a href="6-regression.html#fig:numxplot1">6.2</a> by adding a “best-fitting” line; of all possible lines we can draw on this scatterplot, its the line that “best” fits through the cloud of points. We do this by adding a new <code>geom_smooth(method = &quot;lm&quot;, se = FALSE)</code> layer to the <code>ggplot()</code> code that created the scatterplot in Figure <a href="6-regression.html#fig:numxplot1">6.2</a>. The <code>method = lm</code> argument sets the line to be a “linear model” while the <code>se = FALSE</code>  argument suppresses “standard error” uncertainty bars.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(evals_ch6, <span class="kw">aes</span>(<span class="dt">x =</span> bty_avg, <span class="dt">y =</span> score)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Beauty Score&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Teaching Score&quot;</span>,
       <span class="dt">title =</span> <span class="st">&quot;Relationship between teaching and beauty scores&quot;</span>) <span class="op">+</span><span class="st">  </span>
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>, <span class="dt">se =</span> <span class="ot">FALSE</span>)</code></pre>
<div class="figure" style="text-align: center"><span id="fig:numxplot3"></span>
<img src="moderndive_files/figure-html/numxplot3-1.png" alt="Regression line." width="\textwidth" />
<p class="caption">
FIGURE 6.4: Regression line.
</p>
</div>
<p>The blue line in the resulting Figure <a href="6-regression.html#fig:numxplot3">6.4</a> is called a “regression line”. The regression line  is a visual summary of the relationship between two numerical variables, in our case the outcome variable <code>score</code> and the explanatory variable <code>bty_avg</code>. The positive slope of the blue line is consistent with our earlier observed correlation coefficient of 0.187 suggesting that there is a positive relationship between these two variables: as instructors have higher beauty scores so also do they have receive higher teaching evaluations. We’ll see later however that while the correlation coefficient and the slope of a regression line always have the same sign (positive or negative), they do not necessarily have the same value.</p>
<p>Furthermore, a regression line is “best” fitting in that it minimizes some mathematical criteria. We present this mathematical criteria in Subsection <a href="6-regression.html#leastsquares">6.3.2</a>, but we suggest you read this subsection only after reading the rest of this section on regression with one numerical explanatory variable.</p>
<div class="learncheck">
<p>
<strong><em>Learning check</em></strong>
</p>
</div>
<p><strong>(LC6.1)</strong> Conduct a new exploratory data analysis with the same outcome variable <span class="math inline">\(y\)</span> being <code>score</code> but with <code>age</code> as the new explanatory variable <span class="math inline">\(x\)</span>. Remember, this involves three things:</p>
<ol style="list-style-type: lower-alpha">
<li>Looking at the raw data values.</li>
<li>Computing summary statistics.</li>
<li>Creating data visualizations.</li>
</ol>
<p>What can you say about the relationship between age and teaching scores based on this exploration?</p>
<div class="learncheck">

</div>
</div>
<div id="model1table" class="section level3">
<h3><span class="header-section-number">6.1.2</span> Simple linear regression</h3>
<p>You may recall from secondary school / high school algebra, the equation of a line is <span class="math inline">\(y = a + b\cdot x\)</span> which is defined by two coefficients <span class="math inline">\(a\)</span> and <span class="math inline">\(b\)</span> (recall from earlier that coefficients are “quantitative expressions of a specific property of a phenomenon”): the intercept coefficient <span class="math inline">\(a\)</span> i.e. the value of <span class="math inline">\(y\)</span> when <span class="math inline">\(x = 0\)</span> and the slope coefficient <span class="math inline">\(b\)</span> for x i.e. the increase in <span class="math inline">\(y\)</span> for every increase of one in <span class="math inline">\(x\)</span>.</p>
<p>However, when defining a regression line like the blue regression line in Figure <a href="6-regression.html#fig:numxplot3">6.4</a>, we use slightly different notation: the equation of the regression line is <span class="math inline">\(\widehat{y} = b_0 + b_1 \cdot x\)</span>  where the intercept coefficient is <span class="math inline">\(b_0\)</span> i.e. the value of <span class="math inline">\(\widehat{y}\)</span> when <span class="math inline">\(x=0\)</span>. The slope coefficient is <span class="math inline">\(b_1\)</span> for x i.e. the increase in <span class="math inline">\(\widehat{y}\)</span> for every increase of one in <span class="math inline">\(x\)</span>. Why do we put a “hat” on top of the <span class="math inline">\(y\)</span>? It’s a form of notation commonly used in regression to indicate that we have a  “fitted value”, or the value of <span class="math inline">\(y\)</span> on the regression line for a given <span class="math inline">\(x\)</span> value; we’ll discussion this more in the upcoming Subsection <a href="6-regression.html#model1points">6.1.3</a>.</p>
<p>We know that the blue regression line in Figure <a href="6-regression.html#fig:numxplot3">6.4</a> has a positive slope <span class="math inline">\(b_1\)</span> corresponding to our explanatory <span class="math inline">\(x\)</span> variable <code>bty_avg</code>. Why? Because as instructors have higher <code>bty_avg</code> scores, so also do they tend to have higher teaching evaluation <code>scores</code>. However, what is the specific numerical value of the slope <span class="math inline">\(b_1\)</span>? What about the intercept <span class="math inline">\(b_0\)</span>? Let’s compute these two values by hand, but rather let’s use a computer!</p>
<p>We can obtain the intercept <span class="math inline">\(b_0\)</span> and slope <span class="math inline">\(b_1\)</span> for <code>btg_avg</code> by outputting a <em>linear regression table</em>. This is done in two steps:</p>
<ol style="list-style-type: decimal">
<li>We first “fit” the linear regression model using the <code>lm()</code> function and save it in <code>score_model</code>.</li>
<li>We get the regression table by applying the <code>get_regression_table()</code>  from the <code>moderndive</code> package to <code>score_model</code>.</li>
</ol>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Fit regression model:</span>
score_model &lt;-<span class="st"> </span><span class="kw">lm</span>(score <span class="op">~</span><span class="st"> </span>bty_avg, <span class="dt">data =</span> evals_ch6)
<span class="co"># Get regression table:</span>
<span class="kw">get_regression_table</span>(score_model)</code></pre>
<table class="table" style="font-size: 16px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:regtable">TABLE 6.2: </span>Linear regression table
</caption>
<thead>
<tr>
<th style="text-align:left;">
term
</th>
<th style="text-align:right;">
estimate
</th>
<th style="text-align:right;">
std_error
</th>
<th style="text-align:right;">
statistic
</th>
<th style="text-align:right;">
p_value
</th>
<th style="text-align:right;">
lower_ci
</th>
<th style="text-align:right;">
upper_ci
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
intercept
</td>
<td style="text-align:right;">
3.880
</td>
<td style="text-align:right;">
0.076
</td>
<td style="text-align:right;">
50.96
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3.731
</td>
<td style="text-align:right;">
4.030
</td>
</tr>
<tr>
<td style="text-align:left;">
bty_avg
</td>
<td style="text-align:right;">
0.067
</td>
<td style="text-align:right;">
0.016
</td>
<td style="text-align:right;">
4.09
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.035
</td>
<td style="text-align:right;">
0.099
</td>
</tr>
</tbody>
</table>
<p>Let’s first focus on interpreting the regression table output in Table <a href="6-regression.html#tab:regtable">6.2</a> and then later we’ll revisit the code that produced it. In the <code>estimate</code> column of Table <a href="6-regression.html#tab:regtable">6.2</a> are the intercept <span class="math inline">\(b_0\)</span> = 3.88 and the slope <span class="math inline">\(b_1\)</span> = 0.067 for <code>bty_avg</code> and thus the equation of the blue regression line in Figure <a href="6-regression.html#fig:numxplot3">6.4</a> follows (note that the <span class="math inline">\(\cdot\)</span> symbol is equivalent to the <span class="math inline">\(\times\)</span> “multiply by” mathematical symbol; we use the <span class="math inline">\(\cdot\)</span> symbol in this book as it is a little cleaner):</p>
<p><span class="math display">\[
\begin{aligned}
\widehat{y} &amp;= b_0 + b_1 \cdot x\\
\widehat{\text{score}} &amp;= b_0 + b_{\text{bty}\_\text{avg}} \cdot\text{bty}\_\text{avg}\\
&amp;= 3.880 + 0.067\cdot\text{bty}\_\text{avg}
\end{aligned}
\]</span></p>
<p>The intercept <span class="math inline">\(b_0\)</span> = 3.8803 is the value average teaching score <span class="math inline">\(\widehat{y}\)</span> = <span class="math inline">\(\widehat{\text{score}}\)</span> for those courses where the instructor had a beauty score <code>bty_avg</code> of 0. In other words, it’s where the line intersects the <span class="math inline">\(y\)</span> axis when <span class="math inline">\(x\)</span> = 0. Note however that while the  intercept of the regression line has a mathematical interpretation, it has no <em>practical</em> interpretation since observing a <code>bty_avg</code> of 0 is impossible; it is the average of six panelists’ beauty score ranging from 1 to 10. Furthermore, looking at the scatterplot with the regression line in Figure <a href="6-regression.html#fig:numxplot3">6.4</a>, no instructors had a beauty score anywhere near 0.</p>
<p>Of greater interest is the  slope <span class="math inline">\(b_1\)</span> = <span class="math inline">\(b_{\text{bty avg}}\)</span> for <code>bty_avg</code> of +0.067, as this summarizes the relationship between teaching score and beauty score. Note that the sign is positive suggesting a positive relationship between these two variables, meaning teachers with higher beauty scores also tend to have higher teaching scores. Recall from earlier that the correlation coefficient is 0.187: they both have the same positive sign, but have a different value. Recall further that the correlation’s interpretation is the “strength of linear association”. The  slope’s interpretation is a little different:</p>
<blockquote>
<p>For every increase of 1 unit in <code>bty_avg</code>, there is an <em>associated</em> increase of, <em>on average</em>, 0.0666 units of <code>score</code>.</p>
</blockquote>
<p>We only state that there is an <em>associated</em> increase and not necessarily a <em>causal</em> increase. For example, perhaps it’s not that higher beauty scores directly cause higher teaching scores per se. Instead it could be that individuals from wealthier backgrounds tend to have stronger educational backgrounds and hence have higher teaching scores, but that these wealthy individuals also have higher beauty scores. In other words, just because two variables are strongly associated doesn’t mean that one necessarily causes the other. This is summed up in the often quoted phrase “correlation is not necessarily causation.” We discuss this idea further in Subsection <a href="6-regression.html#correlation-is-not-causation">6.3.1</a>.</p>
<p>Furthermore, we say that this associated increase is <em>on average</em> 0.067 units of teaching <code>score</code> because you might have two instructors whose <code>bty_avg</code> score differ by 1 unit, but their difference in teaching scores isn’t necessarily 0.067. What the slope of 0.067 is across all courses, the <em>average</em> difference in teaching score between two instructors whose beauty scores differ by one is 0.067.</p>
<p>Now that we’ve learned how to compute the equation for the blue regression line in Figure <a href="6-regression.html#fig:numxplot3">6.4</a> using the values in the <code>estimate</code> column of Table <a href="6-regression.html#tab:regtable">6.2</a> and how to interpret the resulting the intercept and slope, let’s revisit the code that generated this table:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Fit regression model:</span>
score_model &lt;-<span class="st"> </span><span class="kw">lm</span>(score <span class="op">~</span><span class="st"> </span>bty_avg, <span class="dt">data =</span> evals_ch6)
<span class="co"># Get regression table:</span>
<span class="kw">get_regression_table</span>(score_model)</code></pre>
<p>First, we “fit” the linear regression model to the <code>data</code> using the <code>lm()</code>  function and save this to <code>score_model</code>. When we say “fit”, we mean “find the best fitting line to this data.” <code>lm()</code> stands for “linear model” and is used as follows: <code>lm(y ~ x, data = data_frame_name)</code> where:</p>
<ul>
<li><code>y</code> is the outcome variable, followed by a tilde (<code>~</code>); this is likely the key to the left of the “1” key on your keyboard. In our case, <code>y</code> is set to <code>score</code>.</li>
<li><code>x</code> is the explanatory variable. In our case, <code>x</code> is set to <code>bty_avg</code>.</li>
<li>The combination of <code>y ~ x</code> is called a <em>model formula</em> (note the order of <code>y</code> and <code>x</code>). In our case, the model formula is <code>score ~ bty_avg</code>. We saw such model formulas earlier as well when we computed the correlation coefficient using the <code>get_correlation()</code> function in Subsection <a href="6-regression.html#model1EDA">6.1.1</a>.</li>
<li><code>data_frame_name</code> is the name of the data frame that contains the variables <code>y</code> and <code>x</code>. In our case, <code>data_frame_name</code> is the <code>evals_ch6</code> data frame.</li>
</ul>
<p>Second, we take the saved model in <code>score_model</code> and apply the <code>get_regression_table()</code> function from the <code>moderndive</code> package to it to obtain the regression table in Table <a href="6-regression.html#tab:regtable">6.2</a>. This function is an example of what’s known as a <em>wrapper function</em>  in computer programming, which takes other pre-existing functions and “wraps” them into a single function that hides its inner workings. This concept is illustrated in Figure <a href="6-regression.html#fig:moderndive-figure-wrapper">6.5</a>.</p>
<div class="figure" style="text-align: center"><span id="fig:moderndive-figure-wrapper"></span>
<img src="images/ss/560016454_chart.png" alt="The concept of a wrapper function." width="\textwidth" />
<p class="caption">
FIGURE 6.5: The concept of a wrapper function.
</p>
</div>
<p>So all you need to worry about is the what the inputs look like and what the outputs look like; you leave all the other details “under the hood of the car.” In our regression modeling example, the <code>get_regression_table()</code> function takes as input a saved <code>lm()</code> linear regression and returns as output a data frame of the regression table with information on the intercept and slope of the regression line. If you’re interested in learning more about the <code>get_regression_table()</code> function’s design and inner-workings, check out Subsection <a href="6-regression.html#underthehood">6.3.3</a>.</p>
<p>Lastly, you might be wondering what remaining 5 columns in Table <a href="6-regression.html#tab:regtable">6.2</a> are: <code>std_error</code>, <code>statistic</code>, <code>p_value</code>, <code>lower_ci</code> and <code>upper_ci</code>? They are the “standard error”, “test statistic”, “p-value”, “lower 95% confidence interval bound”, and “upper 95% confidence interval bound.” They tell us about both the <em>statistical significance</em> and <em>practical significance</em> of our results. You can think of this loosely as the “meaningfulness” of our results from a statistical perspective. We are going to put aside these ideas for now and revisit them in Chapter <a href="11-inference-for-regression.html#inference-for-regression">11</a> on (statistical) inference for regression, after we’ve had a chance to cover:</p>
<ul>
<li>Standard errors in Chapter <a href="8-sampling.html#sampling">8</a></li>
<li>Confidence intervals in Chapter <a href="9-confidence-intervals.html#confidence-intervals">9</a></li>
<li>Hypothesis testing and p-values in Chapter <a href="10-hypothesis-testing.html#hypothesis-testing">10</a></li>
</ul>
<div class="learncheck">
<p>
<strong><em>Learning check</em></strong>
</p>
</div>
<p><strong>(LC6.2)</strong> Fit a new simple linear regression using <code>lm(score ~ age, data = evals_ch6)</code> where <code>age</code> is the new explanatory variable <span class="math inline">\(x\)</span>. Get information about the “best-fitting” line from the regression table by applying the <code>get_regression_table()</code> function. How do the regression results match up with the results from your earlier exploratory data analysis?</p>
<div class="learncheck">

</div>
</div>
<div id="model1points" class="section level3">
<h3><span class="header-section-number">6.1.3</span> Observed/fitted values and residuals</h3>
<p>We just saw how to get the value of the intercept and the slope of a regression line from the <code>estimate</code> column of a regression table generated by <code>get_regression_table()</code>. Now instead say we want information on individual observations. For example, let’s focus on 21<sup>st</sup> of the 463 courses in the <code>evals_ch6</code> data frame in Table <a href="6-regression.html#tab:instructor-21">6.3</a>:</p>
<table class="table" style="font-size: 16px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:instructor-21">TABLE 6.3: </span>Data for the 21st course out of 463
</caption>
<thead>
<tr>
<th style="text-align:right;">
ID
</th>
<th style="text-align:right;">
score
</th>
<th style="text-align:right;">
bty_avg
</th>
<th style="text-align:right;">
age
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
4.9
</td>
<td style="text-align:right;">
7.33
</td>
<td style="text-align:right;">
31
</td>
</tr>
</tbody>
</table>
<p>What is the value <span class="math inline">\(\widehat{y}\)</span> on the blue line regression line corresponding to this instructor’s <code>bty_avg</code> beauty score of 7.333? In Figure <a href="6-regression.html#fig:numxplot4">6.6</a> we mark three values corresponding to the instructor for this 21<sup>st</sup> course:</p>
<ul>
<li>Red circle: The <em>observed value</em> <span class="math inline">\(y\)</span> = 4.9 is this course’s instructor’s actual teaching score.</li>
<li>Red square: The <em>fitted value</em> <span class="math inline">\(\widehat{y}\)</span> is value on the regression line for <span class="math inline">\(x\)</span> = <code>bty_avg</code> = 7.333. This value is computed using the intercept and slope in the previous regression table:</li>
</ul>
<p><span class="math display">\[\widehat{y} = b_0 + b_1 \cdot x = 3.88 + 0.067 \cdot 7.333 = 4.369\]</span></p>
<ul>
<li>Blue arrow: The length of this arrow is the <em>residual</em>  and is computed by subtracting the fitted value <span class="math inline">\(\widehat{y}\)</span> from the observed value <span class="math inline">\(y\)</span>. The residual can be thought of as the error or “lack of fit”. In the case of this course’s instructor, it is <span class="math inline">\(y - \widehat{y}\)</span> = 4.9 - 4.369 = 0.531.</li>
</ul>
<div class="figure" style="text-align: center"><span id="fig:numxplot4"></span>
<img src="moderndive_files/figure-html/numxplot4-1.png" alt="Example of observed value, fitted value, and residual." width="\textwidth" />
<p class="caption">
FIGURE 6.6: Example of observed value, fitted value, and residual.
</p>
</div>
<p>Now say we want to compute both the</p>
<ol style="list-style-type: decimal">
<li>the fitted value <span class="math inline">\(\widehat{y} = b_0 + b_1 \cdot x\)</span> and</li>
<li>the residual <span class="math inline">\(y - \widehat{y}\)</span></li>
</ol>
<p>not only for the instructor of the 21st course, but for all 463 courses in the study? Recall that each course corresponds to one of the 463 rows in the <code>evals_ch6</code> data frame and also one of the 463 points in the regression plot in Figure <a href="6-regression.html#fig:numxplot4">6.6</a>.</p>
<p>We could repeat the previous calculations we performed by hand 463 times, but that would be tedious and time consuming. Instead, let’s use the computer using the <code>get_regression_points()</code> function included in the <code>moderndive</code> package. Just like the <code>get_regression_table()</code> function, the <code>get_regression_points()</code> function is a “wrapper” function; however it returns a different output. Let’s apply the <code>get_regression_points()</code> function to <code>score_model</code>, which is where we saved our <code>lm()</code> model in the previous section. In Table <a href="6-regression.html#tab:regression-points-1">6.4</a> we present only the results of the 21<sup>st</sup> through 24<sup>th</sup> courses for brevity’s sake.</p>
<pre class="sourceCode r"><code class="sourceCode r">regression_points &lt;-<span class="st"> </span><span class="kw">get_regression_points</span>(score_model)
regression_points</code></pre>
<table>
<caption>
<span id="tab:regression-points-1">TABLE 6.4: </span>Regression points (for only the 21st through 24th courses)
</caption>
<thead>
<tr>
<th style="text-align:right;">
ID
</th>
<th style="text-align:right;">
score
</th>
<th style="text-align:right;">
bty_avg
</th>
<th style="text-align:right;">
score_hat
</th>
<th style="text-align:right;">
residual
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
4.9
</td>
<td style="text-align:right;">
7.33
</td>
<td style="text-align:right;">
4.37
</td>
<td style="text-align:right;">
0.531
</td>
</tr>
<tr>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
7.33
</td>
<td style="text-align:right;">
4.37
</td>
<td style="text-align:right;">
0.231
</td>
</tr>
<tr>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
4.5
</td>
<td style="text-align:right;">
7.33
</td>
<td style="text-align:right;">
4.37
</td>
<td style="text-align:right;">
0.131
</td>
</tr>
<tr>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
4.4
</td>
<td style="text-align:right;">
5.50
</td>
<td style="text-align:right;">
4.25
</td>
<td style="text-align:right;">
0.153
</td>
</tr>
</tbody>
</table>
<p>Let’s inspect the individual columns and match them with the elements of Figure <a href="6-regression.html#fig:numxplot4">6.6</a>:</p>
<ul>
<li>The <code>score</code> column represents the observed outcome variable <span class="math inline">\(y\)</span> i.e. the y-position of the 463 black points.</li>
<li>The <code>bty_avg</code> column represents the values of the explanatory variable <span class="math inline">\(x\)</span> i.e. the x-position of the 463 black points.</li>
<li>The <code>score_hat</code> column represents the fitted values <span class="math inline">\(\widehat{y}\)</span> i.e. the corresponding value on the blue regression line for the 463 <span class="math inline">\(x\)</span> values.</li>
<li>The <code>residual</code> column represents the residuals <span class="math inline">\(y - \widehat{y}\)</span> i.e the 463 vertical distances between the 463 black points and the blue regression line.</li>
</ul>
<p>Just as we did for the instructor of the 21st course in the <code>evals_ch6</code> dataset (in the first row of the table above), let’s repeat the calculations for the instructor of the 24th course (in the fourth row of Table <a href="6-regression.html#tab:regression-points-1">6.4</a> above):</p>
<ul>
<li><code>score</code> = 4.4 is the observed teaching <code>score</code> <span class="math inline">\(y\)</span> for this course’s instructor.</li>
<li><code>bty_avg</code> = 5.50 is the value of the explanatory variable <code>bty_avg</code> <span class="math inline">\(x\)</span> for this course’s instructor.</li>
<li><code>score_hat</code> = 4.25 = 3.88 + 0.067 <span class="math inline">\(\cdot\)</span> 5.50 is the fitted value <span class="math inline">\(\widehat{y}\)</span> on the blue regression line for this course’s instructor.</li>
<li><code>residual</code> = 0.153 = 4.4 - 4.25 is the value of the residual for this instructor. In other words, the model was off by 0.153 teaching score units for this course’s instructor.</li>
</ul>
<p>At this point we suggest you read Section <a href="6-regression.html#leastsquares">6.3.2</a> in which we define what we mean by “best” for “best-fitting” regression lines: it is the line that minimizes the <em>sum of squared residuals</em>.</p>
<div class="learncheck">
<p>
<strong><em>Learning check</em></strong>
</p>
</div>
<p><strong>(LC6.3)</strong> Generate a data frame of the residuals of the model where you used <code>age</code> as the explanatory <span class="math inline">\(x\)</span> variable.</p>
<div class="learncheck">

</div>
</div>
</div>
<div id="model2" class="section level2">
<h2><span class="header-section-number">6.2</span> One categorical explanatory variable</h2>
<p>It’s an unfortunate truth that life expectancy is not the same across all countries in the world. International development agencies are very interested in studying these differences in life expectancy in the hopes of identifying where governments should allocate resources to address this problem. In this section, we’ll explore differences in life expectancy in two ways:</p>
<ol style="list-style-type: decimal">
<li>Differences between continents: Are there significant differences in average life expectancy between the five continents of the world: Africa, the Americas, Asia, Europe, and Oceania?</li>
<li>Differences within continents: How does life expectancy vary within the world’s five continents? For example, is the spread of life expectancy among the countries of Africa larger than the spread of life expectancy among the countries of Asia?</li>
</ol>
<p>To answer such questions, we’ll use the <code>gapminder</code> data frame included in the <code>gapminder</code>  package. This dataset has international development statistics such as life expectancy, GDP per capita, and population for 142 countries for 5-year intervals between 1952 and 2007. Recall we visualized this data in Figure <a href="3-viz.html#fig:gapminder">3.1</a> in Subsection <a href="3-viz.html#gapminder">3.1.2</a> on the “Grammar of Graphics”.</p>
<p>We’ll use this data for basic linear regression again but now using an explanatory variable <span class="math inline">\(x\)</span> that is categorical, as opposed to the numerical explanatory variable model we saw in Section <a href="6-regression.html#model1">6.1</a> on instructor teaching and beauty scores. In this section, we’ll model the relationship between</p>
<ol style="list-style-type: decimal">
<li>A numerical outcome variable <span class="math inline">\(y\)</span>, a country’s life expectancy and</li>
<li>A single categorical explanatory variable <span class="math inline">\(x\)</span>, the continent the country is a part of.</li>
</ol>
<p>When the explanatory variable <span class="math inline">\(x\)</span> is categorical, the concept of a “best-fitting” regression line is a little different than the one we saw previously in Section <a href="6-regression.html#model1">6.1</a> where the explanatory variable <span class="math inline">\(x\)</span> was numerical. We’ll study these differences shortly in Subsection <a href="6-regression.html#model2table">6.2.2</a>, but first we conduct our exploratory data analysis.</p>
<div id="model2EDA" class="section level3">
<h3><span class="header-section-number">6.2.1</span> Exploratory data analysis</h3>
<p>The data on the 142 countries can be found in the <code>gapminder</code> data frame included in the <code>gapminder</code> package. However, to keep things simple, let’s <code>filter()</code> for only observations/rows corresponding to the year 2007, <code>select()</code> only the subset of the variables we’ll consider in this chapter, and save this data in a new data frame called <code>gapminder2007</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(gapminder)
gapminder2007 &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span><span class="dv">2007</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(country, lifeExp, continent, gdpPercap)</code></pre>
<p>Recall from Section <a href="6-regression.html#model1EDA">6.1.1</a> that there are three common steps in an exploratory data analysis:</p>
<ol style="list-style-type: decimal">
<li>Most crucially: Looking at the raw data values.</li>
<li>Computing summary statistics, like means, medians, and interquartile ranges.</li>
<li>Creating data visualizations.</li>
</ol>
<p>Let’s perform the first common step in an exploratory data analysis: looking at the raw data values. You can do this by using RStudio’s spreadsheet viewer or by using the <code>glimpse()</code> command as introduced in Section <a href="2-getting-started.html#exploredataframes">2.4.3</a> on exploring data frames:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">glimpse</span>(gapminder2007)</code></pre>
<pre><code>Observations: 142
Variables: 4
$ country   &lt;fct&gt; Afghanistan, Albania, Algeria, Angola, Argentina, Australia…
$ lifeExp   &lt;dbl&gt; 43.8, 76.4, 72.3, 42.7, 75.3, 81.2, 79.8, 75.6, 64.1, 79.4,…
$ continent &lt;fct&gt; Asia, Europe, Africa, Africa, Americas, Oceania, Europe, As…
$ gdpPercap &lt;dbl&gt; 975, 5937, 6223, 4797, 12779, 34435, 36126, 29796, 1391, 33…</code></pre>
<p>Observe that <code>Observations: 142</code> indicates that there are 142 rows/observations in <code>gapminder2007</code>, where each row corresponds to one country. In other words, the <em>observational unit</em> are individual countries. Furthermore, observe that the variable <code>continent</code> is of type <code>&lt;fct&gt;</code>, which stands for “factor,” which is R’s way of encoding categorical variables.</p>
<p>While a full description of all the variables included in <code>gapminder</code> can be found by reading the associated help file by running <code>?gapminder</code> in the Console, let’s fully describe the 4 variables we selected in <code>gapminder2007</code>:</p>
<ol style="list-style-type: decimal">
<li><code>country</code>: An identification variable used to distinguish the 142 countries in the dataset.</li>
<li><code>lifeExp</code>: A numerical variable of that country’s life expectancy at birth. This is the outcome variable <span class="math inline">\(y\)</span> of interest.</li>
<li><code>continent</code>: A categorical variable with 5 levels i.e. possible categories: Africa, Asia, Americas, Europe, and Oceania. This is the explanatory variable <span class="math inline">\(x\)</span> of interest.</li>
<li><code>gdpPercap</code>: A numerical variable of that country’s GDP per capita in US inflation-adjusted dollars that we’ll use as another outcome variable <span class="math inline">\(y\)</span> in the Learning Check at the end of this section.</li>
</ol>
<p>Furthermore, let’s look at a random sample of 5 out of the 142 countries in Table <a href="6-regression.html#tab:model2-data-preview">6.5</a>. Note due to the random nature of the sampling, you will likely end up with a different subset of 5 rows.</p>
<pre class="sourceCode r"><code class="sourceCode r">gapminder2007 <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">sample_n</span>(<span class="dt">size =</span> <span class="dv">5</span>)</code></pre>
<table class="table" style="font-size: 16px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:model2-data-preview">TABLE 6.5: </span>Random sample of 5 out of 142 countries
</caption>
<thead>
<tr>
<th style="text-align:left;">
country
</th>
<th style="text-align:right;">
lifeExp
</th>
<th style="text-align:left;">
continent
</th>
<th style="text-align:right;">
gdpPercap
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Togo
</td>
<td style="text-align:right;">
58.4
</td>
<td style="text-align:left;">
Africa
</td>
<td style="text-align:right;">
883
</td>
</tr>
<tr>
<td style="text-align:left;">
Sao Tome and Principe
</td>
<td style="text-align:right;">
65.5
</td>
<td style="text-align:left;">
Africa
</td>
<td style="text-align:right;">
1598
</td>
</tr>
<tr>
<td style="text-align:left;">
Congo, Dem. Rep.
</td>
<td style="text-align:right;">
46.5
</td>
<td style="text-align:left;">
Africa
</td>
<td style="text-align:right;">
278
</td>
</tr>
<tr>
<td style="text-align:left;">
Lesotho
</td>
<td style="text-align:right;">
42.6
</td>
<td style="text-align:left;">
Africa
</td>
<td style="text-align:right;">
1569
</td>
</tr>
<tr>
<td style="text-align:left;">
Bulgaria
</td>
<td style="text-align:right;">
73.0
</td>
<td style="text-align:left;">
Europe
</td>
<td style="text-align:right;">
10681
</td>
</tr>
</tbody>
</table>
<p>Now that we’ve looked at the raw values in our <code>gapminder2007</code> data frame and obtained a sense of the data, let’s move on to next common step in an exploratory data analysis: computing summary statistics. Let’s once again apply the <code>skim()</code> function from the <code>skimr</code> package. Recall from our previous EDA that this function takes in a data frame, “skims” it, and returns commonly used summary statistics. Let’s take our <code>gapminder2007</code> data frame, <code>select()</code> only the outcome and explanatory variables <code>lifeExp</code> and <code>continent</code>, and pipe it into the <code>skim()</code> function:</p>
<pre class="sourceCode r"><code class="sourceCode r">gapminder2007 <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(lifeExp, continent) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">skim</span>()</code></pre>
<pre><code>Skim summary statistics
 n obs: 142 
 n variables: 2 

── Variable type:factor ────────────────────────────────────────────────────────
  variable missing complete   n n_unique                         top_counts ordered
 continent       0      142 142        5 Afr: 52, Asi: 33, Eur: 30, Ame: 25   FALSE

── Variable type:numeric ───────────────────────────────────────────────────────
 variable missing complete   n  mean    sd    p0   p25   p50   p75 p100
  lifeExp       0      142 142 67.01 12.07 39.61 57.16 71.94 76.41 82.6</code></pre>
<p>The <code>skim()</code> output now reports summaries for categorical variables (<code>Variable type:factor</code>) separately from the numerical variables (<code>Variable type:numeric</code>). For the categorical variable <code>continent</code> it now reports:</p>
<ul>
<li><code>missing</code>, <code>complete</code>, <code>n</code> which are the number of missing, complete, and total number of values as before.</li>
<li><code>n_unique</code>: The number of unique levels to this variable, corresponding to Africa, Asia, Americas, Europe, and Oceania.</li>
<li><code>top_counts</code>: In this case the top four counts: <code>Africa</code> has 52 corresponding to its 52 countries, <code>Asia</code> has 33, <code>Europe</code> has 30, and <code>Americas</code> has 25. Not displayed is <code>Oceania</code> with 2 countries.</li>
<li><code>ordered</code>: This tells is whether the categorical variable is “ordinal”: whether there is encoded hierarchy (like low, medium, high). In this case, it is not ordered.</li>
</ul>
<p>Turning our attention to the summary statistics of the numerical variable <code>lifeExp</code>, we observe that the global median life expectancy is 71.94, or in other words half of the world’s countries (71 countries) will have a life expectancy less than 71.94. The mean life expectancy of 67.01 is lower however. Why is the mean life expectancy lower than the median?</p>
<p>We can answer this question via the last of the three common steps in an exploratory data analysis: creating data visualizations. Let’s visualize the distribution of our outcome variable <span class="math inline">\(y\)</span> = <code>lifeExp</code> in Figure <a href="6-regression.html#fig:lifeExp2007hist">6.7</a>.</p>
<div class="figure" style="text-align: center"><span id="fig:lifeExp2007hist"></span>
<img src="moderndive_files/figure-html/lifeExp2007hist-1.png" alt="Histogram of Life Expectancy in 2007." width="\textwidth" />
<p class="caption">
FIGURE 6.7: Histogram of Life Expectancy in 2007.
</p>
</div>
<p>We see that this data is <em>left-skewed</em>, also known as <em>negatively</em>  skewed: there are a few countries with very low life expectancy that are bringing down the mean life expectancy. However, the median is less sensitive to the effects of such outliers, hence the median is greater than the mean in this case.</p>
<p>Remember however, that we want to compare life expectancies both between continents and within continents. In other words, our visualizations need to incorporate some notion of the variable <code>continent</code>. We can do this easily with a faceted histogram. Recall from Section <a href="3-viz.html#facets">3.6</a> that facets allow us to split a visualization by the different values of another variable. We display the resulting visualization in Figure <a href="6-regression.html#fig:catxplot0b">6.8</a> by adding a  <code>facet_wrap(~ continent, nrow = 2)</code> layer.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(gapminder2007, <span class="kw">aes</span>(<span class="dt">x =</span> lifeExp)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="dv">5</span>, <span class="dt">color =</span> <span class="st">&quot;white&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Life expectancy&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Number of countries&quot;</span>,
       <span class="dt">title =</span> <span class="st">&quot;Histogram of distribution of worldwide life expectancies&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>continent, <span class="dt">nrow =</span> <span class="dv">2</span>)</code></pre>
<div class="figure" style="text-align: center"><span id="fig:catxplot0b"></span>
<img src="moderndive_files/figure-html/catxplot0b-1.png" alt="Life expectancy in 2007." width="\textwidth" />
<p class="caption">
FIGURE 6.8: Life expectancy in 2007.
</p>
</div>
<p>We observe that unfortunately the distribution of African life expectancies is much lower than the other continents while in Europe life expectancies tend to be higher and do not vary as much. Both Asia and Africa have the most variation in life expectancies. There is the least variation in Oceania, but this greatly influenced by the fact that there are only two countries in Oceania: Australia and New Zealand.</p>
<p>Recall than an alternative visualization of the distribution of a numerical variable split by a categorical variable is by using a side-by-side boxplot via a <code>geom_boxplot()</code>; we map the categorical variable <code>continent</code> to the <span class="math inline">\(x\)</span>-axis and the different life expectancies within each continent on the <span class="math inline">\(y\)</span>-axis.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(gapminder2007, <span class="kw">aes</span>(<span class="dt">x =</span> continent, <span class="dt">y =</span> lifeExp)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_boxplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Continent&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Life expectancy (years)&quot;</span>,
       <span class="dt">title =</span> <span class="st">&quot;Life expectancy by continent&quot;</span>)</code></pre>
<div class="figure" style="text-align: center"><span id="fig:catxplot1"></span>
<img src="moderndive_files/figure-html/catxplot1-1.png" alt="Life expectancy in 2007." width="\textwidth" />
<p class="caption">
FIGURE 6.9: Life expectancy in 2007.
</p>
</div>
<p>Some people prefer comparing the distributions of a numerical variable between different levels of a categorical variable using a boxplot instead of a faceted histogram as we can make quick comparisons with imaginary horizontal lines. For example, observe in Figure <a href="6-regression.html#fig:catxplot1">6.9</a> that Oceania clearly tends to have the highest life expectancies given that we could draw an imaginary horizontal line at <span class="math inline">\(y\)</span> = 80. Furthermore, as we observed with in faceted histogram in Figure <a href="6-regression.html#fig:catxplot0b">6.8</a>, Africa and Asia have the biggest variation in life expectancy as evidenced by their large interquartile ranges i.e. the height of the boxes.</p>
<p>It’s important to remember however that the solid lines in the middle of the boxes correspond to the medians (i.e. the middle value) rather than the mean (the average). So, for example, if you look at Asia, the solid line denotes the median life expectancy of around 72 years. This indicates to us that half of all countries in Asia have a life expectancy below 72 years whereas half of all countries in Asia have a life expectancy above 72 years.</p>
<p>Let’s compute the median and mean life expectancy for each continent with a little more data wrangling and display the results in Table <a href="6-regression.html#tab:catxplot0">6.6</a>.</p>
<pre class="sourceCode r"><code class="sourceCode r">lifeExp_by_continent &lt;-<span class="st"> </span>gapminder2007 <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(continent) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">median =</span> <span class="kw">median</span>(lifeExp), <span class="dt">mean =</span> <span class="kw">mean</span>(lifeExp))</code></pre>
<table>
<caption>
<span id="tab:catxplot0">TABLE 6.6: </span>Life expectancy by continent
</caption>
<thead>
<tr>
<th style="text-align:left;">
continent
</th>
<th style="text-align:right;">
median
</th>
<th style="text-align:right;">
mean
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Africa
</td>
<td style="text-align:right;">
52.9
</td>
<td style="text-align:right;">
54.8
</td>
</tr>
<tr>
<td style="text-align:left;">
Americas
</td>
<td style="text-align:right;">
72.9
</td>
<td style="text-align:right;">
73.6
</td>
</tr>
<tr>
<td style="text-align:left;">
Asia
</td>
<td style="text-align:right;">
72.4
</td>
<td style="text-align:right;">
70.7
</td>
</tr>
<tr>
<td style="text-align:left;">
Europe
</td>
<td style="text-align:right;">
78.6
</td>
<td style="text-align:right;">
77.6
</td>
</tr>
<tr>
<td style="text-align:left;">
Oceania
</td>
<td style="text-align:right;">
80.7
</td>
<td style="text-align:right;">
80.7
</td>
</tr>
</tbody>
</table>
<p>Observe the order of the second column <code>median</code> life expectancy: Africa is lowest, the Americas and Asia are next with similar medians, then Europe, then Asia. This ordering corresponds to the ordering of the solid black lines inside the boxes in our side-by-side boxplot in Figure <a href="6-regression.html#fig:catxplot1">6.9</a>. Let’s now turn our attention to the values in the third column <code>mean</code>. Using Africa as a <em>baseline for comparison</em>, let’s start making relative comparisons of life expectancies for the other continents:</p>
<ol style="list-style-type: decimal">
<li>The mean life expectancy of the Americas is 73.6 - 54.8 = 18.8 years higher.</li>
<li>The mean life expectancy of Asia is 70.7 - 54.8 = 15.9 years higher.</li>
<li>The mean life expectancy of Europe is 77.6 - 54.8 = 22.8 years higher.</li>
<li>The mean life expectancy of Oceania is 80.7 - 54.8 = 25.9 years higher.</li>
</ol>
<p>Let’s put these values Table <a href="6-regression.html#tab:continent-mean-life-expectancies">6.7</a>, which we’ll revisit later on in this section.</p>
<table class="table" style="font-size: 16px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:continent-mean-life-expectancies">TABLE 6.7: </span>Mean life expectancy by continent and relative differences from mean for Africa.
</caption>
<thead>
<tr>
<th style="text-align:left;">
continent
</th>
<th style="text-align:right;">
mean
</th>
<th style="text-align:right;">
Difference relative to Africa
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Africa
</td>
<td style="text-align:right;">
54.8
</td>
<td style="text-align:right;">
0.0
</td>
</tr>
<tr>
<td style="text-align:left;">
Americas
</td>
<td style="text-align:right;">
73.6
</td>
<td style="text-align:right;">
18.8
</td>
</tr>
<tr>
<td style="text-align:left;">
Asia
</td>
<td style="text-align:right;">
70.7
</td>
<td style="text-align:right;">
15.9
</td>
</tr>
<tr>
<td style="text-align:left;">
Europe
</td>
<td style="text-align:right;">
77.6
</td>
<td style="text-align:right;">
22.8
</td>
</tr>
<tr>
<td style="text-align:left;">
Oceania
</td>
<td style="text-align:right;">
80.7
</td>
<td style="text-align:right;">
25.9
</td>
</tr>
</tbody>
</table>
<div class="learncheck">
<p>
<strong><em>Learning check</em></strong>
</p>
</div>
<p><strong>(LC6.4)</strong> Conduct a new exploratory data analysis with the same explanatory variable <span class="math inline">\(x\)</span> being <code>continent</code> but with <code>gdpPercap</code> as the new outcome variable <span class="math inline">\(y\)</span>. Remember, this involves three things:</p>
<ol style="list-style-type: decimal">
<li>Most crucially: Looking at the raw data values.</li>
<li>Computing summary statistics, like means, medians, and interquartile ranges.</li>
<li>Creating data visualizations.</li>
</ol>
<p>What can you say about the differences in GDP per capita between continents based on this exploration?</p>
<div class="learncheck">

</div>
</div>
<div id="model2table" class="section level3">
<h3><span class="header-section-number">6.2.2</span> Linear regression</h3>
<p>In Subsection <a href="6-regression.html#model1table">6.1.2</a> we introduced simple linear regression which involves modeling the relationship between a numerical outcome variable <span class="math inline">\(y\)</span> and a numerical explanatory variable <span class="math inline">\(x\)</span>. In our life expectancy example, we now instead have a categorical explanatory variable <span class="math inline">\(x\)</span> <code>continent</code>. However our model will not yield a “best-fitting” regression line like in Figure <a href="6-regression.html#fig:numxplot3">6.4</a>, but rather “offsets relative to a baseline for comparison.”</p>
<p>As we did in Section <a href="6-regression.html#model1table">6.1.2</a> when studying the relationship between teaching scores and beauty scores, let’s output the regression table for this model. Recall that this is done in two steps:</p>
<ol style="list-style-type: decimal">
<li>We first “fit” the linear regression model using the <code>lm(y~x, data)</code> function and save it in <code>lifeExp_model</code>.</li>
<li>We get the regression table by applying the <code>get_regression_table()</code> from the <code>moderndive</code> package to <code>lifeExp_model</code>.</li>
</ol>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Fit regression model:</span>
lifeExp_model &lt;-<span class="st"> </span><span class="kw">lm</span>(lifeExp <span class="op">~</span><span class="st"> </span>continent, <span class="dt">data =</span> gapminder2007)
<span class="co"># Get regression table:</span>
<span class="kw">get_regression_table</span>(lifeExp_model)</code></pre>
<table class="table" style="font-size: 16px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:catxplot4b">TABLE 6.8: </span>Linear regression table
</caption>
<thead>
<tr>
<th style="text-align:left;">
term
</th>
<th style="text-align:right;">
estimate
</th>
<th style="text-align:right;">
std_error
</th>
<th style="text-align:right;">
statistic
</th>
<th style="text-align:right;">
p_value
</th>
<th style="text-align:right;">
lower_ci
</th>
<th style="text-align:right;">
upper_ci
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
intercept
</td>
<td style="text-align:right;">
54.8
</td>
<td style="text-align:right;">
1.02
</td>
<td style="text-align:right;">
53.45
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
52.8
</td>
<td style="text-align:right;">
56.8
</td>
</tr>
<tr>
<td style="text-align:left;">
continentAmericas
</td>
<td style="text-align:right;">
18.8
</td>
<td style="text-align:right;">
1.80
</td>
<td style="text-align:right;">
10.45
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
15.2
</td>
<td style="text-align:right;">
22.4
</td>
</tr>
<tr>
<td style="text-align:left;">
continentAsia
</td>
<td style="text-align:right;">
15.9
</td>
<td style="text-align:right;">
1.65
</td>
<td style="text-align:right;">
9.68
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
12.7
</td>
<td style="text-align:right;">
19.2
</td>
</tr>
<tr>
<td style="text-align:left;">
continentEurope
</td>
<td style="text-align:right;">
22.8
</td>
<td style="text-align:right;">
1.70
</td>
<td style="text-align:right;">
13.47
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
19.5
</td>
<td style="text-align:right;">
26.2
</td>
</tr>
<tr>
<td style="text-align:left;">
continentOceania
</td>
<td style="text-align:right;">
25.9
</td>
<td style="text-align:right;">
5.33
</td>
<td style="text-align:right;">
4.86
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
15.4
</td>
<td style="text-align:right;">
36.5
</td>
</tr>
</tbody>
</table>
<p>Let’s once again focus on the values in the <code>term</code> and <code>estimate</code> columns of Table <a href="6-regression.html#tab:catxplot4b">6.8</a>. Why are there now 5 rows? Let’s break them down one-by-one:</p>
<ol style="list-style-type: decimal">
<li><code>intercept</code> here corresponds to the mean life expectancy of countries in Africa of 54.8 years.</li>
<li><code>continentAmericas</code> corresponds to countries in the <code>continent</code> of the Americas and the value +18.8 is the same difference in mean life expectancy relative to Africa we displayed in Table <a href="6-regression.html#tab:continent-mean-life-expectancies">6.7</a>. In other words, the mean life expectancy of countries in the Americas is 54.8 + 18.8 = 73.6.</li>
<li><code>continentAsia</code> corresponds to countries in the <code>continent</code> of Asia and the value +15.9 is the same difference in mean life expectancy relative to Africa we displayed in Table <a href="6-regression.html#tab:continent-mean-life-expectancies">6.7</a>. In other words, the mean life expectancy of countries in Asia is 54.8 + 15.9 = 70.7.</li>
<li><code>continentEurope</code> corresponds to countries in the <code>continent</code> of Europe and the value +22.8 is the same difference in mean life expectancy relative to Africa we displayed in Table <a href="6-regression.html#tab:continent-mean-life-expectancies">6.7</a>. In other words, the mean life expectancy of countries in Europe is 54.8 + 22.8 = 77.6.</li>
<li><code>continentOceania</code> corresponds to countries in the <code>continent</code> of Oceania and the value +25.9 is the same difference in mean life expectancy relative to Africa we displayed in Table <a href="6-regression.html#tab:continent-mean-life-expectancies">6.7</a>. In other words, the mean life expectancy of countries in the Oceania is 54.8 + 25.9 = 80.7.</li>
</ol>
<p>In other words, the 5 values in the <code>estimate</code> correspond to:</p>
<ol style="list-style-type: decimal">
<li>The “baseline for comparison” continent Africa (the intercept).</li>
<li>Four “offsets” from this baseline for the remaining 4 continents: the Americas, Asia, Europe, and Oceania.</li>
</ol>
<p>You might be asking at this point why was Africa chosen as the “baseline for comparison” group. For no other reason than it comes first alphabetically of the five continents; by default R arranges factors/categorical variables in alphanumeric order. However you can change this baseline group to be another continent if you manipulate the variable <code>continent</code>’s factor “levels” using the <code>forcats</code> package. See <a href="https://r4ds.had.co.nz/factors.html">Chapter 15</a> of Garrett Grolemund and Hadley Wickham’s book <span class="citation">(Grolemund and Wickham <a href="#ref-rds2016">2016</a>)</span> for examples.</p>
<p>Let’s now write the equation for our fitted values <span class="math inline">\(\widehat{y} = \widehat{\text{life exp}}\)</span>.</p>
<p><span class="math display">\[
\begin{aligned}
\widehat{y} = \widehat{\text{life exp}} &amp;= b_0 + b_{\text{Amer}}\cdot\mathbb{1}_{\mbox{Amer}}(x) + b_{\text{Asia}}\cdot\mathbb{1}_{\mbox{Asia}}(x) + \\
&amp; \qquad b_{\text{Euro}}\cdot\mathbb{1}_{\mbox{Euro}}(x) + b_{\text{Ocean}}\cdot\mathbb{1}_{\mbox{Ocean}}(x)\\
&amp;= 54.8 + 18.8\cdot\mathbb{1}_{\mbox{Amer}}(x) + 15.9\cdot\mathbb{1}_{\mbox{Asia}}(x) + \\
&amp; \qquad 22.8\cdot\mathbb{1}_{\mbox{Euro}}(x) + 25.9\cdot\mathbb{1}_{\mbox{Ocean}}(x)
\end{aligned}
\]</span></p>
<p>Whoa! That looks very daunting! Don’t fret however, as once you understand what all the elements mean, things simply greatly. First, <span class="math inline">\(\mathbb{1}_{A}(x)\)</span> is what’s known in mathematics as an “indicator function” that takes only one of two possible values, 0 and 1, where</p>
<p><span class="math display">\[
\mathbb{1}_{A}(x) = \left\{
\begin{array}{ll}
1 &amp; \text{if } x \text{ is in } A \\
0 &amp; \text{if } \text{otherwise} \end{array}
\right.
\]</span></p>
<p>In a statistical modeling context this is also known as a “dummy variable”. In our case, let’s consider the first such indicator variable; this indicator function returns 1 if a country is in the Americas, 0 otherwise.</p>
<p><span class="math display">\[
\mathbb{1}_{\mbox{Amer}}(x) = \left\{
\begin{array}{ll}
1 &amp; \text{if } \text{country } x \text{ is in the Americas} \\
0 &amp; \text{otherwise}\end{array}
\right.
\]</span></p>
<p>Second, <span class="math inline">\(b_0\)</span> corresponds to the intercept as before; in this case its the mean life expectancy of all countries in Africa. Third, the <span class="math inline">\(b_{\text{Amer}}\)</span>, <span class="math inline">\(b_{\text{Asia}}\)</span>, <span class="math inline">\(b_{\text{Euro}}\)</span>, and <span class="math inline">\(b_{\text{Ocean}}\)</span> represent the 4 “offsets relative to the baseline for comparison” in the regression table output in Table <a href="6-regression.html#tab:catxplot4b">6.8</a>: <code>continentAmericas</code>, <code>continentAsia</code>, <code>continentEurope</code>, and <code>continentOceania</code>.</p>
<p>Let’s put this all together and compute the fitted value <span class="math inline">\(\widehat{y} = \widehat{\text{life exp}}\)</span> for a country in Africa. Since the country is in Africa, all four indicator functions <span class="math inline">\(\mathbb{1}_{\mbox{Amer}}(x)\)</span>, <span class="math inline">\(\mathbb{1}_{\mbox{Asia}}(x)\)</span>, <span class="math inline">\(\mathbb{1}_{\mbox{Euro}}(x)\)</span>, and <span class="math inline">\(\mathbb{1}_{\mbox{Ocean}}(x)\)</span> will equal 0, and thus:</p>
<p><span class="math display">\[
\begin{aligned}
\widehat{\text{life exp}} &amp;= b_0 + b_{\text{Amer}}\cdot\mathbb{1}_{\mbox{Amer}}(x) + b_{\text{Asia}}\cdot\mathbb{1}_{\mbox{Asia}}(x)
+ \\
&amp; \qquad b_{\text{Euro}}\cdot\mathbb{1}_{\text{Euro}}(x) + b_{\text{Ocean}}\cdot\mathbb{1}_{\text{Ocean}}(x)\\
&amp;= 54.8 + 18.8\cdot\mathbb{1}_{\text{Amer}}(x) + 15.9\cdot\mathbb{1}_{\text{Asia}}(x)
+ \\
&amp; \qquad 22.8\cdot\mathbb{1}_{\text{Euro}}(x) + 25.9\cdot\mathbb{1}_{\text{Ocean}}(x)\\
&amp;= 54.8 + 18.8\cdot 0 + 15.9\cdot 0 + 22.8\cdot 0 + 25.9\cdot 0\\
&amp;= 54.8
\end{aligned}
\]</span></p>
<p>In other words, all that’s left is the intercept <span class="math inline">\(b_0\)</span> corresponding to the average life expectancy of African countries of 54.8 years. Next, say we are considering a country in the Americas. In this case only the indicator function <span class="math inline">\(\mathbb{1}_{\mbox{Amer}}(x)\)</span> for the Americas will equal 1, while all the others will equal 0, and thus:</p>
<p><span class="math display">\[
\begin{aligned}
\widehat{\text{life exp}} &amp;= 54.8 + 18.8\cdot\mathbb{1}_{\mbox{Amer}}(x) + 15.9\cdot\mathbb{1}_{\mbox{Asia}}(x)
+ 22.8\cdot\mathbb{1}_{\mbox{Euro}}(x) + \\
&amp; \qquad 25.9\cdot\mathbb{1}_{\mbox{Ocean}}(x)\\
&amp;= 54.8 + 18.8\cdot 1 + 15.9\cdot 0 + 22.8\cdot 0 + 25.9\cdot 0\\
&amp;= 54.8 + 18.8\\
&amp;= 72.9
\end{aligned}
\]</span></p>
<p>which is the mean life expectancy for countries in the Americas of 72.9 years we computed in the previous subsection in Table <a href="6-regression.html#tab:continent-mean-life-expectancies">6.7</a>. Note the “offset from the baseline for comparison” here is +18.8 years. Let’s do one more. Say we are considering a country in Asia. In this case only the indicator function <span class="math inline">\(\mathbb{1}_{\mbox{Asia}}(x)\)</span> for Asia will equal 1, while all the others will equal 0, and thus:</p>
<p><span class="math display">\[
\begin{aligned}
\widehat{\text{life exp}} &amp;= 54.8 + 18.8\cdot\mathbb{1}_{\mbox{Amer}}(x) + 15.9\cdot\mathbb{1}_{\mbox{Asia}}(x)
+ 22.8\cdot\mathbb{1}_{\mbox{Euro}}(x) + \\
&amp; \qquad 25.9\cdot\mathbb{1}_{\mbox{Ocean}}(x)\\
&amp;= 54.8 + 18.8\cdot 0 + 15.9\cdot 1 + 22.8\cdot 0 + 25.9\cdot 0\\
&amp;= 54.8 + 15.9\\
&amp;= 70.7
\end{aligned}
\]</span></p>
<p>which is the mean life expectancy for countries in the Americas of 72.9 years we computed in the previous subsection in Table <a href="6-regression.html#tab:continent-mean-life-expectancies">6.7</a>. Note the “offset from the baseline for comparison” here is +15.9 years.</p>
<p>Let’s generalize this idea a bit. If we fit a linear regression model using a categorical explanatory variable <span class="math inline">\(x\)</span> that has <span class="math inline">\(k\)</span> levels i.e. possible categories, a regression model will return an intercept and <span class="math inline">\(k - 1\)</span> “offsets.” In our case, since there are <span class="math inline">\(k = 5\)</span> continents, the regression model returns an intercept corresponding to the baseline for comparison Africa and <span class="math inline">\(k - 1 = 4\)</span> offsets corresponding to the Americas, Asia, Europe, and Oceania.</p>
<p>Phew! That was a lot of work! Understanding a regression table output when you’re using a categorical explanatory variable is a topic that many new regression practitioners struggle with. The only real remedy for these struggles is practice, practice, practice. However, once you equip yourselves with an understanding of how to create regression models using categorical explanatory variables, you’ll be able to incorporate many new variables in your models, given the large amount of the world’s data that is categorical. If you feel like you’re still struggling at this point however, we suggest you closely compare Tables <a href="6-regression.html#tab:continent-mean-life-expectancies">6.7</a> and <a href="6-regression.html#tab:catxplot4b">6.8</a> and note how you can compute all the values from one table using the values in the other.</p>
<div class="learncheck">
<p>
<strong><em>Learning check</em></strong>
</p>
</div>
<p><strong>(LC6.5)</strong> Fit a new linear regression using <code>lm(gdpPercap ~ continent, data = gapminder2007)</code> where <code>gdpPercap</code> is the new outcome variable <span class="math inline">\(y\)</span>. Get information about the “best-fitting” line from the regression table by applying the <code>get_regression_table()</code> function. How do the regression results match up with the results from your previous exploratory data analysis?</p>
<div class="learncheck">

</div>
</div>
<div id="model2points" class="section level3">
<h3><span class="header-section-number">6.2.3</span> Observed/fitted values and residuals</h3>
<p>Recall in Subsection <a href="6-regression.html#model1points">6.1.3</a>, we defined the following three concepts:</p>
<ol style="list-style-type: decimal">
<li>Observed values <span class="math inline">\(y\)</span>, or the observed value of the outcome variable </li>
<li>Fitted values <span class="math inline">\(\widehat{y}\)</span>, or the value on the regression line for a given <span class="math inline">\(x\)</span> value</li>
<li>Residuals <span class="math inline">\(y - \widehat{y}\)</span>, or the error between the observed value and the fitted value</li>
</ol>
<p>We obtained these values and other values using the <code>get_regression_points()</code> function from the moderndive package. This time however, let’s add an <code>ID = &quot;country&quot;</code> argument: this is telling the function to use the variable <code>country</code> in <code>gapminder2007</code> as an identification variable in the output. This will help contextualize our analysis by matching values to countries.</p>
<pre class="sourceCode r"><code class="sourceCode r">regression_points &lt;-<span class="st"> </span><span class="kw">get_regression_points</span>(lifeExp_model, <span class="dt">ID =</span> <span class="st">&quot;country&quot;</span>)
regression_points</code></pre>
<table class="table" style="font-size: 16px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:model2-residuals">TABLE 6.9: </span>Regression points (First 10 out of 142 countries)
</caption>
<thead>
<tr>
<th style="text-align:left;">
country
</th>
<th style="text-align:right;">
lifeExp
</th>
<th style="text-align:left;">
continent
</th>
<th style="text-align:right;">
lifeExp_hat
</th>
<th style="text-align:right;">
residual
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Afghanistan
</td>
<td style="text-align:right;">
43.8
</td>
<td style="text-align:left;">
Asia
</td>
<td style="text-align:right;">
70.7
</td>
<td style="text-align:right;">
-26.900
</td>
</tr>
<tr>
<td style="text-align:left;">
Albania
</td>
<td style="text-align:right;">
76.4
</td>
<td style="text-align:left;">
Europe
</td>
<td style="text-align:right;">
77.6
</td>
<td style="text-align:right;">
-1.226
</td>
</tr>
<tr>
<td style="text-align:left;">
Algeria
</td>
<td style="text-align:right;">
72.3
</td>
<td style="text-align:left;">
Africa
</td>
<td style="text-align:right;">
54.8
</td>
<td style="text-align:right;">
17.495
</td>
</tr>
<tr>
<td style="text-align:left;">
Angola
</td>
<td style="text-align:right;">
42.7
</td>
<td style="text-align:left;">
Africa
</td>
<td style="text-align:right;">
54.8
</td>
<td style="text-align:right;">
-12.075
</td>
</tr>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:right;">
75.3
</td>
<td style="text-align:left;">
Americas
</td>
<td style="text-align:right;">
73.6
</td>
<td style="text-align:right;">
1.712
</td>
</tr>
<tr>
<td style="text-align:left;">
Australia
</td>
<td style="text-align:right;">
81.2
</td>
<td style="text-align:left;">
Oceania
</td>
<td style="text-align:right;">
80.7
</td>
<td style="text-align:right;">
0.515
</td>
</tr>
<tr>
<td style="text-align:left;">
Austria
</td>
<td style="text-align:right;">
79.8
</td>
<td style="text-align:left;">
Europe
</td>
<td style="text-align:right;">
77.6
</td>
<td style="text-align:right;">
2.180
</td>
</tr>
<tr>
<td style="text-align:left;">
Bahrain
</td>
<td style="text-align:right;">
75.6
</td>
<td style="text-align:left;">
Asia
</td>
<td style="text-align:right;">
70.7
</td>
<td style="text-align:right;">
4.907
</td>
</tr>
<tr>
<td style="text-align:left;">
Bangladesh
</td>
<td style="text-align:right;">
64.1
</td>
<td style="text-align:left;">
Asia
</td>
<td style="text-align:right;">
70.7
</td>
<td style="text-align:right;">
-6.666
</td>
</tr>
<tr>
<td style="text-align:left;">
Belgium
</td>
<td style="text-align:right;">
79.4
</td>
<td style="text-align:left;">
Europe
</td>
<td style="text-align:right;">
77.6
</td>
<td style="text-align:right;">
1.792
</td>
</tr>
</tbody>
</table>
<p>Observe in Table <a href="6-regression.html#tab:model2-residuals">6.9</a></p>
<ul>
<li><code>lifeExp_hat</code> are the fitted values <span class="math inline">\(\widehat{y}\)</span> = <span class="math inline">\(\widehat{\text{lifeexp}}\)</span>.</li>
<li>If you look closely, there are only 5 possible values for <code>lifeExp_hat</code>. These correspond to the 5 mean life expectancies for the 5 continents we displayed in Table <a href="6-regression.html#tab:continent-mean-life-expectancies">6.7</a>: Africa 54.8, the Americas 73.6, Asia 70.7, Europe 77.6, and Oceania 80.7</li>
<li>The <code>residual</code> column is simply <span class="math inline">\(y - \widehat{y}\)</span> = <code>lifeexp - lifeexp_hat</code>. These values can be interpreted the deviation of a country’s life expectancy from it’s continent’s average life expectancy. For example, look at the the first row Table <a href="6-regression.html#tab:model2-residuals">6.9</a> corresponding to Afghanistan. The residual of <span class="math inline">\(y - \widehat{y}\)</span> = 43.8 - 70.7 = -26.9 is indicating that Afghanistan’s life expectancy is a whopping 26.9 years lower than the mean life expectancy of all Asia countries. This can in part be explained by the many years of war that country has suffered.</li>
</ul>
<div class="learncheck">
<p>
<strong><em>Learning check</em></strong>
</p>
</div>
<p><strong>(LC6.6)</strong> Using either the sorting functionality of RStudio’s spreadsheet viewer or using the data wrangling tools you learned in Chapter <a href="4-wrangling.html#wrangling">4</a>, identify the 5 countries with the 5 smallest (most negative) residuals? What do these negative residuals say about their life expectancy relative to their continents?</p>
<p><strong>(LC6.7)</strong> Repeat the above, but identify the 5 countries with the 5 largest (most positive) residuals. What do these negative residuals say about their life expectancy relative to their continents?</p>
<div class="learncheck">

</div>
</div>
</div>
<div id="related-topics" class="section level2">
<h2><span class="header-section-number">6.3</span> Related topics</h2>
<div id="correlation-is-not-causation" class="section level3">
<h3><span class="header-section-number">6.3.1</span> Correlation is not necessarily causation</h3>
<p>Recall that in Section <a href="6-regression.html#model1">6.1</a> we’ve been very cautious when interpreting regression slope coefficients. We always discussed the “associated” effect of an explanatory variable <span class="math inline">\(x\)</span> on an outcome variable <span class="math inline">\(y\)</span>. For example our statement from Subsection <a href="6-regression.html#model1table">6.1.2</a> that “for every increase of 1 unit in <code>bty_avg</code>, there is an <em>associated</em> increase of, <em>on average</em>, 18.802 units of <code>score</code>.” We include the term “associated” to be extra careful not suggest we are making a <em>causal</em> statement. So while beauty score <code>bty_avg</code> is positively correlated with teaching <code>score</code>, we can’t necessarily make any statements about beauty scores’ direct causal effects on teaching score without more information on how this study was conducted.</p>
<p>For example, let’s say an instructor has their <code>bty_avg</code> reevaluated after taking steps to try to boost their “beauty” score like changing their wardrobe. Does this mean that they will suddenly become a better instructor? Will they necessarily start getting higher teaching scores from students? Maybe?</p>
<p>Here is another example: a not-so-great medical doctor goes through their medical records and finds that patients who slept with their shoes on tended to wake up more with headaches. So this doctor declares “Sleeping with shoes on cause headaches!”</p>
<div class="figure" style="text-align: center"><span id="fig:moderndive-figure-causal-graph-2"></span>
<img src="images/ss/head.png" alt="Does sleeping with shoes on cause headaches?" width="\textwidth" />
<p class="caption">
FIGURE 6.10: Does sleeping with shoes on cause headaches?
</p>
</div>
<p>However as some of you might have guessed, if someone is sleeping with their shoes on, it’s likely because they are intoxicated from alcohol. Furthermore, higher levels of drinking leads to more hangovers, and hence more headaches. In this instance, alcohol is what’s known as a <em>confounding/lurking</em> variable. It “lurks” behind the scenes, confounding or making less apparent, the causal effect (if any) of “sleeping with shoes on” with waking up with a headache. We can summarize this notion in Figure <a href="6-regression.html#fig:moderndive-figure-causal-graph">6.11</a> with a <em>causal graph</em> where:</p>
<ul>
<li>Y is an <em>outcome</em> variable; here “waking up with a headache.”</li>
<li>X is a <em>treatment</em> variable whose causal effect we are interested in; here “sleeping with shoes on.”</li>
</ul>
<div class="figure" style="text-align: center"><span id="fig:moderndive-figure-causal-graph"></span>
<img src="images/flowcharts/flowchart.009-cropped.png" alt="Causal graph." width="\textwidth" />
<p class="caption">
FIGURE 6.11: Causal graph.
</p>
</div>
<p>To study the relationship between Y and X, we could use a regression model where the outcome variable is set to Y and the explanatory variable is set to be X, as you’ve been doing throughout this chapter. However, Figure <a href="6-regression.html#fig:moderndive-figure-causal-graph">6.11</a> also includes a third variable with arrows pointing at both X and Y:</p>
<ul>
<li>Z is a <em>confounding</em> variable  that affects both X &amp; Y thus “confounding” their relationship; here “alcohol”</li>
</ul>
<p>Alcohol will both cause people to be more likely to sleep with their shoes on as well as be more likely to wake up with a headache. Thus any regression model of the relationship between X and Y needs to also use Z as an explanatory variable as well. In other words our doctor needs to take into account who had been drinking the night before. We’ll start covering multiple regression models that allows us to incorporate more than one variable in the next chapter.</p>
<p>Establishing causation is a tricky problem and frequently takes either carefully designed experiments or methods to control for the effects of potential confounding variables. Both these approaches attempt to either take them into account all possible confounding variables as best they can or negate their impact. This allows researchers to focus only on the relationship between the outcome variable Y and the treatment variable X.</p>
<p>As you read news stories, be careful to not fall into the trap of thinking the correlation necessarily implies causation. Check out <a href="http://www.tylervigen.com/spurious-correlations">Spurious Correlations</a> for some examples of rather comical examples of variables that are correlated, but definitely are not causally related.</p>
</div>
<div id="leastsquares" class="section level3">
<h3><span class="header-section-number">6.3.2</span> Best fitting line</h3>
<p>Regression lines are also known as “best fitting” lines. But what do we mean by best? Let’s unpack the criteria that is used by regression to determine best. Recall the plot in Figure <a href="6-regression.html#fig:numxplot4">6.6</a> where for a instructor with a beauty score of <span class="math inline">\(x\)</span> = 7.333 we mark with</p>
<ul>
<li>Red circle: The <em>observed value</em> <span class="math inline">\(y\)</span> = 4.9 is this course’s instructor’s actual teaching score.</li>
<li>Red square: The <em>fitted value</em> <span class="math inline">\(\widehat{y}\)</span> is value on the regression line for <span class="math inline">\(x\)</span> = <code>bty_avg</code> = 7.333. This value is computed using the intercept and slope in the previous regression table:</li>
</ul>
<p><span class="math display">\[\widehat{y} = b_0 + b_1 \cdot x = 54.806 + 18.802 \cdot 7.333 = 4.369\]</span></p>
<ul>
<li>Blue arrow: The length of this arrow is the <em>residual</em> and is computed by subtracting the fitted value <span class="math inline">\(\widehat{y}\)</span> from the observed value <span class="math inline">\(y\)</span>. The residual can be thought of as the error or “lack of fit”. In the case of this course’s instructor, it is <span class="math inline">\(y - \widehat{y}\)</span> = 4.9 - 4.369 = 0.531.</li>
</ul>
<p>We redisplay this information in the top-left plot of Figure <a href="6-regression.html#fig:best-fitting-line">6.12</a>. Furthermore, let’s repeat this for three more arbitrarily chosen course’s instructors:</p>
<ol style="list-style-type: decimal">
<li>A course whose instructor had a beauty score <span class="math inline">\(x\)</span> = 2.333 and teaching score <span class="math inline">\(y\)</span> = 2.7. The residual in this case is 2.7 - 4.036 = -1.336, which we mark with a new blue arrow in the top-right plot.</li>
<li>A course whose instructor had a beauty score <span class="math inline">\(x\)</span> = 3.667 and teaching score <span class="math inline">\(y\)</span> = 4.4. The residual in this case is 4.4 - 4.125 = 0.2753, which we mark with a new blue arrow in the bottom-left plot.</li>
<li>A course whose instructor had a beauty score <span class="math inline">\(x\)</span> = 6 and teaching score <span class="math inline">\(y\)</span> = 3.8. The residual in this case is 3.8 - 4.28 = -0.4802, which we mark with a new blue arrow in the bottom-right plot.</li>
</ol>
<div class="figure" style="text-align: center"><span id="fig:best-fitting-line"></span>
<img src="moderndive_files/figure-html/best-fitting-line-1.png" alt="Example of observed value, fitted value, and residual." width="\textwidth" />
<p class="caption">
FIGURE 6.12: Example of observed value, fitted value, and residual.
</p>
</div>
<p>Now say we repeated this process of computing residuals for all 463 courses’ instructors, then we squared all the residuals, and then we summed them. We call this quantity the “sum of squared residuals” and it is a measure of the “lack-of-fit” of a model to a cloud of point where larger values indicate a bigger “lack of fit.” If the blue regression line perfectly fits the cloud of points, then the sum of squared residuals is 0. This is because if the blue regression line fits all the points perfectly, then the fitted value <span class="math inline">\(\widehat{y}\)</span> equals the observed value <span class="math inline">\(y\)</span> in all cases, and hence the residual <span class="math inline">\(y-\widehat{y}\)</span> = 0 in all cases, and the sum of a large number of 0’s is still 0.</p>
<p>Furthermore, of all possible lines we can draw through the cloud of 463 points, the blue regression line minimizes this value. In other words, the blue regression and its corresponding fitted values <span class="math inline">\(\widehat{y}\)</span> minimizes the sum of the squared residuals:</p>
<p><span class="math display">\[
\sum_{i=1}^{n}(y_i - \widehat{y}_i)^2
\]</span></p>
<p>Let’s use our data wrangling tools from Chapter <a href="4-wrangling.html#wrangling">4</a> to compute the sum of squared residuals quantity exactly:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Fit regression model:</span>
score_model &lt;-<span class="st"> </span><span class="kw">lm</span>(score <span class="op">~</span><span class="st"> </span>bty_avg, <span class="dt">data =</span> evals_ch6)

<span class="co"># Get regression points:</span>
regression_points &lt;-<span class="st"> </span><span class="kw">get_regression_points</span>(score_model)
regression_points</code></pre>
<pre><code># A tibble: 463 x 5
      ID score bty_avg score_hat residual
   &lt;int&gt; &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
 1     1   4.7    5         4.21    0.486
 2     2   4.1    5         4.21   -0.114
 3     3   3.9    5         4.21   -0.314
 4     4   4.8    5         4.21    0.586
 5     5   4.6    3         4.08    0.52 
 6     6   4.3    3         4.08    0.22 
 7     7   2.8    3         4.08   -1.28 
 8     8   4.1    3.33      4.10   -0.002
 9     9   3.4    3.33      4.10   -0.702
10    10   4.5    3.17      4.09    0.409
# … with 453 more rows</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Compute sum of squared residuals</span>
regression_points <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">squared_residuals =</span> residual<span class="op">^</span><span class="dv">2</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">sum_of_squared_residuals =</span> <span class="kw">sum</span>(squared_residuals))</code></pre>
<pre><code># A tibble: 1 x 1
  sum_of_squared_residuals
                     &lt;dbl&gt;
1                     132.</code></pre>
<p>Any other line draw in the figure would yield a sum of squared residuals greater than 132; this is a mathematically guaranteed fact that can be proven via calculus and linear algebra. That’s why alternative names for the linear regression line are the <strong>best fitting line</strong> as well as the <strong>least-squares line</strong>. But why do we square the residuals (i.e. the arrow lengths)? We do this so that positive and negative deviations of the same amount are treated equally.</p>
<div class="learncheck">
<p>
<strong><em>Learning check</em></strong>
</p>
</div>
<p><strong>(LC6.8)</strong> Note in the following plot there are 3 points marked with black dots along with:</p>
<ul>
<li>The “best” fitting regression line in blue</li>
<li>An arbitrarily chosen line in dashed red</li>
<li>Another arbitrarily chosen line in dashed green</li>
</ul>
<div class="figure" style="text-align: center"><span id="fig:three-lines"></span>
<img src="moderndive_files/figure-html/three-lines-1.png" alt="Regression line and two others." width="\textwidth" />
<p class="caption">
FIGURE 6.13: Regression line and two others.
</p>
</div>
<p>Compute the sum of squared residuals by hand for each line and show that of these three lines, the regression line in blue has the smallest value.</p>
<div class="learncheck">

</div>
</div>
<div id="underthehood" class="section level3">
<h3><span class="header-section-number">6.3.3</span> <code>get_regression_x()</code> functions</h3>
<p>Recall in this chapter we introduced two functions from the <code>moderndive</code> package:</p>
<ol style="list-style-type: decimal">
<li><code>get_regression_table()</code> function that returns a regression table in Subsection <a href="6-regression.html#model1table">6.1.2</a> and the</li>
<li><code>get_regression_points()</code> function that returns point-by-point information from a regression model In Subsection <a href="6-regression.html#model1points">6.1.3</a>.</li>
</ol>
<p>What is going on behind the scenes with the <code>get_regression_table()</code> and <code>get_regression_points()</code>? We mentioned that these were examples of <em>wrapper functions</em>: functions that takes other pre-existing functions and “wraps” them in a single function that hide the user from its inner workings. This way all the user needs to worry about is what the input looks like and what the output looks like. In this subsection we’ll “get under the hood” of these functions and see how the “engine” of these wrapper functions work.</p>
<p>Recall our two step process to generated a regression table from Subsection <a href="6-regression.html#model1table">6.1.2</a>:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Fit regression model:</span>
score_model &lt;-<span class="st"> </span><span class="kw">lm</span>(score <span class="op">~</span><span class="st"> </span>bty_avg, <span class="dt">data =</span> evals_ch6)
<span class="co"># Get regression table:</span>
<span class="kw">get_regression_table</span>(score_model)</code></pre>
<table class="table" style="font-size: 16px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:recall-table">TABLE 6.10: </span>Regression table.
</caption>
<thead>
<tr>
<th style="text-align:left;">
term
</th>
<th style="text-align:right;">
estimate
</th>
<th style="text-align:right;">
std_error
</th>
<th style="text-align:right;">
statistic
</th>
<th style="text-align:right;">
p_value
</th>
<th style="text-align:right;">
lower_ci
</th>
<th style="text-align:right;">
upper_ci
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
intercept
</td>
<td style="text-align:right;">
3.880
</td>
<td style="text-align:right;">
0.076
</td>
<td style="text-align:right;">
50.96
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3.731
</td>
<td style="text-align:right;">
4.030
</td>
</tr>
<tr>
<td style="text-align:left;">
bty_avg
</td>
<td style="text-align:right;">
0.067
</td>
<td style="text-align:right;">
0.016
</td>
<td style="text-align:right;">
4.09
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.035
</td>
<td style="text-align:right;">
0.099
</td>
</tr>
</tbody>
</table>
<p>The <code>get_regression_table()</code> wrapper function takes two pre-existing functions in other R packages</p>
<ul>
<li>the <code>tidy()</code>  function from the <a href="https://broom.tidyverse.org/"><code>broom</code> package</a> and</li>
<li>the <code>clean_names()</code>  function from the <a href="https://github.com/sfirke/janitor"><code>janitor</code> package</a></li>
</ul>
<p>and “wraps” them in a single function that takes in a saved <code>lm()</code> linear model model, here <code>score_model</code>, and returns a regression table saved as a “tidy” data frame. Here is how we used the <code>tidy()</code> and <code>clean_names()</code> functions:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(broom)
<span class="kw">library</span>(janitor)
score_model <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">tidy</span>(<span class="dt">conf.int =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate_if</span>(is.numeric, round, <span class="dt">digits =</span> <span class="dv">3</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">clean_names</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">rename</span>(<span class="dt">lower_ci =</span> conf_low,
         <span class="dt">upper_ci =</span> conf_high)</code></pre>
<pre><code>
Attaching package: &#39;janitor&#39;</code></pre>
<pre><code>The following objects are masked from &#39;package:stats&#39;:

    chisq.test, fisher.test</code></pre>
<table class="table" style="font-size: 16px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:regtable-broom">TABLE 6.11: </span>Regression table using tidy() from broom package.
</caption>
<thead>
<tr>
<th style="text-align:left;">
term
</th>
<th style="text-align:right;">
estimate
</th>
<th style="text-align:right;">
std_error
</th>
<th style="text-align:right;">
statistic
</th>
<th style="text-align:right;">
p_value
</th>
<th style="text-align:right;">
lower_ci
</th>
<th style="text-align:right;">
upper_ci
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
(Intercept)
</td>
<td style="text-align:right;">
3.880
</td>
<td style="text-align:right;">
0.076
</td>
<td style="text-align:right;">
50.96
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3.731
</td>
<td style="text-align:right;">
4.030
</td>
</tr>
<tr>
<td style="text-align:left;">
bty_avg
</td>
<td style="text-align:right;">
0.067
</td>
<td style="text-align:right;">
0.016
</td>
<td style="text-align:right;">
4.09
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.035
</td>
<td style="text-align:right;">
0.099
</td>
</tr>
</tbody>
</table>
<p>Yikes! That’s a lot of code! So in order to simplify your lives, we made the editorial decision to “wrap” all the code into <code>get_regression_table()</code>, freeing you from the need to understand the inner workings of the function. (Note that the <code>mutate_if()</code> function is from the <code>dplyr</code> package and applies the <code>round()</code> function with 3 significant digits precision only to those variables that are numerical.)</p>
<p>Similarly, the <code>get_regression_points()</code> function is another wrapper function, but this time returning information about a regression like the fitted values, observed values, and the residuals. <code>get_regression_points()</code>  uses the <code>augment()</code>  function in the <a href="https://broom.tidyverse.org/"><code>broom</code> package</a> instead of the <code>tidy()</code> function as with <code>get_regression_table()</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(broom)
<span class="kw">library</span>(janitor)
score_model <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">augment</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate_if</span>(is.numeric, round, <span class="dt">digits =</span> <span class="dv">3</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">clean_names</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(<span class="op">-</span><span class="kw">c</span>(<span class="st">&quot;se_fit&quot;</span>, <span class="st">&quot;hat&quot;</span>, <span class="st">&quot;sigma&quot;</span>, <span class="st">&quot;cooksd&quot;</span>, <span class="st">&quot;std_resid&quot;</span>))</code></pre>
<table class="table" style="font-size: 16px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:regpoints-augment">TABLE 6.12: </span>Regression points using augment() from broom package.
</caption>
<thead>
<tr>
<th style="text-align:right;">
score
</th>
<th style="text-align:right;">
bty_avg
</th>
<th style="text-align:right;">
fitted
</th>
<th style="text-align:right;">
resid
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
4.7
</td>
<td style="text-align:right;">
5.00
</td>
<td style="text-align:right;">
4.21
</td>
<td style="text-align:right;">
0.486
</td>
</tr>
<tr>
<td style="text-align:right;">
4.1
</td>
<td style="text-align:right;">
5.00
</td>
<td style="text-align:right;">
4.21
</td>
<td style="text-align:right;">
-0.114
</td>
</tr>
<tr>
<td style="text-align:right;">
3.9
</td>
<td style="text-align:right;">
5.00
</td>
<td style="text-align:right;">
4.21
</td>
<td style="text-align:right;">
-0.314
</td>
</tr>
<tr>
<td style="text-align:right;">
4.8
</td>
<td style="text-align:right;">
5.00
</td>
<td style="text-align:right;">
4.21
</td>
<td style="text-align:right;">
0.586
</td>
</tr>
<tr>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
3.00
</td>
<td style="text-align:right;">
4.08
</td>
<td style="text-align:right;">
0.520
</td>
</tr>
<tr>
<td style="text-align:right;">
4.3
</td>
<td style="text-align:right;">
3.00
</td>
<td style="text-align:right;">
4.08
</td>
<td style="text-align:right;">
0.220
</td>
</tr>
<tr>
<td style="text-align:right;">
2.8
</td>
<td style="text-align:right;">
3.00
</td>
<td style="text-align:right;">
4.08
</td>
<td style="text-align:right;">
-1.280
</td>
</tr>
<tr>
<td style="text-align:right;">
4.1
</td>
<td style="text-align:right;">
3.33
</td>
<td style="text-align:right;">
4.10
</td>
<td style="text-align:right;">
-0.002
</td>
</tr>
<tr>
<td style="text-align:right;">
3.4
</td>
<td style="text-align:right;">
3.33
</td>
<td style="text-align:right;">
4.10
</td>
<td style="text-align:right;">
-0.702
</td>
</tr>
<tr>
<td style="text-align:right;">
4.5
</td>
<td style="text-align:right;">
3.17
</td>
<td style="text-align:right;">
4.09
</td>
<td style="text-align:right;">
0.409
</td>
</tr>
</tbody>
</table>
<p>In this case, it outputs only the variables of interest to people learning regression: the outcome variable <span class="math inline">\(y\)</span> (<code>score</code>), all explanatory/predictor variables (<code>bty_avg</code>), all resulting <code>fitted</code> values <span class="math inline">\(\hat{y}\)</span> used by applying the equation of the regression line to <code>bty_avg</code>, and the <code>resid</code>ual <span class="math inline">\(y - \hat{y}\)</span>.</p>
<p>If you’re even more curious about how these and other wrapper functions work, take a look at the source code for these functions on <a href="https://github.com/moderndive/moderndive/blob/master/R/regression_functions.R">GitHub</a>.</p>
</div>
</div>
<div id="conclusion-4" class="section level2">
<h2><span class="header-section-number">6.4</span> Conclusion</h2>
<div id="additional-resources-basic-regression" class="section level3">
<h3><span class="header-section-number">6.4.1</span> Additional resources</h3>
<p>An R script file of all R code used in this chapter is available <a href="scripts/06-regression.R">here</a>.</p>
<p>As we suggested in Subsection <a href="6-regression.html#model1EDA">6.1.1</a>, interpreting coefficients that are not close to the extreme values of -1 and 1 can be subjective. To develop your sense of correlation coefficients, we suggest you play the following 80’s-style video game called “Guess the correlation” at <a href="http://guessthecorrelation.com/" class="uri">http://guessthecorrelation.com/</a>.</p>
<div class="figure" style="text-align: center"><span id="fig:guess-the-correlation"></span>
<img src="images/guess_the_correlation.png" alt="Preview of &quot;Guess the Correlation&quot; Game." width="70%" />
<p class="caption">
FIGURE 6.14: Preview of “Guess the Correlation” Game.
</p>
</div>
</div>
<div id="whats-to-come-4" class="section level3">
<h3><span class="header-section-number">6.4.2</span> What’s to come?</h3>
<p>In this chapter, you’ve studied what we like to term “basic regression” where you only have one explanatory variable. In Chapter <a href="7-multiple-regression.html#multiple-regression">7</a>, we’ll study <em>multiple regression</em> where our regression models can have more than one explanatory variable! In particular, we’ll consider two scenarios: regression models with one numerical and one categorical explanatory variables and regression models with two numerical explanatory variables. This will allow you to construct more sophisticated and powerful models in the hopes of better explaining your outcome variable <span class="math inline">\(y\)</span> of interest.</p>

</div>
</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-rds2016">
<p>Grolemund, Garrett, and Hadley Wickham. 2016. <em>R for Data Science</em>. <a href="http://r4ds.had.co.nz/">http://r4ds.had.co.nz/</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="5-tidy.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="7-multiple-regression.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/moderndive/moderndive_book/edit/master/06-regression.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
