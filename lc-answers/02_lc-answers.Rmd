
Needed packages

```{r}
library(nycflights23)
library(ggplot2)
library(moderndive)
library(tibble)
```


**(LC2.1)** Take a look at both the `flights` data frame from the `nycflights23` package and the `envoy_flights` data frame from the `moderndive` package by running `View(flights)` and `View(envoy_flights)`. In what respect do these data frames differ? For example, think about the number of rows in each dataset.

**Solution**: `envoy_flights` is a subset of `flights` containing only rows where `carrier == "MQ"` (Envoy Air). It has the same columns but **fewer rows** than `flights`.

**(LC2.2)** What are practical reasons why `dep_delay` and `arr_delay` have a positive relationship?

**Solution**: If a plane leaves late, it often loses its departure slot, encounters downstream congestion/spacing, and arrives late as well. Crewing/turnaround buffers can’t fully absorb big late departures, so late out often leads to late in (though some time can be made up while in flight).

**(LC2.3)** What variables in `weather` would you expect to have a negative correlation with `dep_delay`? Why?

**Solution**: **Visibility (`visib`)** and **pressure (`pressure`)**—higher values usually mean clearer, calmer weather and thus **fewer** delays (negative relationship). (By contrast, `precip`, `wind_speed`, `wind_gust` would tend to be positively related to delays.)

**(LC2.4)** Why do you believe there is a cluster of points near (0, 0)? What does (0, 0) correspond to in terms of the Envoy Air flights?

**Solution**: (0, 0) is **on-time departure and on-time arrival**. Many flights leave and arrive close to schedule, producing a dense cluster around the origin.

**(LC2.5)** What are some other features of the plot that stand out to you?

**Solution**: Different people will answer this one differently. One answer is most flights depart and arrive less than an hour late.

**(LC2.6)** Create a new scatterplot with different variables in `envoy_flights`.

**Solution**: Many possibilities for this one, see the plot below. Is there a pattern in departure delay depending on when the flight is scheduled to depart? Interestingly, there seems to be only a few blocks of time where flights depart with Envoy. 

```{r}
ggplot(data = envoy_flights, mapping = aes(x = dep_time, y = dep_delay)) +
  geom_point()
```

**(LC2.7)** Why is setting `alpha` useful with scatterplots?

**Solution**: Lower `alpha` reveals **point density** under overplotting—darker regions indicate where many points overlap, which a regular opaque scatterplot hides. 

**(LC2.8)** After viewing Figure \@ref(fig:alpha), give an approximate range of arrival delays and departure delays that occur most frequently. How has that region changed compared to when you observed the same plot without `alpha = 0.2` set in Figure \@ref(fig:noalpha)?

**Solution**: The densest region is **near zero** (roughly within about -25 minutes for both departure and arrival). With transparency, that high-density core is **much clearer** than in the opaque plot.

**(LC2.9)** Take a look at both the `weather` data frame from the `nycflights23` package and the `early_january_2023_weather` data frame from the `moderndive` package by running `View(weather)` and `View(early_january_2023_weather)`. In what respect do these data frames differ?

**Solution**: `early_january_2023_weather` is a **subset**: only `origin == "EWR"`, `month == 1`, and `day <= 15`. Same variables; **fewer rows**.

**(LC2.10)** `View()` the `flights` data frame again. Why does the `time_hour` variable uniquely identify the hour of the measurement, whereas the `hour` variable does not?

**Solution**: `time_hour` encodes **date + hour** (a `POSIXct` timestamp in R). `hour` alone repeats 0–23 **every day** (and across airports), so it’s not unique.

**(LC2.11)** Why should linegraphs be avoided when there is not a clear ordering of the horizontal axis?

**Solution**: Connecting points implies a meaningful **sequence/continuity**. Without a real order, lines suggest patterns that don’t exist and can mislead.

**(LC2.12)** Why are linegraphs frequently used when time is the explanatory variable on the x-axis?

**Solution**: Time is inherently **ordered**; connecting adjacent times shows **trends and changes over time** smoothly.

**(LC2.13)** Plot a time series of a variable other than `wind_speed` for Newark Airport in the first 15 days of January 2023. Try to select a variable that doesn't have a lot of missing (`NA`) values.

**Solution**:

One example is `visib`ility.

```{r}
ggplot(early_january_2023_weather, aes(x = time_hour, y = visib)) +
  geom_line()
```

**(LC2.14)** What does changing the number of bins from 30 to 20 tell us about the distribution of wind speeds?

**Solution**: Fewer, wider bins **smooth** the histogram, making the overall pattern clearer (most observations at lower speeds), while sacrificing fine detail.

**(LC2.15)** Would you classify the distribution of wind speeds as symmetric or skewed in one direction or another?

**Solution**: **Right-skewed**—a concentration at low speeds with a tail extending to higher wind speeds.

**(LC2.16)** What would you guess is the "center" value in this distribution? Why did you make that choice?

**Solution**: Around **\~10 mph**. The tallest bins cluster roughly in the 5–15 mph range, so the typical value is near 10.

**(LC2.17)** Is this data spread out greatly from the center or is it close? Why?

**Solution**: **Moderate spread**: most values are between 0–20 mph, with relatively few beyond 30 mph (a right tail but not extremely wide).

**(LC2.18)** What other things do you notice about this faceted plot? How does a faceted plot help us see relationships between two variables?

**Solution**: Distributions look **similar across months**, with some months slightly windier. Faceting puts months in **comparable panels with shared scales**, making cross-month contrasts easy.

**(LC2.19)** What do 1–12 correspond to? What about 10, 20, 30?

**Solution**: **1–12 = months** of the year. **10, 20, 30 = wind speed tick marks (mph)** on the x-axis.

**(LC2.20)** For which types of datasets would faceted plots not work well in comparing relationships between variables? Give an example describing the nature of these variables and other important characteristics.

**Solution**: When the facetting variable has **many levels** (e.g., hundreds of ZIP codes) or **few observations per level**, producing tiny, sparse panels that are hard to compare.

**(LC2.21)** Does the `wind_speed` variable in the `weather` dataset have a lot of variability? Why do you say that?

**Solution**: **Some**, but mostly concentrated: many observations between **0–20 mph**, with fewer high-speed outliers. So variability exists with a right tail, but the bulk is low-to-moderate.

**(LC2.22)** What do the dots at the top of the plot for January correspond to? Explain what might have occurred in January to produce these points.

**Solution**: **Outliers** (unusually high winds). Likely stormy or gusty winter days causing much higher wind speeds.

**(LC2.23)** Which months have the highest variability in wind speed? Why?

**Solution**: **Winter months (e.g., Jan–Mar)** show wider spread likely due to seasonal systems bringing stronger, more variable winds.

**(LC2.24)** We looked at the distribution of the numerical variable `wind_speed` split by the numerical variable `month` that we converted using the `factor()` function in order to make a side-by-side boxplot. Why would a boxplot of `wind_speed` split by the numerical variable `pressure` similarly converted to a categorical variable using the `factor()` not be informative?

**Solution**: `pressure` is **continuous with many distinct values**; turning it into a factor yields **lots of tiny groups** with few points each. This leads to clutter that is hard to interpret.

**(LC2.25)** Boxplots provide a simple way to identify outliers. Why may outliers be easier to identify when looking at a boxplot instead of a faceted histogram?

**Solution**: Boxplots **explicitly mark** outliers as points; histograms spread counts across bins, so rare extreme values don’t stand out as clearly.

**(LC2.26)** Why are histograms inappropriate for categorical variables?

**Solution**: Histograms assume a **numeric**, **ordered** x-axis and contiguous bins. Categorical levels aren’t numeric or ordered in that sense.

**(LC2.27)** What is the difference between histograms and barplots?

**Solution**: **Histograms**: numeric variable, contiguous bins (no gaps), y = counts/density. **Barplots**: categorical variable, separate bars with gaps, y = counts (or given frequencies).

**(LC2.28)** How many Alaska Air flights departed NYC in 2023?

**Solution**: **7,843 flights** (`carrier == "AS"`).

**(LC2.29)** What was the 7th highest airline for departed flights from NYC in 2023? How could we better present the table to get this answer quickly?

**Solution**: Sorted by departures, the 7th highest is **NK** (Spirit Airlines) with **15,189 flights**.
A **descending sort** of the table or an **ordered barplot** makes rankings clearer at a glance.

**(LC2.30)** Why should pie charts be avoided and replaced by barplots?

**Solution**: Humans compare **lengths** better than **angles/areas**. Pie charts distort judgments (angles > 90 degrees overestimated, < 90 degrees underestimated); barplots enable clean, one-axis comparisons.

**(LC2.31)** Why do you think people continue to use pie charts?

**Solution**: Familiar defaults in some plotting software, perceived simplicity/aesthetics, and stakeholder expectations (even though they’re harder to read accurately).

**(LC2.32)** What kinds of questions are not easily answered by looking at Figure \@ref(fig:flights-stacked-bar)?

**Solution**: Comparing **origins across carriers** is hard (segments lack a common baseline). It’s also hard to see **small differences** within stacked segments.

**(LC2.33)** What can you say, if anything, about the relationship between airline and airport in NYC in 2023 in regard to the number of departing flights?

**Solution**: Carriers show **airport specialization patterns**. Some airlines have many more departures from one NYC airport than the others.

**(LC2.34)** Why might the side-by-side barplot be preferable to a stacked barplot in this case?

**Solution**: They give each origin a **common baseline within each carrier**, making cross-origin comparisons **straightforward**.

**(LC2.35)** What are the disadvantages of using a dodged barplot, in general?

**Solution**: Can **clutter** with many categories; labels/legend get busy; totals are harder to read; bars become thin and harder to compare when levels proliferate.

**(LC2.36)** Why is the faceted barplot preferred to the side-by-side and stacked barplots in this case?

**Solution**: Separate panels per origin reduce clutter and keep **shared scales**, making it easier to **rank carriers within each airport** and compare patterns across airports.

**(LC2.37)** What information about the different carriers at different airports is more easily seen in the faceted barplot?

**Solution**: **Which carriers dominate each airport**, clear **rankings within each airport**, and presence/absence of specific carriers at specific airports, without the visual interference of stacking or dodging.

